<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <link rel=stylesheet href="../../code.css" type="text/css"></head><body><pre><span class='linenumber'>   1</span> <span class="COMM">/*
<span class='linenumber'>   2</span>    Copyright (c) 2012 KT Corp.
<span class='linenumber'>   3</span>   
<span class='linenumber'>   4</span>    This program is free software: you can redistribute it and/or modify
<span class='linenumber'>   5</span>    it under the terms of the GNU Lesser General Public License as published by
<span class='linenumber'>   6</span>    the Free Software Foundation, either version 3 of the License, or
<span class='linenumber'>   7</span>    (at your option) any later version.
<span class='linenumber'>   8</span> 
<span class='linenumber'>   9</span>    This program is distributed in the hope that it will be useful,
<span class='linenumber'>  10</span>    but WITHOUT ANY WARRANTY; without even the implied warranty of
<span class='linenumber'>  11</span>    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<span class='linenumber'>  12</span>    GNU Lesser General Public License for more details.
<span class='linenumber'>  13</span> 
<span class='linenumber'>  14</span>    You should have received a copy of the GNU Lesser General Public License
<span class='linenumber'>  15</span>    along with This program.  If not, see &lt;http://www.gnu.org/licenses/>.
<span class='linenumber'>  16</span> */</span><span class="WHIT">
<span class='linenumber'>  17</span> </span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">GLOBAL</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  18</span> 
<span class='linenumber'>  19</span> </span><span class="WHIT">  </span><span class="COMM">//Browser agent</span><span class="WHIT">
<span class='linenumber'>  20</span> </span><span class="WHIT">  </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">_USERAGENT</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">navigator.userAgent.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  21</span> 
<span class='linenumber'>  22</span> </span><span class="WHIT">      </span><span class="COMM">// Runtime singleton instance</span><span class="WHIT">
<span class='linenumber'>  23</span> </span><span class="WHIT">      </span><span class="NAME">_RT</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>  24</span> 
<span class='linenumber'>  25</span>       </span><span class="COMM">// Default Mobello Icon path</span><span class="WHIT">
<span class='linenumber'>  26</span> </span><span class="WHIT">      </span><span class="NAME">_ICONPATH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'lib/resources/tauicon.png'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  27</span> 
<span class='linenumber'>  28</span> </span><span class="WHIT">      </span><span class="COMM">// Default Splash image path</span><span class="WHIT">
<span class='linenumber'>  29</span> </span><span class="WHIT">      </span><span class="NAME">_SPLASHPATH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'lib/resources/tausplash.png'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  30</span> 
<span class='linenumber'>  31</span> </span><span class="WHIT">      </span><span class="COMM">// Relative path for Applications</span><span class="WHIT">
<span class='linenumber'>  32</span> </span><span class="WHIT">      </span><span class="NAME">_APPSPATH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'apps/'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  33</span> 
<span class='linenumber'>  34</span> </span><span class="WHIT">      </span><span class="COMM">// Shared folder path</span><span class="WHIT">
<span class='linenumber'>  35</span> </span><span class="WHIT">      </span><span class="NAME">_SHAREDPATH</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'shared/'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  36</span> 
<span class='linenumber'>  37</span> </span><span class="WHIT">      </span><span class="COMM">// Default Runtime configuration</span><span class="WHIT">
<span class='linenumber'>  38</span> </span><span class="WHIT">      </span><span class="NAME">_RTCONFIG</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  39</span> </span><span class="WHIT">        </span><span class="NAME">id</span><span class="WHIT">              </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Mobello_PLATFORM'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// Platform ID</span><span class="WHIT">
<span class='linenumber'>  40</span> </span><span class="WHIT">        </span><span class="NAME">version</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.VER</span><span class="PUNC">,</span><span class="WHIT">        </span><span class="COMM">// Runtime version</span><span class="WHIT">
<span class='linenumber'>  41</span> </span><span class="WHIT">        </span><span class="NAME">timeout</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3000</span><span class="PUNC">,</span><span class="WHIT">           </span><span class="COMM">// App timeout in ms (3 secs.)</span><span class="WHIT">
<span class='linenumber'>  42</span> </span><span class="WHIT">        </span><span class="NAME">multiInstance</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">          </span><span class="COMM">// Allows multiple same App instances</span><span class="WHIT">
<span class='linenumber'>  43</span> </span><span class="WHIT">        </span><span class="NAME">gracefulErrors</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT">           </span><span class="COMM">// Logs/Throws exceptions (true/false) </span><span class="WHIT">
<span class='linenumber'>  44</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  45</span> 
<span class='linenumber'>  46</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>  47</span>    * Returns header's script URLs
<span class='linenumber'>  48</span>    * @private
<span class='linenumber'>  49</span>    * @returns {array} List of URL strings
<span class='linenumber'>  50</span>    */</span><span class="WHIT">
<span class='linenumber'>  51</span> </span><span class="WHIT">  </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">_headerScriptUrls</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  52</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  53</span> </span><span class="WHIT">        </span><span class="NAME">urls</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  54</span> </span><span class="WHIT">        </span><span class="NAME">head</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">'head'</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  55</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">head</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  56</span> </span><span class="WHIT">      </span><span class="NAME">scripts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">head.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">'script'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  57</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scripts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  58</span> </span><span class="WHIT">        </span><span class="NAME">p</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">src.indexOf</span><span class="PUNC">(</span><span class="STRN">'?'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Remove appended parameters</span><span class="WHIT">
<span class='linenumber'>  59</span> </span><span class="WHIT">        </span><span class="NAME">urls.push</span><span class="PUNC">(</span><span class="NAME">p</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">src.substring</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  60</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  61</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  62</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">urls</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  63</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  64</span> 
<span class='linenumber'>  65</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>  66</span>    * Returns a module's full name with its id.
<span class='linenumber'>  67</span>    * @private
<span class='linenumber'>  68</span>    * @param {String} m Module object
<span class='linenumber'>  69</span>    * @returns {String} Full module name
<span class='linenumber'>  70</span>    */</span><span class="WHIT">
<span class='linenumber'>  71</span> </span><span class="WHIT">  </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">_appNameId</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  72</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">m</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">m.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">' ('</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">m.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">')'</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Undefined'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  73</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  74</span> 
<span class='linenumber'>  75</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>  76</span>    * Returns a resolved URL for a relative (application) resource.
<span class='linenumber'>  77</span>    * &lt;p/>
<span class='linenumber'>  78</span>    * Resource path must begin with a "/", "$shared", or be a full URL.
<span class='linenumber'>  79</span>    * @private
<span class='linenumber'>  80</span>    * @param {String} path App-relative path must be '/' prefixed
<span class='linenumber'>  81</span>    * @param {String} appName Application name (optional)
<span class='linenumber'>  82</span>    * @returns {String} Resolved path for the application name 
<span class='linenumber'>  83</span>    */</span><span class="WHIT">
<span class='linenumber'>  84</span> </span><span class="WHIT">  </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">_resolvePath</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">appName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  85</span> </span><span class="WHIT">    </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">path.trim</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  86</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">path.charAt</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'/'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  87</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">'$dashboard'</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">appName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  88</span> </span><span class="WHIT">      </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">path.substring</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  89</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  90</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appName</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  91</span> </span><span class="WHIT">        </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">_APPSPATH</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">appName.trim</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  92</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  93</span> </span><span class="WHIT">        </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'..'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  94</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="REGX">/^\$shared\//</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  95</span> </span><span class="WHIT">        </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">path.replace</span><span class="PUNC">(</span><span class="REGX">/^\$shared\//</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">_SHAREDPATH</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  96</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="REGX">/^(\w+:)?\/\/\/?/</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  97</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Relative resource must begin with "/": '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'tau.rt'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  98</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  99</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 100</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 101</span> </span><span class="WHIT">    </span><span class="NAME">a</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'a'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 102</span> </span><span class="WHIT">    </span><span class="NAME">a.href</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 103</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a.href</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 104</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 105</span> 
<span class='linenumber'> 106</span> 
<span class='linenumber'> 107</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 108</span>    * Runtime API appended to Mobello root namespace
<span class='linenumber'> 109</span>    */</span><span class="WHIT">
<span class='linenumber'> 110</span> </span><span class="WHIT">  </span><span class="NAME">tau.namespace</span><span class="PUNC">(</span><span class="STRN">'tau'</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'> 111</span>   </span><span class="COMM">/** @lends tau */</span><span class="WHIT"> 
<span class='linenumber'> 112</span>   </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 113</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 114</span>      * Singleton으로 생성관리되는 Runtime객체를 반환한다.
<span class='linenumber'> 115</span>      * @returns {Object} Singleton {@link tau.rt.Runtime} 객체
<span class='linenumber'> 116</span>      * @see tau.rt.Runtime
<span class='linenumber'> 117</span>      */</span><span class="WHIT">
<span class='linenumber'> 118</span> </span><span class="WHIT">    </span><span class="NAME">getRuntime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 119</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">_RT</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 120</span> </span><span class="WHIT">        </span><span class="NAME">_RTCONFIG.singleApp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getLauncherParam</span><span class="PUNC">(</span><span class="STRN">'app'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 121</span> </span><span class="WHIT">        </span><span class="NAME">_RTCONFIG.dev</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">'true'</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.getLauncherParam</span><span class="PUNC">(</span><span class="STRN">'dev'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 122</span> </span><span class="WHIT">        </span><span class="NAME">_RT</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Runtime</span><span class="PUNC">(</span><span class="NAME">_RTCONFIG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 123</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 124</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">_RT</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 125</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 126</span> 
<span class='linenumber'> 127</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 128</span>      * 현재 모듈에 대한 configuration정보를 반환한다.
<span class='linenumber'> 129</span>      * &lt;p/>
<span class='linenumber'> 130</span>      * 모듈 이름이 명시되면 해당 모듈에 해당하는
<span class='linenumber'> 131</span>      * configuration정보를 찾아 반환하며 그렇지 않을 경우 현재
<span class='linenumber'> 132</span>      * 동작하고 있는 모듈의 configuration정보를 반환한다.
<span class='linenumber'> 133</span>      * @param {String} [name] configuration정보를 찾고자하는 모듈의 이름
<span class='linenumber'> 134</span>      * @returns {Object} 모듈의 configuration정보
<span class='linenumber'> 135</span>      */</span><span class="WHIT">
<span class='linenumber'> 136</span> </span><span class="WHIT">    </span><span class="NAME">getConfig</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 137</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getModuleConfig</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 138</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 139</span> 
<span class='linenumber'> 140</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 141</span>      * 현재 실행되고 있는 application의 Context정보를 반환한다.
<span class='linenumber'> 142</span>      * @returns {tau.rt.ApplicationContext} 현재 실행중인
<span class='linenumber'> 143</span>      * 모듈의 {@link tau.rt.ApplicationContext}
<span class='linenumber'> 144</span>      * @see tau.rt.ApplicationContext
<span class='linenumber'> 145</span>      */</span><span class="WHIT">
<span class='linenumber'> 146</span> </span><span class="WHIT">    </span><span class="NAME">getCurrentContext</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 147</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 148</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">app</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.rt.Application</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 149</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.ApplicationContext</span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 150</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 151</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 152</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 153</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 154</span> 
<span class='linenumber'> 155</span> 
<span class='linenumber'> 156</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 157</span>    * @name tau.rt
<span class='linenumber'> 158</span>    * @namespace Mobello의 Runtime Module들을 정의한다.
<span class='linenumber'> 159</span>    */</span><span class="WHIT">
<span class='linenumber'> 160</span> </span><span class="WHIT">  </span><span class="NAME">tau.namespace</span><span class="PUNC">(</span><span class="STRN">'tau.rt'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.rt */</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 161</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 162</span>      * 현재 실행중인 디바이스가 안드로이드 단말인지 확인한다.
<span class='linenumber'> 163</span>      * 반환한다.
<span class='linenumber'> 164</span>      * @type Boolean 
<span class='linenumber'> 165</span>      */</span><span class="WHIT">
<span class='linenumber'> 166</span> </span><span class="WHIT">    </span><span class="NAME">isAndroid</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/android/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 167</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 168</span>      * 현재 실행중인 디바이스가 안드로이드2 단말인지 확인한다.
<span class='linenumber'> 169</span>      * @type Boolean 
<span class='linenumber'> 170</span>      */</span><span class="WHIT">
<span class='linenumber'> 171</span> </span><span class="WHIT">    </span><span class="NAME">isAndroidVer2</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/android 2./i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 172</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 173</span>      * 현재 실행중인 디바이스가 아이패드 단말인지 확인한다.
<span class='linenumber'> 174</span>      * @type Boolean 
<span class='linenumber'> 175</span>      */</span><span class="WHIT">
<span class='linenumber'> 176</span> </span><span class="WHIT">    </span><span class="NAME">isIPad</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/ipad/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 177</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 178</span>      * 현재 실행중인 디바이스가 아이폰 단말인지 확인한다.
<span class='linenumber'> 179</span>      * @type Boolean 
<span class='linenumber'> 180</span>      */</span><span class="WHIT">
<span class='linenumber'> 181</span> </span><span class="WHIT">    </span><span class="NAME">isIPhone</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/iphone/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 182</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 183</span>      * 현재 실행중인 브라우저가 webkit기반 브라우저인지 확인한다.
<span class='linenumber'> 184</span>      * @type Boolean 
<span class='linenumber'> 185</span>      */</span><span class="WHIT">
<span class='linenumber'> 186</span> </span><span class="WHIT">    </span><span class="NAME">isWebkit</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/webkit/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 187</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 188</span>      * 현재 실행중인 브라우저가 chrome 브라우저인지 확인한다.
<span class='linenumber'> 189</span>      * @type Boolean 
<span class='linenumber'> 190</span>      */</span><span class="WHIT">
<span class='linenumber'> 191</span> </span><span class="WHIT">    </span><span class="NAME">isChrome</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/chrome/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 192</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 193</span>      * 현재 실행중인 브라우저가 safari 브라우저인지 확인한다.
<span class='linenumber'> 194</span>      * @type Boolean 
<span class='linenumber'> 195</span>      */</span><span class="WHIT">
<span class='linenumber'> 196</span> </span><span class="WHIT">    </span><span class="NAME">isSafari</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/safari/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 197</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 198</span>      * 현재 실행중인 브라우저가 IE 브라우저인지 확인한다.
<span class='linenumber'> 199</span>      * @type Boolean 
<span class='linenumber'> 200</span>      */</span><span class="WHIT">
<span class='linenumber'> 201</span> </span><span class="WHIT">    </span><span class="NAME">isIE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="REGX">/msie/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 202</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 203</span>      * 현재 실행중인 디바이스가 orientationchange 지원하는지
<span class='linenumber'> 204</span>      * 확인한다.
<span class='linenumber'> 205</span>      * @type Boolean 
<span class='linenumber'> 206</span>      */</span><span class="WHIT">
<span class='linenumber'> 207</span> </span><span class="WHIT">    </span><span class="NAME">hasOrientationChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">'onorientationchange'</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">GLOBAL</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 208</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 209</span>      * 현재 실행중인 디바이스가 touch 이벤트를 지원하는지 확인한다.
<span class='linenumber'> 210</span>      * @type Boolean 
<span class='linenumber'> 211</span>      */</span><span class="WHIT">
<span class='linenumber'> 212</span> </span><span class="WHIT">    </span><span class="NAME">hasTouch</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">'ontouchstart'</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">GLOBAL</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="REGX">/chrome/i</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">_USERAGENT</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 213</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'> 214</span>      * 현재 실행중인 디바이스가 3D를 지원하는지 확인한다.
<span class='linenumber'> 215</span>      * @type Boolean 
<span class='linenumber'> 216</span>      */</span><span class="WHIT">
<span class='linenumber'> 217</span> </span><span class="WHIT">    </span><span class="NAME">has3D</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">'WebKitCSSMatrix'</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">GLOBAL</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="STRN">'m11'</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">WebKitCSSMatrix</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 218</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 219</span> 
<span class='linenumber'> 220</span> 
<span class='linenumber'> 221</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.Event */</span><span class="WHIT">
<span class='linenumber'> 222</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Event'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//$ tau.rt.Event</span><span class="WHIT">
<span class='linenumber'> 223</span> </span><span class="WHIT">    </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.rt.Event */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 224</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 225</span>        * 탭 이벤트. 화면을 터치한 상태에서 움직이지 않고 뗄 경우 발생
<span class='linenumber'> 226</span>        * @type String
<span class='linenumber'> 227</span>        */</span><span class="WHIT">
<span class='linenumber'> 228</span> </span><span class="WHIT">      </span><span class="NAME">TAP</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'tap'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 229</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 230</span>        * 터치 시작 이벤트. 화면에 터치되는 순간 발생
<span class='linenumber'> 231</span>        * @type String
<span class='linenumber'> 232</span>        */</span><span class="WHIT">
<span class='linenumber'> 233</span> </span><span class="WHIT">      </span><span class="NAME">TOUCHSTART</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'touchstart'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 234</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 235</span>        * 터치 이동 이벤트. 화면에 터치한 상태에서 떼지않고 이동할 경우 발생 
<span class='linenumber'> 236</span>        * @type String
<span class='linenumber'> 237</span>        */</span><span class="WHIT">
<span class='linenumber'> 238</span> </span><span class="WHIT">      </span><span class="NAME">TOUCHMOVE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'touchmove'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 239</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 240</span>        * 터치 종료 이벤트. 터치한 다음 화면에서 뗄 경우 발생 
<span class='linenumber'> 241</span>        * @type String
<span class='linenumber'> 242</span>        */</span><span class="WHIT">
<span class='linenumber'> 243</span> </span><span class="WHIT">      </span><span class="NAME">TOUCHEND</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'touchend'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 244</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 245</span>        * 터치 취소 이벤트. Runtime에서 발생하는 이벤트이며 시스템 처리를 위해
<span class='linenumber'> 246</span>        * 사용자 이벤트를 취소시키고자 할 경우 발생
<span class='linenumber'> 247</span>        * @type String
<span class='linenumber'> 248</span>        */</span><span class="WHIT">
<span class='linenumber'> 249</span> </span><span class="WHIT">      </span><span class="NAME">TOUCHCANCEL</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'touchcancel'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 250</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 251</span>        * Gesture 시작 이벤트
<span class='linenumber'> 252</span>        * @type String
<span class='linenumber'> 253</span>        */</span><span class="WHIT">
<span class='linenumber'> 254</span> </span><span class="WHIT">      </span><span class="NAME">GESTURESTART</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'gesturestart'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 255</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 256</span>        * Gesture 이동 이벤트
<span class='linenumber'> 257</span>        * @type String
<span class='linenumber'> 258</span>        */</span><span class="WHIT">
<span class='linenumber'> 259</span> </span><span class="WHIT">      </span><span class="NAME">GESTUREMOVE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'gesturechange'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 260</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 261</span>        * Gesture 종료 이벤트
<span class='linenumber'> 262</span>        * @type String
<span class='linenumber'> 263</span>        */</span><span class="WHIT">
<span class='linenumber'> 264</span> </span><span class="WHIT">      </span><span class="NAME">GESTUREEND</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'gestureend'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 265</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 266</span>        * css3 transition이 종료된 후 발생되는 이벤트
<span class='linenumber'> 267</span>        * @type String
<span class='linenumber'> 268</span>        */</span><span class="WHIT">
<span class='linenumber'> 269</span> </span><span class="WHIT">      </span><span class="NAME">TRANSITIONEND</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'webkitTransitionEnd'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 270</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 271</span>        * Component가 Container에 추가되면 발생되는 이벤트 
<span class='linenumber'> 272</span>        * @type String
<span class='linenumber'> 273</span>        */</span><span class="WHIT">
<span class='linenumber'> 274</span> </span><span class="WHIT">      </span><span class="NAME">COMPADDED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'compadded'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 275</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 276</span>        * Component가 Container에 제거되면 발생되는 이벤트
<span class='linenumber'> 277</span>        * @type String
<span class='linenumber'> 278</span>        */</span><span class="WHIT">
<span class='linenumber'> 279</span> </span><span class="WHIT">      </span><span class="NAME">COMPREMOVED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'compremoved'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 280</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 281</span>        * Component가 draw된 후 발생되는 이벤트 
<span class='linenumber'> 282</span>        * @type String
<span class='linenumber'> 283</span>        */</span><span class="WHIT">      
<span class='linenumber'> 284</span>       </span><span class="NAME">COMPDRAWN</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'compdrawn'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 285</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 286</span>        * Component의 root DOM element가 DOM tree에서 삭제된 후 발생되는 이벤트
<span class='linenumber'> 287</span>        * @type String
<span class='linenumber'> 288</span>        */</span><span class="WHIT">            
<span class='linenumber'> 289</span>       </span><span class="NAME">COMPCLEAR</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'compcleared'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 290</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 291</span>        * Scene이 로딩된 직후 발생되는 이벤트
<span class='linenumber'> 292</span>        * @type String
<span class='linenumber'> 293</span>        */</span><span class="WHIT">
<span class='linenumber'> 294</span> </span><span class="WHIT">      </span><span class="NAME">SCENELOADED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'sceneloaded'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 295</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 296</span>        * Scene이 그려진 직후 발생되는 이벤트 
<span class='linenumber'> 297</span>        * @type String
<span class='linenumber'> 298</span>        */</span><span class="WHIT">
<span class='linenumber'> 299</span> </span><span class="WHIT">      </span><span class="NAME">SCENEDRAWN</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'scenedrawn'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 300</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 301</span>        * 값이 변경된 직후 발생되는 이벤트 
<span class='linenumber'> 302</span>        * @type String
<span class='linenumber'> 303</span>        */</span><span class="WHIT">
<span class='linenumber'> 304</span> </span><span class="WHIT">      </span><span class="NAME">VALUECHANGE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'valueChange'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 305</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 306</span>        * 사용자 선택이 변경된 직후 발생되는 이벤트 
<span class='linenumber'> 307</span>        * @type String
<span class='linenumber'> 308</span>        */</span><span class="WHIT">
<span class='linenumber'> 309</span> </span><span class="WHIT">      </span><span class="NAME">SELECTCHANGE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'selectChange'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 310</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 311</span>        * Orientation 변경 이벤트 
<span class='linenumber'> 312</span>        * @type String
<span class='linenumber'> 313</span>        */</span><span class="WHIT">
<span class='linenumber'> 314</span> </span><span class="WHIT">      </span><span class="NAME">ORIENTATION</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'orientationchange'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 315</span> </span><span class="WHIT">      
<span class='linenumber'> 316</span>       </span><span class="COMM">/** 
<span class='linenumber'> 317</span>        * Ajax 요청이 전송된 직후 발생되는 이벤트 
<span class='linenumber'> 318</span>        * @type String
<span class='linenumber'> 319</span>        */</span><span class="WHIT">
<span class='linenumber'> 320</span> </span><span class="WHIT">      </span><span class="NAME">REQ_SENT</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'requestsent'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 321</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 322</span>        * Ajax 결과를 받은 직후 발생되는 이벤트 
<span class='linenumber'> 323</span>        * @type String
<span class='linenumber'> 324</span>        */</span><span class="WHIT">
<span class='linenumber'> 325</span> </span><span class="WHIT">      </span><span class="NAME">REQ_RECEIVED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'requestreceived'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 326</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 327</span>        * Ajax 요청이 취소될 경우 발생되는 이벤트 
<span class='linenumber'> 328</span>        * @type String
<span class='linenumber'> 329</span>        */</span><span class="WHIT">
<span class='linenumber'> 330</span> </span><span class="WHIT">      </span><span class="NAME">REQ_ABORTED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'requestaborted'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 331</span> 
<span class='linenumber'> 332</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 333</span>        * Runtime Lifecycle에서 INSTALL시 발생되는 이벤트 
<span class='linenumber'> 334</span>        * @type String
<span class='linenumber'> 335</span>        */</span><span class="WHIT">
<span class='linenumber'> 336</span> </span><span class="WHIT">      </span><span class="NAME">RT_INSTALL</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimeinstall'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 337</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 338</span>        * Runtime Lifecycle에서 UNINSTALL시 발생되는 이벤트 
<span class='linenumber'> 339</span>        * @type String
<span class='linenumber'> 340</span>        */</span><span class="WHIT">
<span class='linenumber'> 341</span> </span><span class="WHIT">      </span><span class="NAME">RT_UNINSTALL</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimeuninstall'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 342</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 343</span>        * Runtime Lifecycle에서 특정 앱을 실행 직후 발생되는 이벤트 
<span class='linenumber'> 344</span>        * @type String
<span class='linenumber'> 345</span>        */</span><span class="WHIT">
<span class='linenumber'> 346</span> </span><span class="WHIT">      </span><span class="NAME">RT_START</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimestart'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 347</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 348</span>        * Runtime Lifecycle에서 특정 앱을 중지할 때 발생되는 이벤트 
<span class='linenumber'> 349</span>        * @type String
<span class='linenumber'> 350</span>        */</span><span class="WHIT">
<span class='linenumber'> 351</span> </span><span class="WHIT">      </span><span class="NAME">RT_STOP</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimestop'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 352</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 353</span>        * Runtime Lifecycle에서 특정 앱을 시작할 때 발생되는 이벤트 
<span class='linenumber'> 354</span>        * @type String
<span class='linenumber'> 355</span>        */</span><span class="WHIT">
<span class='linenumber'> 356</span> </span><span class="WHIT">      </span><span class="NAME">RT_LAUNCH</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimelaunch'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 357</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 358</span>        * Runtime Lifecycle에서 Runtime이 종료될 때 발생되는 이벤트 
<span class='linenumber'> 359</span>        * @type String
<span class='linenumber'> 360</span>        */</span><span class="WHIT">
<span class='linenumber'> 361</span> </span><span class="WHIT">      </span><span class="NAME">RT_TERMINATE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimeterminate'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 362</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 363</span>        * Runtime Lifecycle에서 설치과정을 종료한 직후 발생되는 이벤트 
<span class='linenumber'> 364</span>        * @type String
<span class='linenumber'> 365</span>        */</span><span class="WHIT">
<span class='linenumber'> 366</span> </span><span class="WHIT">      </span><span class="NAME">RT_INSTALLED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimeinstalled'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 367</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 368</span>        * Runtime Lifecycle에서 UNINSTALL과정을 종료한 직후 발생되는 이벤트 
<span class='linenumber'> 369</span>        * @type String
<span class='linenumber'> 370</span>        */</span><span class="WHIT">
<span class='linenumber'> 371</span> </span><span class="WHIT">      </span><span class="NAME">RT_UNINSTALLED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimeuninstalled'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 372</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 373</span>        * Runtime Lifecycle에서 theme이 load된 직후 발생되는 이벤트 
<span class='linenumber'> 374</span>        * @type String
<span class='linenumber'> 375</span>        */</span><span class="WHIT">
<span class='linenumber'> 376</span> </span><span class="WHIT">      </span><span class="NAME">RT_THEME_LOADED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimethemeloaded'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 377</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 378</span>        * Runtime Lifecycle에서 theme이 load가 되고 사용가능하게 된 직후 발생되는 이벤트
<span class='linenumber'> 379</span>        * @type String
<span class='linenumber'> 380</span>        */</span><span class="WHIT">
<span class='linenumber'> 381</span> </span><span class="WHIT">      </span><span class="NAME">RT_THEME_ENABLED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'runtimethemeenabled'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 382</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 383</span>        * Runtime에서 모듈(Module)이 foreground background로 변경될 때 발생되는 이벤트
<span class='linenumber'> 384</span>        * @type String
<span class='linenumber'> 385</span>        */</span><span class="WHIT">
<span class='linenumber'> 386</span> </span><span class="WHIT">      </span><span class="NAME">RT_APP_CHANGE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'appchange'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 387</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 388</span>        * Controller가 foreground 또는 background로 변경될 때 발생되는 이벤트 
<span class='linenumber'> 389</span>        * @type String
<span class='linenumber'> 390</span>        */</span><span class="WHIT">
<span class='linenumber'> 391</span> </span><span class="WHIT">      </span><span class="NAME">RT_CTRL_CHANGE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'controllerchange'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 392</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 393</span>        * 이벤트의 단계중 CAPTURING단계를 나타낸다.
<span class='linenumber'> 394</span>        * @type Number
<span class='linenumber'> 395</span>        */</span><span class="WHIT">
<span class='linenumber'> 396</span> </span><span class="WHIT">      </span><span class="NAME">CAPTURING_PHASE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 397</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 398</span>        * 이벤트의 단계중 TARGET단계를 나타낸다.
<span class='linenumber'> 399</span>        * @type Number
<span class='linenumber'> 400</span>        */</span><span class="WHIT">
<span class='linenumber'> 401</span> </span><span class="WHIT">      </span><span class="NAME">AT_TARGET</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 402</span> </span><span class="WHIT">      </span><span class="COMM">/** 
<span class='linenumber'> 403</span>        * 이벤트의 단계중 BUBBLING단계를 나타낸다. 
<span class='linenumber'> 404</span>        * @type Number
<span class='linenumber'> 405</span>        */</span><span class="WHIT">
<span class='linenumber'> 406</span> </span><span class="WHIT">      </span><span class="NAME">BUBBLING_PHASE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="WHIT">
<span class='linenumber'> 407</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 408</span> 
<span class='linenumber'> 409</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 410</span>      * Mobello에서는 자체정의된 이벤트 시스템을 사용한다.
<span class='linenumber'> 411</span>      * Mobello에서 제공하는 UI 컴포넌트로 부터 발생되는 다양한
<span class='linenumber'> 412</span>      * 이벤트는 tau.rt.Event 객체를 나타낸다.&lt;p/>
<span class='linenumber'> 413</span>      * UI관련 대부분의 클래스는 tau.rt.EventDelegator를 상속받아
<span class='linenumber'> 414</span>      * 정의된다.
<span class='linenumber'> 415</span>      * @class
<span class='linenumber'> 416</span>      * Mobello에서 사용되는 클래스를 정의한다.
<span class='linenumber'> 417</span>      * @constructs
<span class='linenumber'> 418</span>      * @param {String} name 이벤트 이름
<span class='linenumber'> 419</span>      * @param {tau.rt.EventDelegator} source 이벤트가 발생되는 {@link tau.rt.EventDelegator} 객체
<span class='linenumber'> 420</span>      * @param {Array} touches 현재 화면을 터치했을 때 손가락별
<span class='linenumber'> 421</span>      * 터치정보
<span class='linenumber'> 422</span>      * @param {Array} targetTouches 동일한 노드에서 시작한 터치정보를 필터일한다.
<span class='linenumber'> 423</span>      * @param {Array} changedTouches 이벤트를 최초 발생시킨 터치정보
<span class='linenumber'> 424</span>      */</span><span class="WHIT">
<span class='linenumber'> 425</span> </span><span class="WHIT">    </span><span class="NAME">Event</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">source</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetTouches</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">changedTouches</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 426</span> </span><span class="WHIT">      </span><span class="NAME">this._name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 427</span> </span><span class="WHIT">      </span><span class="NAME">this._source</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">source</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 428</span> </span><span class="WHIT">      </span><span class="NAME">this._alwaysBubble</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 429</span> </span><span class="WHIT">      </span><span class="NAME">this._stopPropagation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 430</span> </span><span class="WHIT">      </span><span class="NAME">this._preventDefault</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 431</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'> 432</span>        * 이벤트가 밸생된 시점의 timestamp정보
<span class='linenumber'> 433</span>        * @type Date
<span class='linenumber'> 434</span>        */</span><span class="WHIT">
<span class='linenumber'> 435</span> </span><span class="WHIT">      </span><span class="NAME">this.timeStamp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">    
<span class='linenumber'> 436</span>       </span><span class="COMM">/**
<span class='linenumber'> 437</span>        * 발생된 이벤트의 단계를 나타낸다.&lt;p/>
<span class='linenumber'> 438</span>        * 디벤트 단계는 각각 {@link tau.rt.Event.CAPTURING_PHASE},
<span class='linenumber'> 439</span>        * {@link tau.rt.Event.AT_TARGET}, {@link tau.rt.Event.BUBBLING_PHASE}
<span class='linenumber'> 440</span>        * 가 있다.
<span class='linenumber'> 441</span>        *
<span class='linenumber'> 442</span>        * @type Number
<span class='linenumber'> 443</span>        */</span><span class="WHIT">
<span class='linenumber'> 444</span> </span><span class="WHIT">      </span><span class="NAME">this.eventPhase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// NONE, if user created mannually</span><span class="WHIT">
<span class='linenumber'> 445</span> </span><span class="WHIT">      
<span class='linenumber'> 446</span>       </span><span class="COMM">// Touch Event members</span><span class="WHIT">
<span class='linenumber'> 447</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touches</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 448</span> </span><span class="WHIT">        </span><span class="NAME">this.touches</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 449</span> </span><span class="WHIT">        </span><span class="NAME">this.targetTouches</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">targetTouches</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 450</span> </span><span class="WHIT">        </span><span class="NAME">this.changedTouches</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">changedTouches</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 451</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 452</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 453</span> 
<span class='linenumber'> 454</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 455</span>      * 현재 이벤트 이름을 반환한다.
<span class='linenumber'> 456</span>      * @returns {String} 이벤트 명 
<span class='linenumber'> 457</span>      */</span><span class="WHIT">
<span class='linenumber'> 458</span> </span><span class="WHIT">    </span><span class="NAME">getName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 459</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 460</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 461</span> 
<span class='linenumber'> 462</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 463</span>      * 이벤트가 발생된 원본객체({@link tau.rt.EventDelegator})를 반환한다.
<span class='linenumber'> 464</span>      * @returns {Object} EventDelegator 객체 
<span class='linenumber'> 465</span>      */</span><span class="WHIT">
<span class='linenumber'> 466</span> </span><span class="WHIT">    </span><span class="NAME">getSource</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 467</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._source</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 468</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 469</span> 
<span class='linenumber'> 470</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 471</span>      * 이후의 이벤트 propagation작업을 취소한다. 따라서 Bubbling
<span class='linenumber'> 472</span>      * up단계에 등록된 이벤트 리스너는 동작하지 않는다.
<span class='linenumber'> 473</span>      */</span><span class="WHIT"> 
<span class='linenumber'> 474</span>     </span><span class="NAME">stopPropagation</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 475</span> </span><span class="WHIT">      </span><span class="NAME">this._stopPropagation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 476</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 477</span> 
<span class='linenumber'> 478</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 479</span>      * 이벤트의 default function이 수행되지 않도록 한다.
<span class='linenumber'> 480</span>      */</span><span class="WHIT">
<span class='linenumber'> 481</span> </span><span class="WHIT">    </span><span class="NAME">preventDefault</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 482</span> </span><span class="WHIT">      </span><span class="NAME">this._preventDefault</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 483</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 484</span> 
<span class='linenumber'> 485</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 486</span>      * 발생된 이벤트가 적어도 한개의 이벤트 리스너에 의해
<span class='linenumber'> 487</span>      * 처리되었다면 이 이벤트는 더이상 propagation되지 않는다.
<span class='linenumber'> 488</span>      * 하지만 alwaysBubble() 메소드를 호출하면 이벤트가
<span class='linenumber'> 489</span>      * 처리되더라도 계속해서 Bubbling되도록 한다.
<span class='linenumber'> 490</span>      */</span><span class="WHIT">
<span class='linenumber'> 491</span> </span><span class="WHIT">    </span><span class="NAME">alwaysBubble</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 492</span> </span><span class="WHIT">      </span><span class="NAME">this._alwaysBubble</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 493</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 494</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 495</span> 
<span class='linenumber'> 496</span> 
<span class='linenumber'> 497</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.EventPublisher.prototype */</span><span class="WHIT">
<span class='linenumber'> 498</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.EventPublisher'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 499</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 500</span>      * 명시된 파라미터를 이용하여 새로운 EventPublisher 객체를
<span class='linenumber'> 501</span>      * 생성한다.
<span class='linenumber'> 502</span>      * @class
<span class='linenumber'> 503</span>      * EventPublisher는 이벤트가 발생되면 해당 이벤트 리스너와
<span class='linenumber'> 504</span>      * 바인딩 시키는 작업을 수행한다.&lt;p/>
<span class='linenumber'> 505</span>      * 이 클래스의 주요 기능은 callback function 등록
<span class='linenumber'> 506</span>      * 및 관리하고 이벤트가 발생될 시점에 해당
<span class='linenumber'> 507</span>      * callback function들이 정상적으로 호출될 수 있도록 한다.
<span class='linenumber'> 508</span>      * &lt;p/>
<span class='linenumber'> 509</span>      * 또한 이벤트 발생과정의 상태, 기본 동작,
<span class='linenumber'> 510</span>      * 예외상황처리 등을 처리한다. 예를 들어,
<span class='linenumber'> 511</span>      * 사용자가 이벤트를 더이상 propagation시키지
<span class='linenumber'> 512</span>      * 않고자 할 경우 stopPropagation()메소드를
<span class='linenumber'> 513</span>      * 호출하여 더이상 이벤트가 bubbling되지
<span class='linenumber'> 514</span>      * 않도록 할 수 있다.
<span class='linenumber'> 515</span>      * @constructs
<span class='linenumber'> 516</span>      * @param {String} name 이벤트 명
<span class='linenumber'> 517</span>      * @param {Object} source 이벤트를 발생시킨 원본 {@link tau.rt.EventDelegator}객체 
<span class='linenumber'> 518</span>      * @param {Object} [opts] 이벤트 옵션 
<span class='linenumber'> 519</span>      * @param {Function} [opts.antecedentFn] 이벤트 발생시
<span class='linenumber'> 520</span>      * 가장 먼저 호출될 핸들러
<span class='linenumber'> 521</span>      * @param {Function} [opts.defaultFn] 이벤트 발생시
<span class='linenumber'> 522</span>      * 최종적으로 호출될 핸들러
<span class='linenumber'> 523</span>      * @param {Function} [opts.stoppedFn] 이벤트가 중단되었을
<span class='linenumber'> 524</span>      * 때 호출될 핸들러
<span class='linenumber'> 525</span>      * @param {Boolean} [opts.alwaysBubble = false] true이면 항상 이벤트가
<span class='linenumber'> 526</span>      * Bubbling될도록 한다. 
<span class='linenumber'> 527</span>      * @param {Boolean} [opts.alwaysDefault = true] true이면 항상
<span class='linenumber'> 528</span>      * defaultFn 핸들러가 수행되도록 한다. 
<span class='linenumber'> 529</span>      * @param {Boolean} [opts.gracefulErrors = false] false이면 오류 발생시
<span class='linenumber'> 530</span>      * 더이상 진행하지 않고 즉시 중단한다.
<span class='linenumber'> 531</span>      * @throws {Error} 이벤트 이름 또는 source가 명시되지 않을
<span class='linenumber'> 532</span>      * 경우
<span class='linenumber'> 533</span>      */</span><span class="WHIT">
<span class='linenumber'> 534</span> </span><span class="WHIT">    </span><span class="NAME">EventPublisher</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">source</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 535</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">source</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 536</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"tau.rt.EventPublisher: invalid parameters."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 537</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 538</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Event name */</span><span class="WHIT">
<span class='linenumber'> 539</span> </span><span class="WHIT">      </span><span class="NAME">this._name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 540</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Source EventDelegator from which the event ware fired */</span><span class="WHIT">
<span class='linenumber'> 541</span> </span><span class="WHIT">      </span><span class="NAME">this._source</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">source</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 542</span> 
<span class='linenumber'> 543</span> </span><span class="WHIT">      </span><span class="NAME">this.init</span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 544</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 545</span> 
<span class='linenumber'> 546</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 547</span>      * 이벤트를 초기화하거나 재설정 한다.
<span class='linenumber'> 548</span>      * &lt;p/>
<span class='linenumber'> 549</span>      * 파라미터를 'null' 또는 'undefined' 로 설정할 경우 모든 이벤트
<span class='linenumber'> 550</span>      * 상태를 리셋한다.
<span class='linenumber'> 551</span>      * @param {Object} [opts] 이벤트 옵션 
<span class='linenumber'> 552</span>      * @param {Boolean} [keepListeners] true이면 이전에 등록된
<span class='linenumber'> 553</span>      * 리스너들을 유지시킨다.
<span class='linenumber'> 554</span>      * @returns {tau.rt.EventPublisher} this 객체
<span class='linenumber'> 555</span>      */</span><span class="WHIT">
<span class='linenumber'> 556</span> </span><span class="WHIT">    </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">keepListeners</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 557</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Event Options */</span><span class="WHIT">
<span class='linenumber'> 558</span> </span><span class="WHIT">      </span><span class="NAME">this._opts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 559</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class='linenumber'> 560</span>          * The foremost function that is to be called before all other 
<span class='linenumber'> 561</span>          * registered event listeners. In general, initialization/startup code 
<span class='linenumber'> 562</span>          * for a set of event listeners are implemented here.
<span class='linenumber'> 563</span>          * @param {Object} event {@link tau.rt.Event} instance
<span class='linenumber'> 564</span>          * @param {Object} payload Data object to be delivered to the listener
<span class='linenumber'> 565</span>          */</span><span class="WHIT">
<span class='linenumber'> 566</span> </span><span class="WHIT">        </span><span class="NAME">antecedentFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 567</span> 
<span class='linenumber'> 568</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class='linenumber'> 569</span>          * The final function to be called after all the registered event 
<span class='linenumber'> 570</span>          * listener callbacks have been executed. In general, cleanup 
<span class='linenumber'> 571</span>          * code for a set of event listeners are implemented here.
<span class='linenumber'> 572</span>          * &lt;p/>
<span class='linenumber'> 573</span>          * If only a single static routine is required for a particular event, 
<span class='linenumber'> 574</span>          * this routine should be implemented.
<span class='linenumber'> 575</span>          * @param {Object} event {@link tau.rt.Event} instance
<span class='linenumber'> 576</span>          * @param {Object} payload Data object to be delivered to the listener
<span class='linenumber'> 577</span>          */</span><span class="WHIT">
<span class='linenumber'> 578</span> </span><span class="WHIT">        </span><span class="NAME">defaultFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 579</span> 
<span class='linenumber'> 580</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class='linenumber'> 581</span>          * This function is called when an event's propagation have been halted 
<span class='linenumber'> 582</span>          * by calling {@link Event.stopPropagation}.
<span class='linenumber'> 583</span>          * @param {Object} event {@link tau.rt.Event} instance
<span class='linenumber'> 584</span>          * @param {Object} payload Payload instance to deliver to event handler
<span class='linenumber'> 585</span>          */</span><span class="WHIT">
<span class='linenumber'> 586</span> </span><span class="WHIT">        </span><span class="NAME">stoppedFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 587</span> 
<span class='linenumber'> 588</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class='linenumber'> 589</span>          * Disabling &lt;code>alwaysBubble&lt;/code> will prevent any further bubbling 
<span class='linenumber'> 590</span>          * up if an event listener was handled within the EventDelegator.
<span class='linenumber'> 591</span>          */</span><span class="WHIT">
<span class='linenumber'> 592</span> </span><span class="WHIT">        </span><span class="NAME">alwaysBubble</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 593</span> 
<span class='linenumber'> 594</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class='linenumber'> 595</span>          * Disabling &lt;code>alwaysDefaults&lt;/code> will prevent any calls to
<span class='linenumber'> 596</span>          * &lt;code>antecedentFn&lt;/code> & &lt;code>defaultFn&lt;/code> during bubbling 
<span class='linenumber'> 597</span>          */</span><span class="WHIT">
<span class='linenumber'> 598</span> </span><span class="WHIT">        </span><span class="NAME">alwaysDefault</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 599</span> 
<span class='linenumber'> 600</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class='linenumber'> 601</span>          * Disabling &lt;code>gracefulErrors&lt;/code> will stop the rest of the event 
<span class='linenumber'> 602</span>          * propagation if an exception occurs within an event listener.
<span class='linenumber'> 603</span>          * @type Boolean
<span class='linenumber'> 604</span>          */</span><span class="WHIT">
<span class='linenumber'> 605</span> </span><span class="WHIT">        </span><span class="NAME">gracefulErrors</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT">
<span class='linenumber'> 606</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 607</span> 
<span class='linenumber'> 608</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">keepListeners</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 609</span> </span><span class="WHIT">        </span><span class="COMM">/** @private Registered event callback functions */</span><span class="WHIT">
<span class='linenumber'> 610</span> </span><span class="WHIT">        </span><span class="NAME">this._listeners</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// {$fn: xxx, $contexts: []}</span><span class="WHIT">
<span class='linenumber'> 611</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 612</span> 
<span class='linenumber'> 613</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 614</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 615</span> 
<span class='linenumber'> 616</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 617</span>      * 현재 이벤트의 이름을 반환한다.
<span class='linenumber'> 618</span>      * @returns {String} 이벤트 명
<span class='linenumber'> 619</span>      */</span><span class="WHIT">
<span class='linenumber'> 620</span> </span><span class="WHIT">    </span><span class="NAME">getName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 621</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 622</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 623</span> 
<span class='linenumber'> 624</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 625</span>      * 이벤트가 발생된 원본 객체를 반환한다.
<span class='linenumber'> 626</span>      * @returns {tau.rt.EventDelegator} 이벤트를 발생시킨 원본 객체
<span class='linenumber'> 627</span>      * @see tau.rt.EventDelegator
<span class='linenumber'> 628</span>      */</span><span class="WHIT">
<span class='linenumber'> 629</span> </span><span class="WHIT">    </span><span class="NAME">getSource</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 630</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._source</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 631</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 632</span> 
<span class='linenumber'> 633</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 634</span>      * 등록된 모든 callback 리스너 함수들을 반환한다. 
<span class='linenumber'> 635</span>      * @param {Boolean} [capture = false] true이면 capture단계에
<span class='linenumber'> 636</span>      * 등록된 모든 리스너들을 반환하고 그렇지 않을면 bubble up단계의
<span class='linenumber'> 637</span>      * 리스너들을 반환한다.
<span class='linenumber'> 638</span>      * @returns {Array} callback이벤트 리스너 함수 배열
<span class='linenumber'> 639</span>      */</span><span class="WHIT">
<span class='linenumber'> 640</span> </span><span class="WHIT">    </span><span class="NAME">getListeners</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">capture</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 641</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listeners</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._listeners</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 642</span> </span><span class="WHIT">          </span><span class="NAME">results</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 643</span> </span><span class="WHIT">          </span><span class="NAME">phase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">capture</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 644</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">listeners.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 645</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">listeners</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">$fn.capture</span><span class="WHIT"> </span><span class="PUNC">&</span><span class="WHIT"> </span><span class="NAME">phase</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">phase</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// BIT-AND operation</span><span class="WHIT">
<span class='linenumber'> 646</span> </span><span class="WHIT">          </span><span class="NAME">results.push</span><span class="PUNC">(</span><span class="NAME">listeners</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 647</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 648</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 649</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">results</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 650</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 651</span> 
<span class='linenumber'> 652</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 653</span>      * 이벤트에 등록된 모든 callback 리스너들을 실행한다.
<span class='linenumber'> 654</span>      * &lt;p/>
<span class='linenumber'> 655</span>      * event propagation중 {@link tau.rt.Event.stopPropagation}을
<span class='linenumber'> 656</span>      * 호출하면 더이상 bubbling을 진행하지 않고
<span class='linenumber'> 657</span>      * EventPublisher의 stoppedFn 함수가 호출된다.
<span class='linenumber'> 658</span>      * &lt;p/>
<span class='linenumber'> 659</span>      * 추가적으로 {@link tau.rt.Event.preventDefault}을 호출하면
<span class='linenumber'> 660</span>      * EventPublisher의 defaultFn 함수가 호출된다.
<span class='linenumber'> 661</span>      * @param {tau.rt.Event} event 이벤트 객체
<span class='linenumber'> 662</span>      * @param {Object} [payload] 리스너에게 전달될 데이터 객체
<span class='linenumber'> 663</span>      * @return {Number} 호출된 리스너의 개수
<span class='linenumber'> 664</span>      */</span><span class="WHIT">
<span class='linenumber'> 665</span> </span><span class="WHIT">    </span><span class="NAME">notifyListeners</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 666</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ctxs</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">listeners</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 667</span> </span><span class="WHIT">          </span><span class="NAME">phase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">event.eventPhase</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 668</span> </span><span class="WHIT">  
<span class='linenumber'> 669</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">phase</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.AT_TARGET</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// retrieve both phase listeners</span><span class="WHIT">
<span class='linenumber'> 670</span> </span><span class="WHIT">        </span><span class="NAME">listeners</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getListeners</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 671</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">add</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getListeners</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 672</span> </span><span class="WHIT">        </span><span class="NAME">listeners</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">listeners.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">listeners.concat</span><span class="PUNC">(</span><span class="NAME">add</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 673</span> </span><span class="WHIT">        </span><span class="NAME">add</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 674</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 675</span> </span><span class="WHIT">        </span><span class="NAME">listeners</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getListeners</span><span class="PUNC">(</span><span class="NAME">phase</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.CAPTURING_PHASE</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'> 676</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 677</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">phase</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.BUBBLING_PHASE</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._opts.alwaysDefault</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 678</span> </span><span class="WHIT">        </span><span class="COMM">// antecedentFn is invoked on capture and target phase</span><span class="WHIT">
<span class='linenumber'> 679</span> </span><span class="WHIT">        </span><span class="NAME">this._opts.antecedentFn.apply</span><span class="PUNC">(</span><span class="NAME">this._source</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 680</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 681</span> </span><span class="WHIT">      </span><span class="COMM">// Execute callback functions for all listeners</span><span class="WHIT">
<span class='linenumber'> 682</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">listeners.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 683</span> </span><span class="WHIT">        </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 684</span> </span><span class="WHIT">          </span><span class="NAME">ctxs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">listeners</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">$contexts</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 685</span> </span><span class="WHIT">          </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">j</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ctxlen</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ctxs.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">ctxlen</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 686</span> </span><span class="WHIT">            </span><span class="NAME">listeners</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">$fn.apply</span><span class="PUNC">(</span><span class="NAME">ctxs</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._source</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 687</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 688</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 689</span> </span><span class="WHIT">          </span><span class="COMM">// If graceful errors is set, log error and continue event callback</span><span class="WHIT">
<span class='linenumber'> 690</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._opts.gracefulErrors</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 691</span> </span><span class="WHIT">            </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Error occured during event listener: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">ex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 692</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 693</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex.stack</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// chrome</span><span class="WHIT">
<span class='linenumber'> 694</span> </span><span class="WHIT">              </span><span class="NAME">tau.log</span><span class="PUNC">(</span><span class="NAME">ex.stack</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 695</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 696</span> </span><span class="WHIT">              </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="NAME">ex</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 697</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 698</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 699</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">finally</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 700</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event._stopPropagation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 701</span> </span><span class="WHIT">            </span><span class="NAME">this._opts.stoppedFn.apply</span><span class="PUNC">(</span><span class="NAME">this._source</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 702</span> </span><span class="WHIT">            </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 703</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 704</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 705</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 706</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 707</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 708</span> </span><span class="WHIT">    
<span class='linenumber'> 709</span>     </span><span class="COMM">/**
<span class='linenumber'> 710</span>      * 이벤트에 등록된 Default 실행함수를 호출한다.
<span class='linenumber'> 711</span>      * @param {tau.rt.Event} event 이벤트 객체
<span class='linenumber'> 712</span>      * @param {Object} [payload] 리스너에게 전달될 데이터 객체
<span class='linenumber'> 713</span>      */</span><span class="WHIT">
<span class='linenumber'> 714</span> </span><span class="WHIT">    </span><span class="NAME">notifyDefault</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 715</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">event.getSource</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 716</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">event._preventDefault</span><span class="WHIT"> 
<span class='linenumber'> 717</span>           </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">this._source</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._opts.alwaysDefault</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 718</span> </span><span class="WHIT">        </span><span class="NAME">this._opts.defaultFn.apply</span><span class="PUNC">(</span><span class="NAME">this._source</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 719</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 720</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 721</span> </span><span class="WHIT">    
<span class='linenumber'> 722</span>     </span><span class="COMM">/**
<span class='linenumber'> 723</span>      * 명시된 callbackFn을 이용하여 listener 내장 객체를 찾아
<span class='linenumber'> 724</span>      * 반환한다. 만약 발견된 내장객체가 없으면
<span class='linenumber'> 725</span>      * &lt;code>null&lt;/code>을 반환한다. &lt;p/>
<span class='linenumber'> 726</span>      * 반환된 객체는 다음과 같은 형태를 가진다.&lt;/p>
<span class='linenumber'> 727</span>      * {$fn: xxx, $contexts: []}
<span class='linenumber'> 728</span>      *
<span class='linenumber'> 729</span>      * @param callbackFn 이벤트 리스너 함수
<span class='linenumber'> 730</span>      * @returns listener 내장 객체
<span class='linenumber'> 731</span>      */</span><span class="WHIT">
<span class='linenumber'> 732</span> </span><span class="WHIT">    </span><span class="NAME">intern</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 733</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listeners</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._listeners</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 734</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">listeners.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 735</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">listeners</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">$fn</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 736</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">listeners</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 737</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 738</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 739</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 740</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 741</span> 
<span class='linenumber'> 742</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 743</span>      * 이벤트 리스너 함수를 등록한다.
<span class='linenumber'> 744</span>      * @param {Function} callbackFn 등록한 이벤트 리스너 함수
<span class='linenumber'> 745</span>      * @param {Object} [context] callback function에서 this로
<span class='linenumber'> 746</span>      * 사용할 객체. 명시되지 않으면 생성자의 source로 지정된
<span class='linenumber'> 747</span>      * 객체를 사용한다.
<span class='linenumber'> 748</span>      * @param {Boolean} [capture = false] true이면 capture 단계, 
<span class='linenumber'> 749</span>      * 그렇지 않으면 bubble up 단계를 나타낸다.
<span class='linenumber'> 750</span>      * @returns {Boolean} 이벤트 리스너가 성공적으로 등록되었으면
<span class='linenumber'> 751</span>      * true를 반환한다.
<span class='linenumber'> 752</span>      */</span><span class="WHIT">
<span class='linenumber'> 753</span> </span><span class="WHIT">    </span><span class="NAME">addListener</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">capture</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 754</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 755</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Specified event listener is not a function: '</span><span class="WHIT">
<span class='linenumber'> 756</span> </span><span class="WHIT">            </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 757</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 758</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">context</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">tau.isObject</span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 759</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Specified event context is not an Object type: '</span><span class="WHIT">
<span class='linenumber'> 760</span> </span><span class="WHIT">            </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">context</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 761</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 762</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.intern</span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 763</span> </span><span class="WHIT">      </span><span class="COMM">// 1(Capture), 2(Bubble), 3 (Both)</span><span class="WHIT">
<span class='linenumber'> 764</span> </span><span class="WHIT">      </span><span class="NAME">callbackFn.capture</span><span class="WHIT"> </span><span class="PUNC">|</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">capture</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// BIT-OR operation</span><span class="WHIT">
<span class='linenumber'> 765</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">listener</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 766</span> </span><span class="WHIT">        </span><span class="NAME">listener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="STRN">'$fn'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'$contexts'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 767</span> </span><span class="WHIT">        </span><span class="NAME">this._listeners.push</span><span class="PUNC">(</span><span class="NAME">listener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 768</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 769</span> </span><span class="WHIT"> 
<span class='linenumber'> 770</span>       </span><span class="NAME">context</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">context</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._source</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 771</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">listener.$contexts.indexOf</span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 772</span> </span><span class="WHIT">        </span><span class="NAME">listener.$contexts.push</span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 773</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 774</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 775</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 776</span> 
<span class='linenumber'> 777</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 778</span>      * 등록된 callback리스너중 명시된 리스너를 삭제한다. 
<span class='linenumber'> 779</span>      * &lt;p/>
<span class='linenumber'> 780</span>      * 파라미터를 사용하지 않고 이 메소드를 호출하면 등록된
<span class='linenumber'> 781</span>      * 모든 리스너들을 삭제한다.
<span class='linenumber'> 782</span>      * @param {Function} callbackFn 삭제하고자 하는 callback 리스너
<span class='linenumber'> 783</span>      * @param {Object} [context] callback리스너와 연관된
<span class='linenumber'> 784</span>      * context 객체
<span class='linenumber'> 785</span>      * @returns {Boolean} 성공적으로 삭제되었으면 true를
<span class='linenumber'> 786</span>      * 반환한다.
<span class='linenumber'> 787</span>      */</span><span class="WHIT">
<span class='linenumber'> 788</span> </span><span class="WHIT">    </span><span class="NAME">removeListener</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 789</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 790</span> </span><span class="WHIT">        </span><span class="COMM">// Single listener remove</span><span class="WHIT">
<span class='linenumber'> 791</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.intern</span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 792</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">listener</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 793</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">listener.$contexts.indexOf</span><span class="PUNC">(</span><span class="NAME">context</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._source</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 794</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">c</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 795</span> </span><span class="WHIT">            </span><span class="NAME">listener.$contexts.splice</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// remove</span><span class="WHIT">
<span class='linenumber'> 796</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 797</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">listener.$contexts.length</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 798</span> </span><span class="WHIT">            </span><span class="NAME">listener.$fn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 799</span> </span><span class="WHIT">            </span><span class="NAME">this._listeners.splice</span><span class="PUNC">(</span><span class="NAME">this._listeners.indexOf</span><span class="PUNC">(</span><span class="NAME">listener</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 800</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 801</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 802</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 803</span> </span><span class="WHIT">        </span><span class="COMM">// Remove all listeners & contexts</span><span class="WHIT">
<span class='linenumber'> 804</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._listeners.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 805</span> </span><span class="WHIT">          </span><span class="NAME">this._listeners.splice</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// delete all elements</span><span class="WHIT">
<span class='linenumber'> 806</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 807</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 808</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 809</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 810</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 811</span> 
<span class='linenumber'> 812</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.EventDelegator.prototype */</span><span class="WHIT">
<span class='linenumber'> 813</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.EventDelegator'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 814</span> </span><span class="WHIT">    </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 815</span> </span><span class="WHIT">      </span><span class="NAME">DOM_CLASS_ID</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'tau'</span><span class="WHIT"> </span><span class="COMM">// Defines a EventDelegator for a DOM node</span><span class="WHIT">
<span class='linenumber'> 816</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 817</span> 
<span class='linenumber'> 818</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 819</span>      * 새로운 EventDelegator객체를 생성한다.
<span class='linenumber'> 820</span>      * @example
<span class='linenumber'> 821</span>      * $class('tau.example.MyClass').extend(tau.rt.EventDelegator).define({
<span class='linenumber'> 822</span>      *   MyClass: function () {
<span class='linenumber'> 823</span>      *     this.publishEvent("interestingMoment", {
<span class='linenumber'> 824</span>      *       antecedentFn: function () {
<span class='linenumber'> 825</span>      *         this.messageIntro = 'This is an interesting message: ';
<span class='linenumber'> 826</span>      *       },
<span class='linenumber'> 827</span>      *       defaultFn: function () {
<span class='linenumber'> 828</span>      *         alert('Some default message.');
<span class='linenumber'> 829</span>      *       }
<span class='linenumber'> 830</span>      *     });
<span class='linenumber'> 831</span>      *   },
<span class='linenumber'> 832</span>      *   ...
<span class='linenumber'> 833</span>      * });
<span class='linenumber'> 834</span>      *
<span class='linenumber'> 835</span>      * @example
<span class='linenumber'> 836</span>      * var myClass = new tau.example.MyClass();
<span class='linenumber'> 837</span>      *
<span class='linenumber'> 838</span>      * myClass.onEvent("interestingMoment", function (event, payload) {
<span class='linenumber'> 839</span>      *   // Prints 'This is an interesting message: e = mc^2'
<span class='linenumber'> 840</span>      *   alert(this.messageIntro + payload);
<span class='linenumber'> 841</span>      * });
<span class='linenumber'> 842</span>      *
<span class='linenumber'> 843</span>      * myClass.fireEvent("interestingMoment", "e = mc^2");
<span class='linenumber'> 844</span>      *
<span class='linenumber'> 845</span>      * @class
<span class='linenumber'> 846</span>      * EventDelegator는 이벤트를 전송하고 받기위해 필요한 허브역할을
<span class='linenumber'> 847</span>      * 수행한다. 뿐만 아니라 상위 EventDelegator와
<span class='linenumber'> 848</span>      * Bubbling관계를 형성한다.
<span class='linenumber'> 849</span>      * &lt;p/>
<span class='linenumber'> 850</span>      * 이 클래스는 다른 Mobello 클래스 정의시 상속받을 수
<span class='linenumber'> 851</span>      * 있으며 이를 통해 이벤트를 publish하고, fire할 수 있으며
<span class='linenumber'> 852</span>      * 또한 등록된 이벤트에 대해 listening을 수행할 수 있다.
<span class='linenumber'> 853</span>      * @constructs
<span class='linenumber'> 854</span>      */</span><span class="WHIT">
<span class='linenumber'> 855</span> </span><span class="WHIT">    </span><span class="NAME">EventDelegator</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//$ tau.rt.EventDelegator</span><span class="WHIT">
<span class='linenumber'> 856</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Maps event name to tau.rt.EventPublisher */</span><span class="WHIT">
<span class='linenumber'> 857</span> </span><span class="WHIT">      </span><span class="NAME">this.$publishedEvents</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 858</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Array that manages EventDelegators to bubble up */</span><span class="WHIT">
<span class='linenumber'> 859</span> </span><span class="WHIT">      </span><span class="NAME">this.$bubbleTargets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 860</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 861</span> 
<span class='linenumber'> 862</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 863</span>      * 명시된 이벤트 이름과 매핑되는 {@link tau.rt.EventPublisher}를
<span class='linenumber'> 864</span>      * 찾아 반환한다. 만약 기존에 존재하지 않고 create가 true이면
<span class='linenumber'> 865</span>      * 새로운 {@link tau.rt.EventPublisher}를 생성하여 반환한다.
<span class='linenumber'> 866</span>      * &lt;p/>
<span class='linenumber'> 867</span>      * @param {String} name 이벤트 명
<span class='linenumber'> 868</span>      * @param {Boolean} [create] 기존에 존재하지 않는 상태에서 true이면
<span class='linenumber'> 869</span>      * 새로운 EventPublisher를 생성하여 반환한다.
<span class='linenumber'> 870</span>      * @returns {tau.rt.EventPublisher} 이벤트 이름과 매핑되는 
<span class='linenumber'> 871</span>      * {@link tau.rt.EventPublisher} 객체
<span class='linenumber'> 872</span>      */</span><span class="WHIT">
<span class='linenumber'> 873</span> </span><span class="WHIT">    </span><span class="NAME">getEventPublisher</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">create</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 874</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$publishedEvents</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 875</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">create</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 876</span> </span><span class="WHIT">        </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.EventPublisher</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 877</span> </span><span class="WHIT">        </span><span class="NAME">this.$publishedEvents</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 878</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 879</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 880</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 881</span> 
<span class='linenumber'> 882</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 883</span>      * 명시된 이벤트 이름과 옵션을 이용하여 이벤트를
<span class='linenumber'> 884</span>      * 공시(publish)한다. 먄약 eventName이 명시되지 않으면
<span class='linenumber'> 885</span>      * null을 반환한다.
<span class='linenumber'> 886</span>      * @param {String} eventName 이벤트 명
<span class='linenumber'> 887</span>      * @param {Object} [opts] 이벤트 옵션
<span class='linenumber'> 888</span>      * @param {Function} [opts.defaultFn] event
<span class='linenumber'> 889</span>      * propagation상에서 제일 마지막에 호출될 핸들러
<span class='linenumber'> 890</span>      * @param {Function} [opts.stoppedFn] event
<span class='linenumber'> 891</span>      * propagation과정이 인위적인 방법으로 중단되었을 경우
<span class='linenumber'> 892</span>      * 호출될 핸들러
<span class='linenumber'> 893</span>      * @returns {tau.rt.EventPublisher} Publish된 객체
<span class='linenumber'> 894</span>      * @see tau.rt.EventPublisher
<span class='linenumber'> 895</span>      * @see tau.rt.EventDelegator.unsubscribeEvent
<span class='linenumber'> 896</span>      */</span><span class="WHIT">
<span class='linenumber'> 897</span> </span><span class="WHIT">    </span><span class="NAME">publishEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 898</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 899</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getEventPublisher</span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 900</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 901</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.init</span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 902</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 903</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 904</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 905</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 906</span> 
<span class='linenumber'> 907</span> 
<span class='linenumber'> 908</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 909</span>      * 명시된 이벤트 이름 또는 이벤트 객체를 이용하여 이벤트를
<span class='linenumber'> 910</span>      * 발생시킨다.
<span class='linenumber'> 911</span>      * &lt;p/>
<span class='linenumber'> 912</span>      * 이벤트가 발생되면 capture단계와 bubbling-up단계를
<span class='linenumber'> 913</span>      * 거치면서 등록된 리스너들을 실행시킨다.
<span class='linenumber'> 914</span>      * &lt;p/>
<span class='linenumber'> 915</span>      * 파라미터 중 delay가 0이상의 값을 가질 경우
<span class='linenumber'> 916</span>      * Async방식으로 등록된 이벤트 리스너가 호출되지만 -1일
<span class='linenumber'> 917</span>      * 경우 Sync 방식으로 이벤트 리스너가 실행되어 시간지체가
<span class='linenumber'> 918</span>      * 발생되지 않는다.
<span class='linenumber'> 919</span>      * @param {String|tau.rt.Event} e 이벤트명 또는 이벤트 객체
<span class='linenumber'> 920</span>      * @param {Object} payload 이벤트 발생시 같이 전송될 데이터 객체
<span class='linenumber'> 921</span>      * @param {Number} delay 실제 이벤트가 발생될 때까지의 시간(milliseconds)
<span class='linenumber'> 922</span>      * @returns {Boolean} 정상적으로 이벤트가 발생되면 true를 반환
<span class='linenumber'> 923</span>      * @exception {TypeError} 이벤트의 source객체가 현재 인스턴스와 다를 경우
<span class='linenumber'> 924</span>      * @see tau.rt.EventDelegator.onEvent
<span class='linenumber'> 925</span>      */</span><span class="WHIT">
<span class='linenumber'> 926</span> </span><span class="WHIT">    </span><span class="NAME">fireEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">delay</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 927</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">that</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 928</span> </span><span class="WHIT">          </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 929</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 930</span> </span><span class="WHIT">        </span><span class="NAME">args</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">that</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 931</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 932</span> </span><span class="WHIT">      
<span class='linenumber'> 933</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e._stopPropagation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 934</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 935</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 936</span> </span><span class="WHIT">      </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">fire</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 937</span> </span><span class="WHIT">        </span><span class="NAME">that._capture</span><span class="PUNC">(</span><span class="NAME">args</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 938</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">args</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">_stopPropagation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 939</span> </span><span class="WHIT">          </span><span class="NAME">args</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">eventPhase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.AT_TARGET</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// 2; target phase</span><span class="WHIT">
<span class='linenumber'> 940</span> </span><span class="WHIT">          </span><span class="NAME">that.propagateEvent.apply</span><span class="PUNC">(</span><span class="NAME">that</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 941</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 942</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 943</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">delay</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">delay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 944</span> </span><span class="WHIT">      </span><span class="PUNC">(</span><span class="NAME">delay</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="NAME">fire</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">delay</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">fire</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 945</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 946</span> </span><span class="WHIT">    
<span class='linenumber'> 947</span>     </span><span class="COMM">/**
<span class='linenumber'> 948</span>      * process capturing phase for the specified event.
<span class='linenumber'> 949</span>      * @param {tau.rt.Event} e Event Object to handle capturing phase
<span class='linenumber'> 950</span>      * @private
<span class='linenumber'> 951</span>      */</span><span class="WHIT">
<span class='linenumber'> 952</span> </span><span class="WHIT">    </span><span class="NAME">_capture</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 953</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">publisher</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.lookupBubbles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 954</span> </span><span class="WHIT">      </span><span class="NAME">e.eventPhase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.CAPTURING_PHASE</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 955</span> </span><span class="WHIT">      
<span class='linenumber'> 956</span>       </span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">path.length</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">e._stopPropagation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 957</span> </span><span class="WHIT">        </span><span class="NAME">publisher</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">path.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getEventPublisher</span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 958</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">publisher</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 959</span> </span><span class="WHIT">          </span><span class="NAME">publisher.notifyListeners</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 960</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 961</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 962</span> </span><span class="WHIT">      </span><span class="NAME">path.splice</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 963</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 964</span> 
<span class='linenumber'> 965</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'> 966</span>      * 발생된 이벤트를 다음 EventDelegator로
<span class='linenumber'> 967</span>      * propatation시킨다.(bubble-up)
<span class='linenumber'> 968</span>      * &lt;p/>
<span class='linenumber'> 969</span>      * 이벤트는 등록된 콜백 리스너들을 실행히키고 계속해서
<span class='linenumber'> 970</span>      * Bubble-up 과정을 진행해 나간다.
<span class='linenumber'> 971</span>      * @param {Object} Event 객체
<span class='linenumber'> 972</span>      * @param {Object} [payload] 이벤트 발생시 전될되는 데이터 객체
<span class='linenumber'> 973</span>      * @returns {Boolean} 정상적으로 이벤트가 처리되었을 경우 true를 반환
<span class='linenumber'> 974</span>      * @see tau.rt.EventDelegator.fireEvent
<span class='linenumber'> 975</span>      */</span><span class="WHIT">
<span class='linenumber'> 976</span> </span><span class="WHIT">    </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 977</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">event</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 978</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 979</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 980</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bubble</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'> 981</span>           </span><span class="NAME">fired</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 982</span> </span><span class="WHIT">          </span><span class="NAME">publisher</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getEventPublisher</span><span class="PUNC">(</span><span class="NAME">event.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 983</span> 
<span class='linenumber'> 984</span> </span><span class="WHIT">      </span><span class="COMM">// Fire the antecedent function first, then rest of the event listeners</span><span class="WHIT">
<span class='linenumber'> 985</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">publisher</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 986</span> </span><span class="WHIT">        </span><span class="NAME">fired</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">publisher.notifyListeners.apply</span><span class="PUNC">(</span><span class="NAME">publisher</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 987</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 988</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event.eventPhase</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.BUBBLING_PHASE</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 989</span> </span><span class="WHIT">        </span><span class="NAME">event.eventPhase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.BUBBLING_PHASE</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 990</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 991</span> </span><span class="WHIT">      </span><span class="COMM">// Continue bubbling up if it wasn't stopped or local event wasn't fired</span><span class="WHIT">
<span class='linenumber'> 992</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">event._stopPropagation</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">fired</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">event._alwaysBubble</span><span class="WHIT"> 
<span class='linenumber'> 993</span>           </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">publisher</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">publisher._opts.alwaysBubble</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 994</span> </span><span class="WHIT">        </span><span class="NAME">bubble</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getBubble</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 995</span> </span><span class="WHIT">        </span><span class="NAME">fired</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">bubble</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">bubble.propagateEvent.apply</span><span class="PUNC">(</span><span class="NAME">bubble</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 996</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 997</span> </span><span class="WHIT">      </span><span class="COMM">// Call final default function if it wasn't prevented</span><span class="WHIT">
<span class='linenumber'> 998</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">publisher</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 999</span> </span><span class="WHIT">        </span><span class="NAME">publisher.notifyDefault.apply</span><span class="PUNC">(</span><span class="NAME">publisher</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1000</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1001</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">fired</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1002</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1003</span> 
<span class='linenumber'>1004</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1005</span>      * 이벤트가 발생되었을 때 처리할 callback 핸들러를 등록한다.
<span class='linenumber'>1006</span>      * &lt;p/>
<span class='linenumber'>1007</span>      * callback 핸들러는 향후 {@link tau.rt.EventDelegator#fireEvent}
<span class='linenumber'>1008</span>      * 메소드가 호출되었을 때 실행된다.
<span class='linenumber'>1009</span>      * @param {String} eventName 이벤트 명
<span class='linenumber'>1010</span>      * @param {Function} callbackFn 이벤트가 발생되었을 때 수행될 callback 핸들러
<span class='linenumber'>1011</span>      * @param {Object} context callback핸들러 내에서 사용할 'this' 객체.
<span class='linenumber'>1012</span>      * 명시되지 않으면 생성자의 source로 지정된 객체를 사용한다.
<span class='linenumber'>1013</span>      * @param {Boolean} [capture = false] 이벤트 단계를 지정한다. 
<span class='linenumber'>1014</span>      * true이면 capture단계이며 그렇지 않을 경우 bubble-up단계가 된다.
<span class='linenumber'>1015</span>      * @returns {Boolean} 정상적으로 등록되었으면 true를 반환
<span class='linenumber'>1016</span>      * @see tau.rt.EventDelegator.fireEvent
<span class='linenumber'>1017</span>      */</span><span class="WHIT">
<span class='linenumber'>1018</span> </span><span class="WHIT">    </span><span class="NAME">onEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">capture</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1019</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getEventPublisher</span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1020</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1021</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.addListener</span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">capture</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1022</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1023</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1024</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1025</span> </span><span class="WHIT">  
<span class='linenumber'>1026</span>     </span><span class="COMM">/**
<span class='linenumber'>1027</span>      * 등록된 이벤트의 리스닝을 해제한다.
<span class='linenumber'>1028</span>      * &lt;p/>
<span class='linenumber'>1029</span>      * callbackFn을 기술할 경우 해당 리스너가 사전에 등록되어 있다면
<span class='linenumber'>1030</span>      * 명시된 리스너만 해제시킨다.
<span class='linenumber'>1031</span>      * &lt;p/>
<span class='linenumber'>1032</span>      * 만약 callbackFn이 기술되지 않았거나 null이면 등록된
<span class='linenumber'>1033</span>      * 모든 이벤트와 리스너들을 제거한다.
<span class='linenumber'>1034</span>      * @param {String} eventName 이벤트 명
<span class='linenumber'>1035</span>      * @param {Function} callbackFn 제거할 이벤트 리스너
<span class='linenumber'>1036</span>      * @param {Object} context 이벤트 리스너에사 사용할 'this' 객체
<span class='linenumber'>1037</span>      * @returns {Boolean} 정상적으로 이벤트가 해제되었다면 true를 반환
<span class='linenumber'>1038</span>      * @see tau.rt.EventDelegator.onEvent
<span class='linenumber'>1039</span>      * @see tau.rt.EventDelegator.publishEvent
<span class='linenumber'>1040</span>      */</span><span class="WHIT">
<span class='linenumber'>1041</span> </span><span class="WHIT">    </span><span class="NAME">unsubscribeEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1042</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getEventPublisher</span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1043</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1044</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1045</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.removeListener</span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Just remove the callback</span><span class="WHIT">
<span class='linenumber'>1046</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// removes all the listeners</span><span class="WHIT">
<span class='linenumber'>1047</span> </span><span class="WHIT">          </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this.$publishedEvents</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1048</span> </span><span class="WHIT">            </span><span class="NAME">this.$publishedEvents</span><span class="PUNC">[</span><span class="NAME">eventName</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">removeListener</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1049</span> </span><span class="WHIT">            </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.$publishedEvents</span><span class="PUNC">[</span><span class="NAME">eventName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1050</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1051</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1052</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1053</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> 
<span class='linenumber'>1054</span>       </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1055</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1056</span> </span><span class="WHIT">    
<span class='linenumber'>1057</span>     </span><span class="COMM">/**
<span class='linenumber'>1058</span>      * 객체들의 구조상에서 bubble-up을 거치게 될 모든 target객체들을 
<span class='linenumber'>1059</span>      * 찾아 반환하며 이때 이 메소드를 호출하는 객체 자신은
<span class='linenumber'>1060</span>      * 배제된다. 만약 bubble-up 을 거칠 target객체가 존재하지
<span class='linenumber'>1061</span>      * 않을 겨우 공백의 배열 객체를 반환한다.
<span class='linenumber'>1062</span>      * @return {Array} 현재 자신을 제외한 모든 bubble-up target 객체들을
<span class='linenumber'>1063</span>      * 저장하고 있는 배열
<span class='linenumber'>1064</span>      */</span><span class="WHIT">
<span class='linenumber'>1065</span> </span><span class="WHIT">    </span><span class="NAME">lookupBubbles</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1066</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">results</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1067</span> </span><span class="WHIT">          </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getBubble</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1068</span> </span><span class="WHIT">      </span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">target</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1069</span> </span><span class="WHIT">        </span><span class="NAME">results.push</span><span class="PUNC">(</span><span class="NAME">target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1070</span> </span><span class="WHIT">        </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">target.getBubble</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1071</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1072</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">results</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1073</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1074</span> </span><span class="WHIT">    
<span class='linenumber'>1075</span>     </span><span class="COMM">/**
<span class='linenumber'>1076</span>      * 현재 인스턴스의 bubble-target 객체를 반환한다. 만약
<span class='linenumber'>1077</span>      * bubble-target 객체가 존재하지 않으면 null을 반환한다.
<span class='linenumber'>1078</span>      * @return {tar.rt.EventDelegator} bubble-target 객체,
<span class='linenumber'>1079</span>      * 없으면 null을 반환
<span class='linenumber'>1080</span>      */</span><span class="WHIT">
<span class='linenumber'>1081</span> </span><span class="WHIT">    </span><span class="NAME">getBubble</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1082</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$bubbleTargets.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.$bubbleTargets</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1083</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1084</span> 
<span class='linenumber'>1085</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1086</span>      * 이벤트가 발생될 경우 bubble-up시킬 target 객체를
<span class='linenumber'>1087</span>      * 설정한다. target 객체로 설정되는 클래스는 
<span class='linenumber'>1088</span>      * {@link tau.rt.EventDelegator}를 상속받아 구현되어야 한다.
<span class='linenumber'>1089</span>      * @param {tau.rt.EventDelegator} eventDelegator Event Delegator 객체
<span class='linenumber'>1090</span>      * @returns {Boolean} 정상적으로 설정되었다면 true를 반환한다.
<span class='linenumber'>1091</span>      * @see tau.rt.EventDelegator.removeBubble
<span class='linenumber'>1092</span>      */</span><span class="WHIT">
<span class='linenumber'>1093</span> </span><span class="WHIT">    </span><span class="NAME">setBubble</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventDelegator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1094</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventDelegator</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.rt.EventDelegator</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> 
<span class='linenumber'>1095</span>           </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">eventDelegator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1096</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this.$bubbleTargets</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">pushUnique</span><span class="PUNC">(</span><span class="NAME">eventDelegator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1097</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1098</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1099</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1100</span> 
<span class='linenumber'>1101</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1102</span>      * 명시된 bubble-target객체를 제거한다. 이때
<span class='linenumber'>1103</span>      * bubble-target객체는 {@link tau.rt.EventDelegator}를
<span class='linenumber'>1104</span>      * 상속받아야 한다.
<span class='linenumber'>1105</span>      * @param {tau.rt.EventDelegator} eventDelegator Event Delegator 객체
<span class='linenumber'>1106</span>      * @returns {Boolean} 정상적으로 제거되었다면 true를 반환한다.
<span class='linenumber'>1107</span>      * @see tau.rt.EventDelegator.setBubble
<span class='linenumber'>1108</span>      */</span><span class="WHIT">
<span class='linenumber'>1109</span> </span><span class="WHIT">    </span><span class="NAME">removeBubble</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventDelegator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1110</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventDelegator</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.rt.EventDelegator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1111</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this.$bubbleTargets</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="NAME">eventDelegator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1112</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">eventDelegator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1113</span> </span><span class="WHIT">        </span><span class="NAME">this.$bubbleTargets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1114</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1115</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1116</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1117</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1118</span> 
<span class='linenumber'>1119</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.Gesture.prototype */</span><span class="WHIT">
<span class='linenumber'>1120</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Gesture'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1121</span> </span><span class="WHIT">    </span><span class="COMM">// Gesture states</span><span class="WHIT">
<span class='linenumber'>1122</span> </span><span class="WHIT">    </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.rt.Gesture */</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1123</span> </span><span class="WHIT">      </span><span class="COMM">/** @type Integer */</span><span class="WHIT">
<span class='linenumber'>1124</span> </span><span class="WHIT">      </span><span class="NAME">STATE_STATIC</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1125</span> </span><span class="WHIT">      </span><span class="COMM">/** @type Integer */</span><span class="WHIT">
<span class='linenumber'>1126</span> </span><span class="WHIT">      </span><span class="NAME">STATE_START</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1127</span> </span><span class="WHIT">      </span><span class="COMM">/** @type Integer */</span><span class="WHIT">
<span class='linenumber'>1128</span> </span><span class="WHIT">      </span><span class="NAME">STATE_CHANGE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1129</span> </span><span class="WHIT">      </span><span class="COMM">/** @type Integer */</span><span class="WHIT">
<span class='linenumber'>1130</span> </span><span class="WHIT">      </span><span class="NAME">STATE_END</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="WHIT">
<span class='linenumber'>1131</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1132</span> 
<span class='linenumber'>1133</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1134</span>      * 새로운 Gesture 객체를 생성한다.
<span class='linenumber'>1135</span>      * @class
<span class='linenumber'>1136</span>      * Gesture 에 관한 기능들을 정의한 클래스
<span class='linenumber'>1137</span>      * @constructs
<span class='linenumber'>1138</span>      * @ignore
<span class='linenumber'>1139</span>      */</span><span class="WHIT">
<span class='linenumber'>1140</span> </span><span class="WHIT">    </span><span class="NAME">Gesture</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1141</span> </span><span class="WHIT">      </span><span class="NAME">this.eventMgr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$eventMgr</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1142</span> </span><span class="WHIT">      </span><span class="NAME">this.state</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.rt.Gesture.STATE_STATIC</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1143</span> </span><span class="WHIT">      </span><span class="NAME">this.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'gesture'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1144</span> </span><span class="WHIT">      </span><span class="NAME">this.tsStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1145</span> </span><span class="WHIT">      </span><span class="NAME">this.tsCurrent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1146</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1147</span> </span><span class="WHIT">    </span><span class="NAME">start</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1148</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1149</span> </span><span class="WHIT">    </span><span class="NAME">change</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1150</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1151</span> </span><span class="WHIT">    </span><span class="NAME">end</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1152</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1153</span> </span><span class="WHIT">    </span><span class="NAME">cancel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1154</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1155</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1156</span> 
<span class='linenumber'>1157</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.PinchGesture.prototype */</span><span class="WHIT">
<span class='linenumber'>1158</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.PinchGesture'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.Gesture</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1159</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1160</span>      * @class PinchGesture class description goes here
<span class='linenumber'>1161</span>      * @constructs
<span class='linenumber'>1162</span>      * @extends tau.rt.Gesture
<span class='linenumber'>1163</span>      * @ignore
<span class='linenumber'>1164</span>      */</span><span class="WHIT">
<span class='linenumber'>1165</span> </span><span class="WHIT">    </span><span class="NAME">PinchGesture</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1166</span> </span><span class="WHIT">      </span><span class="NAME">this.scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1167</span> </span><span class="WHIT">      </span><span class="NAME">this.velocity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1168</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1169</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1170</span> 
<span class='linenumber'>1171</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.PanGesture.prototype */</span><span class="WHIT">
<span class='linenumber'>1172</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.PanGesture'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.Gesture</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1173</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1174</span>      * @class PanGesture class description goes here
<span class='linenumber'>1175</span>      * @constructs
<span class='linenumber'>1176</span>      * @extends tau.rt.Gesture
<span class='linenumber'>1177</span>      * @ignore
<span class='linenumber'>1178</span>      */</span><span class="WHIT">
<span class='linenumber'>1179</span> </span><span class="WHIT">    </span><span class="NAME">PanGesture</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">maxTouches</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">minTouches</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1180</span> </span><span class="WHIT">      </span><span class="NAME">this.maxTouches</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">maxTouches</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1181</span> </span><span class="WHIT">      </span><span class="NAME">this.minTouches</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">minTouches</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1182</span> </span><span class="WHIT">      </span><span class="NAME">this.translation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0.0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1183</span> </span><span class="WHIT">      </span><span class="NAME">this.velocity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1184</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1185</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1186</span> </span><span class="WHIT">  
<span class='linenumber'>1187</span>   </span><span class="COMM">/** @lends tau.rt.RotationGesture.prototype */</span><span class="WHIT">
<span class='linenumber'>1188</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.RotationGesture'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.Gesture</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1189</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1190</span>      * @class RotationGesture class description goes here
<span class='linenumber'>1191</span>      * @constructs
<span class='linenumber'>1192</span>      * @extends tau.rt.Gesture
<span class='linenumber'>1193</span>      * @ignore
<span class='linenumber'>1194</span>      */</span><span class="WHIT">
<span class='linenumber'>1195</span> </span><span class="WHIT">    </span><span class="NAME">RotationGesture</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1196</span> </span><span class="WHIT">      </span><span class="NAME">this.rotation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1197</span> </span><span class="WHIT">      </span><span class="NAME">this.velocity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1198</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1199</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1200</span> </span><span class="WHIT">  
<span class='linenumber'>1201</span>   </span><span class="COMM">/** @lends tau.rt.LongPressGesture.prototype */</span><span class="WHIT">
<span class='linenumber'>1202</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.LongPressGesture'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.Gesture</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1203</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1204</span>      * @class RotationGesture class description goes here
<span class='linenumber'>1205</span>      * @constructs
<span class='linenumber'>1206</span>      * @ignore
<span class='linenumber'>1207</span>      */</span><span class="WHIT">
<span class='linenumber'>1208</span> </span><span class="WHIT">    </span><span class="NAME">LongPressGesture</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">duration</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">numTouches</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">moveTreshold</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1209</span> </span><span class="WHIT">      </span><span class="NAME">this.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'longpress'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1210</span> </span><span class="WHIT">      </span><span class="NAME">this.duration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">duration</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1211</span> </span><span class="WHIT">      </span><span class="NAME">this.numTouches</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">numTouches</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1212</span> </span><span class="WHIT">      </span><span class="NAME">this.moveThreshold</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">moveTreshold</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1213</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1214</span> 
<span class='linenumber'>1215</span> </span><span class="WHIT">    </span><span class="NAME">start</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">track</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1216</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1217</span> </span><span class="WHIT">          </span><span class="NAME">gesturesArr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this.eventMgr._gestures</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1218</span> </span><span class="WHIT">      </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="STRN">' Longpress Gesture Start: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.tsCurrent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1219</span> </span><span class="WHIT">      </span><span class="NAME">gesturesArr.pushUnique</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1220</span> </span><span class="WHIT">      </span><span class="NAME">this.timeoutId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1221</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event._source</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1222</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="STRN">'longpress is due, firing event!'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1223</span> </span><span class="WHIT">          </span><span class="NAME">event._source.propagateEvent</span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1224</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1225</span> </span><span class="WHIT">        </span><span class="NAME">gesturesArr.remove</span><span class="PUNC">(</span><span class="NAME">me</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1226</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.duration</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1227</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1228</span> 
<span class='linenumber'>1229</span> </span><span class="WHIT">    </span><span class="NAME">change</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">track</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1230</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deltaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">touch.pageX</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">track.pageX</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1231</span>           </span><span class="NAME">deltaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">touch.pageY</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">track.pageY</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1232</span> </span><span class="WHIT">          </span><span class="NAME">absDeltaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">deltaX</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1233</span> </span><span class="WHIT">          </span><span class="NAME">absDeltaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">deltaY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1234</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">absDeltaX</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">this.moveThreshold</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">absDeltaY</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">this.moveThreshold</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1235</span> </span><span class="WHIT">        </span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this.timeoutId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1236</span> </span><span class="WHIT">        </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this.eventMgr._gestures</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1237</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="STRN">'MOVED touch, canceled'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1238</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1239</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1240</span> 
<span class='linenumber'>1241</span> </span><span class="WHIT">    </span><span class="NAME">end</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">track</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1242</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this.eventMgr._gestures</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1243</span> </span><span class="WHIT">        </span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this.timeoutId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1244</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="STRN">'clickedup, ending Longpress callback'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1245</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1246</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1247</span> 
<span class='linenumber'>1248</span> </span><span class="WHIT">    </span><span class="NAME">cancel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">track</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1249</span> </span><span class="WHIT">      
<span class='linenumber'>1250</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1251</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1252</span> 
<span class='linenumber'>1253</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.EventManager.prototype */</span><span class="WHIT">
<span class='linenumber'>1254</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.EventManager'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1255</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1256</span>      * 명시된 파라미터를 이용하여 새로운 객체를 생성한다.
<span class='linenumber'>1257</span>      * EventManager객체는 {@link tau.rt.Runtime}에서
<span class='linenumber'>1258</span>      * Signleton으로 생성, 관리된다.
<span class='linenumber'>1259</span>      * @class
<span class='linenumber'>1260</span>      * Mobello의 이벤트 처리 시스템을 위한 기능들을 정의한다.
<span class='linenumber'>1261</span>      * @constructs
<span class='linenumber'>1262</span>      * @param {Object} opt Event Manager 생성 옵션
<span class='linenumber'>1263</span>      * @param {Boolean} [opt.enabled = true] false이면 Mobello의 이벤트 시스템이
<span class='linenumber'>1264</span>      * 동작하지 않음
<span class='linenumber'>1265</span>      * @param {Number} [touchMoveThreshold = 5] Touch Move이벤트가 발생할
<span class='linenumber'>1266</span>      * 때 까지의 최소시간
<span class='linenumber'>1267</span>      * @param {Object} root 이벤트를 리스닝하기 위한 Root DOM 앨리먼트
<span class='linenumber'>1268</span>      */</span><span class="WHIT">
<span class='linenumber'>1269</span> </span><span class="WHIT">    </span><span class="NAME">EventManager</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">root</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//$ tau.rt.EventManager</span><span class="WHIT">
<span class='linenumber'>1270</span> 
<span class='linenumber'>1271</span> </span><span class="WHIT">      </span><span class="NAME">this._opts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1272</span> </span><span class="WHIT">        </span><span class="NAME">enabled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1273</span> </span><span class="WHIT">        </span><span class="NAME">touchMoveThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// 5px is ideal</span><span class="WHIT">
<span class='linenumber'>1274</span> </span><span class="WHIT">        </span><span class="NAME">touchEndThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">25</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1275</span> </span><span class="WHIT">        </span><span class="NAME">tapThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">8</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1276</span> </span><span class="WHIT">        </span><span class="NAME">tapHoldInterval</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">250</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1277</span> </span><span class="WHIT">        </span><span class="NAME">tapDoubleThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">800</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1278</span> </span><span class="WHIT">        </span><span class="NAME">swipeThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">35</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1279</span> </span><span class="WHIT">        </span><span class="NAME">swipeTime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1280</span> </span><span class="WHIT">        </span><span class="NAME">scrollThreshold</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1281</span> </span><span class="WHIT">        </span><span class="NAME">scrollResetTime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">300</span><span class="WHIT">
<span class='linenumber'>1282</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1283</span> 
<span class='linenumber'>1284</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Track history map by track ID */</span><span class="WHIT">
<span class='linenumber'>1285</span> </span><span class="WHIT">      </span><span class="NAME">this._history</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1286</span> </span><span class="WHIT">      </span><span class="NAME">this._gestures</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1287</span> </span><span class="WHIT">      </span><span class="NAME">this._timeStamp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1288</span> </span><span class="WHIT">      
<span class='linenumber'>1289</span>       </span><span class="COMM">/* this is used for preventing mouse move event on PC. There is no
<span class='linenumber'>1290</span>        * need to process mouse move event without mouse button clicking */</span><span class="WHIT">
<span class='linenumber'>1291</span> </span><span class="WHIT">      </span><span class="NAME">this._mousedown</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1292</span> 
<span class='linenumber'>1293</span> </span><span class="WHIT">      </span><span class="COMM">// Registration for DOM listeners used by the Mobello Framework</span><span class="WHIT">
<span class='linenumber'>1294</span> </span><span class="WHIT">      </span><span class="COMM">// By default, document is used because it allows events to be handled</span><span class="WHIT">
<span class='linenumber'>1295</span> </span><span class="WHIT">      </span><span class="COMM">// when the mouse is moved outside the browser.</span><span class="WHIT">
<span class='linenumber'>1296</span> </span><span class="WHIT">      </span><span class="NAME">this._root</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">root</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">document</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//document.getElementById('tau');</span><span class="WHIT">
<span class='linenumber'>1297</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">events</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.hasTouch</span><span class="PUNC">)</span><span class="WHIT"> 
<span class='linenumber'>1298</span>           </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">'click,touchstart,touchmove,touchend,touchcancel,orientationchange'</span><span class="WHIT">
<span class='linenumber'>1299</span> </span><span class="WHIT">          </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'click,mousedown,mousemove,mouseup'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1300</span> </span><span class="WHIT">      </span><span class="NAME">this._listenEvents</span><span class="PUNC">(</span><span class="NAME">this._root</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">events.split</span><span class="PUNC">(</span><span class="STRN">','</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1301</span> 
<span class='linenumber'>1302</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.rt.hasOrientationChange</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">tau.rt.isAndroid</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// 'resize' event is special case on PC, Android</span><span class="WHIT">
<span class='linenumber'>1303</span> </span><span class="WHIT">        </span><span class="NAME">this._listenEvents</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'resize'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1304</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1305</span> </span><span class="WHIT">      
<span class='linenumber'>1306</span>       </span><span class="NAME">events</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'keyup,keydown,keypress,blur,'</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TRANSITIONEND</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1307</span> </span><span class="WHIT">      </span><span class="NAME">this._listenEvents</span><span class="PUNC">(</span><span class="NAME">this._root</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">events.split</span><span class="PUNC">(</span><span class="STRN">','</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1308</span> 
<span class='linenumber'>1309</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.isAndroid</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this._previousOrientation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1310</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1311</span> </span><span class="WHIT">    
<span class='linenumber'>1312</span>     </span><span class="COMM">/**
<span class='linenumber'>1313</span>      * registers event listeners for the specified event names(array)
<span class='linenumber'>1314</span>      * @param {Object} from Object(window or DOM) from which listeners listen to
<span class='linenumber'>1315</span>      * @param {Array} names event names to listen to
<span class='linenumber'>1316</span>      * @param {Boolean} capture if true, handles event listeners 
<span class='linenumber'>1317</span>      * on capture phase of DOM event propagation process.
<span class='linenumber'>1318</span>      * @private
<span class='linenumber'>1319</span>      */</span><span class="WHIT">
<span class='linenumber'>1320</span> </span><span class="WHIT">    </span><span class="NAME">_listenEvents</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">from</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">names</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">capture</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1321</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.isArray</span><span class="PUNC">(</span><span class="NAME">names</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1322</span> </span><span class="WHIT">        </span><span class="NAME">names</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">names</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1323</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1324</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">names.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1325</span> </span><span class="WHIT">        </span><span class="NAME">from.addEventListener</span><span class="PUNC">(</span><span class="NAME">names</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">capture</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1326</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1327</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1328</span> </span><span class="WHIT">    
<span class='linenumber'>1329</span>     </span><span class="COMM">/**
<span class='linenumber'>1330</span>      * 등록된 이벤트가 발생할 경우 처리작업을 수행한다.&lt;p/>
<span class='linenumber'>1331</span>      * 이 메소드는 DOM객체를 통해 직접 이벤트를 listening하며 생성자에서
<span class='linenumber'>1332</span>      * 등록된 모든 이벤트들을 처리한다.
<span class='linenumber'>1333</span>      * @param {Event} e DOM 이벤트
<span class='linenumber'>1334</span>      */</span><span class="WHIT">
<span class='linenumber'>1335</span> </span><span class="WHIT">    </span><span class="NAME">handleEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1336</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._opts.enabled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1337</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1338</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1339</span> </span><span class="WHIT">      </span><span class="COMM">//e.stopPropagation(); // stop propagating events further on</span><span class="WHIT">
<span class='linenumber'>1340</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.type</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1341</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'mousedown'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1342</span> </span><span class="WHIT">          </span><span class="NAME">this._mousedown</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1343</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'touchstart'</span><span class="PUNC">:</span><span class="WHIT"> 
<span class='linenumber'>1344</span>           </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.handleTouchEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHSTART</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1345</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'mousemove'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1346</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._mousedown</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1347</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'touchmove'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1348</span> </span><span class="WHIT">          </span><span class="NAME">e.preventDefault</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// disable browser default event handler</span><span class="WHIT">
<span class='linenumber'>1349</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">e.timeStamp</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this._timeStamp</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NUMB">33</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//more than 30fps</span><span class="WHIT">
<span class='linenumber'>1350</span> </span><span class="WHIT">            </span><span class="NAME">this._timeStamp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.timeStamp</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1351</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.handleTouchEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHMOVE</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1352</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1353</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1354</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'mouseup'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1355</span> </span><span class="WHIT">          </span><span class="NAME">this._mousedown</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1356</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'touchend'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1357</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.handleTouchEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHEND</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1358</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'touchcancel'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1359</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.handleTouchEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHCANCEL</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1360</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'orientationchange'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1361</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'resize'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1362</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.domOrientationChange</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1363</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">'click'</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1364</span> </span><span class="WHIT">          </span><span class="NAME">e.preventDefault</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// disable default browser behavior</span><span class="WHIT">
<span class='linenumber'>1365</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1366</span> </span><span class="WHIT">        </span><span class="KEYW">default</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1367</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.domGenericEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1368</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1369</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1370</span> 
<span class='linenumber'>1371</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1372</span>      * 이벤트 시스템을 enable/disable시킨다. &lt;p/>
<span class='linenumber'>1373</span>      * 애니메이션 작업이 진행중에 사용자 이벤트를 처리하지 못도하독 하기 위해서는
<span class='linenumber'>1374</span>      * 현재 동작중인 이벤트 시스템을 잠시 중지시킬 필요가 있다. 이때 이 메소드를
<span class='linenumber'>1375</span>      * 활용한다.
<span class='linenumber'>1376</span>      * @param {Boolean} value false일경우 event handling작업을 중지한다.
<span class='linenumber'>1377</span>      */</span><span class="WHIT">
<span class='linenumber'>1378</span> </span><span class="WHIT">    </span><span class="NAME">setEnable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1379</span> </span><span class="WHIT">      </span><span class="NAME">this._opts.enabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1380</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1381</span> 
<span class='linenumber'>1382</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1383</span>      * 현재 실행중인 모듈을 설정한다.
<span class='linenumber'>1384</span>      * @param {tau.rt.Module} module 현재 실행중인 모듈
<span class='linenumber'>1385</span>      * @see tau.rt.Module
<span class='linenumber'>1386</span>      */</span><span class="WHIT">
<span class='linenumber'>1387</span> </span><span class="WHIT">    </span><span class="NAME">setActiveModule</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1388</span> </span><span class="WHIT">      </span><span class="NAME">this._activeModule</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1389</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1390</span> 
<span class='linenumber'>1391</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1392</span>      * 명시된 DOM 노드로 부터 Mobello객체를 찾아내어 그 id를 반환한다.
<span class='linenumber'>1393</span>      * 만약 발견된 Mobello객체가 없으면 undefined가 반환된다.
<span class='linenumber'>1394</span>      * @param {Object} dom 검색을 하기위한 DOM 객체
<span class='linenumber'>1395</span>      * @returns {String} Mobello객체의 id
<span class='linenumber'>1396</span>      */</span><span class="WHIT">
<span class='linenumber'>1397</span> </span><span class="WHIT">    </span><span class="NAME">findMobelloObjId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1398</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1399</span> </span><span class="WHIT">      </span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1400</span> </span><span class="WHIT">        </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dom.id</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1401</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">tau.util.dom.hasClass</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'tau'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'tau-root'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1402</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1403</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1404</span> </span><span class="WHIT">        </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dom.parentElement</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1405</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1406</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1407</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1408</span> 
<span class='linenumber'>1409</span> </span><span class="WHIT">    </span><span class="COMM">/** 
<span class='linenumber'>1410</span>      * 컴포넌트 트리에서 명시된 id와 일치하는 {@link tau.rt.EventDelegator}
<span class='linenumber'>1411</span>      * 객체(컴포넌트)를 찾아 반환한다.&lt;p/>
<span class='linenumber'>1412</span>      * 만약 일치하는 컴포넌트가 존재하지 않으면 null을 반환한다.
<span class='linenumber'>1413</span>      * @param {Object} delegator hit 테스트를 시작하기 위한 부모 
<span class='linenumber'>1414</span>      * EventDelegator 객체
<span class='linenumber'>1415</span>      * @param {String} id 컴포넌트 id
<span class='linenumber'>1416</span>      * @returns {Object} 명시된 id와 일치하는 컴포넌트 객체
<span class='linenumber'>1417</span>      */</span><span class="WHIT">
<span class='linenumber'>1418</span> </span><span class="WHIT">    </span><span class="NAME">findDelegator</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">delegator</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1419</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">children</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">_id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">id.split</span><span class="PUNC">(</span><span class="NAME">tau.ui.ID_SEPARATOR</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1420</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">delegator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1421</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">delegator.getId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">delegator.getId</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1422</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">delegator</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1423</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">delegator.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">_id</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1424</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">delegator</span><span class="PUNC">[</span><span class="NAME">_id</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1425</span> </span><span class="WHIT">          
<span class='linenumber'>1426</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1427</span> </span><span class="WHIT">        
<span class='linenumber'>1428</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">delegator.getSubDelegators</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1429</span> </span><span class="WHIT">          </span><span class="COMM">// Recursively search children components until hit</span><span class="WHIT">
<span class='linenumber'>1430</span> </span><span class="WHIT">          </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">delegator.getSubDelegators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1431</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">children</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1432</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isArray</span><span class="PUNC">(</span><span class="NAME">children</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1433</span> </span><span class="WHIT">              </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">children.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1434</span> </span><span class="WHIT">                </span><span class="NAME">delegator</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.findDelegator</span><span class="PUNC">(</span><span class="NAME">children</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1435</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">delegator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1436</span> </span><span class="WHIT">                  </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">delegator</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1437</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1438</span> </span><span class="WHIT">              </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1439</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">children.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">_id</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1440</span> </span><span class="WHIT">              </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">children</span><span class="PUNC">[</span><span class="NAME">_id</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1441</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1442</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> 
<span class='linenumber'>1443</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1444</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1445</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1446</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1447</span> </span><span class="WHIT">    
<span class='linenumber'>1448</span>     </span><span class="COMM">/**
<span class='linenumber'>1449</span>      * DOM 일리먼트 내에서 Mobello컴포넌트를 찾아내는 작업을 수행한다.&lt;p/>
<span class='linenumber'>1450</span>      * 만약 발견된 컴포넌트가 존재하지 않으면 null을 반환한다.
<span class='linenumber'>1451</span>      * @param {Object} dom hit테스트하기 위한 DOM 객체
<span class='linenumber'>1452</span>      * @returns {Object} Mobello 컴포넌트
<span class='linenumber'>1453</span>      */</span><span class="WHIT">
<span class='linenumber'>1454</span> </span><span class="WHIT">    </span><span class="NAME">hitTarget</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1455</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">found</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1456</span> </span><span class="WHIT">          </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.findMobelloObjId</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1457</span> </span><span class="WHIT">          </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._activeModule</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1458</span> </span><span class="WHIT">          </span><span class="NAME">ctrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">module.getActiveDelegator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1459</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="STRN">'tau-root'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1460</span> </span><span class="WHIT">        </span><span class="NAME">found</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.findDelegator</span><span class="PUNC">(</span><span class="NAME">ctrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1461</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">found</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">found</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1462</span> </span><span class="WHIT">        
<span class='linenumber'>1463</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">widgets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getSystemWidgets</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1464</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">widgets.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1465</span> </span><span class="WHIT">          </span><span class="COMM">// if oid exits, searches designated UI Component</span><span class="WHIT">
<span class='linenumber'>1466</span> </span><span class="WHIT">          </span><span class="NAME">found</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.findDelegator</span><span class="PUNC">(</span><span class="NAME">widgets</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1467</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">found</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">found</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1468</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1469</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1470</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1471</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1472</span> 
<span class='linenumber'>1473</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1474</span>      * 일반 DOM 이벤트를 처리한다. &lt;p/>
<span class='linenumber'>1475</span>      * 일반 DOM 이벤트를 받아 {@link tau.rt.EventDelegator}객체가 처리할 수 있는
<span class='linenumber'>1476</span>      * Mobello객체를 생성한다음 이벤트를 발생시킨다.
<span class='linenumber'>1477</span>      * @param {Object} e DOM 이벤트
<span class='linenumber'>1478</span>      * @returns {Boolean} 이벤트가 성공적으로 발생되었다면 true를 반환
<span class='linenumber'>1479</span>      */</span><span class="WHIT">
<span class='linenumber'>1480</span> </span><span class="WHIT">    </span><span class="NAME">domGenericEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1481</span> </span><span class="WHIT">      </span><span class="COMM">// Find the DOM node's Tau ID, then search & fire Tau-native Event</span><span class="WHIT">
<span class='linenumber'>1482</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">hit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$eventMgr.hitTarget</span><span class="PUNC">(</span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1483</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">hit</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">hit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// fallback</span><span class="WHIT">
<span class='linenumber'>1484</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">hit.fireEvent</span><span class="PUNC">(</span><span class="NAME">e.type</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1485</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1486</span> </span><span class="WHIT">    
<span class='linenumber'>1487</span>     </span><span class="COMM">/**
<span class='linenumber'>1488</span>      * orientationchange, resize이벤트를 받아 {@link tau.rt.Event.ORIENTATION}
<span class='linenumber'>1489</span>      * 이벤트를 발생시킨다.
<span class='linenumber'>1490</span>      * @param {Object} e DOM 이벤트
<span class='linenumber'>1491</span>      * @returns {Boolean} 정상적으로 이벤트가 발생되었다면 true를 반환
<span class='linenumber'>1492</span>      */</span><span class="WHIT">
<span class='linenumber'>1493</span> </span><span class="WHIT">    </span><span class="NAME">domOrientationChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1494</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.target</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1495</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">window</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">document</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1496</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">orientation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.orientation</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1497</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.isAndroid</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1498</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">orientation</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">this._previousOrientation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1499</span> </span><span class="WHIT">            </span><span class="NAME">this._previousOrientation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">orientation</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1500</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1501</span> </span><span class="WHIT">            </span><span class="NAME">e.preventDefault</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1502</span> </span><span class="WHIT">            </span><span class="NAME">e.stopPropagation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1503</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1504</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1505</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1506</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.ORIENTATION</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">orientation</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1507</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1508</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1509</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1510</span> </span><span class="WHIT">    
<span class='linenumber'>1511</span>     </span><span class="COMM">/**
<span class='linenumber'>1512</span>      * Mobello Framework 영역에서 발생되는 모든 터치 이벤트를 처리한다.
<span class='linenumber'>1513</span>      * @param {Event} e native DOM 이벤트
<span class='linenumber'>1514</span>      * @param {String} name 이벤트 명
<span class='linenumber'>1515</span>      */</span><span class="WHIT">
<span class='linenumber'>1516</span> </span><span class="WHIT">    </span><span class="NAME">handleTouchEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1517</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">track</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">target</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1518</span> </span><span class="WHIT">          </span><span class="NAME">touches</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.rt.hasTouch</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">e.changedTouches</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">this._mouseTouch</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1519</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">touches.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1520</span> </span><span class="WHIT">        </span><span class="NAME">track</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.trackHistory</span><span class="PUNC">(</span><span class="NAME">touches</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1521</span> </span><span class="WHIT">        </span><span class="COMM">//if track is undefined(user hasn't touch the screen),</span><span class="WHIT">
<span class='linenumber'>1522</span> </span><span class="WHIT">        </span><span class="COMM">//no need to generate event in mobile environment</span><span class="WHIT">
<span class='linenumber'>1523</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">track</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1524</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHMOVE</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">track.move</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">track.end</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1525</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// ignore move event if don't meet moving threshold</span><span class="WHIT">
<span class='linenumber'>1526</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1527</span> </span><span class="WHIT">        </span><span class="NAME">event</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">track.target</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1528</span>             </span><span class="NAME">e.targetTouches</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e.changedTouches</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1529</span> </span><span class="WHIT">        </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">track.target</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">track.target</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1530</span> </span><span class="WHIT">        </span><span class="NAME">target.fireEvent</span><span class="PUNC">(</span><span class="NAME">event</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// no delay</span><span class="WHIT">
<span class='linenumber'>1531</span> </span><span class="WHIT">        
<span class='linenumber'>1532</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">track.end</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">track.move</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1533</span> </span><span class="WHIT">          </span><span class="COMM">/** @inner No movement meant that a component was Tapped */</span><span class="WHIT">
<span class='linenumber'>1534</span> </span><span class="WHIT">          </span><span class="NAME">target.fireEvent</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TAP</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1535</span>               </span><span class="NAME">track.target</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e.targetTouches</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e.changedTouches</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1536</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1537</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1538</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1539</span> 
<span class='linenumber'>1540</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1541</span>      * 터치 이벤트의 History를 tracking한다. TouchMove 이벤트가 발생할 경우
<span class='linenumber'>1542</span>      * 매번 새로운 이벤트를 생성하는 것이 아니라 기존에 생성된 이벤트를
<span class='linenumber'>1543</span>      * 재활용한다.
<span class='linenumber'>1544</span>      * @param {Object} touch Mobile/Browser TouchPoint
<span class='linenumber'>1545</span>      * @param {Object} e TouchPoint에 대한 DOM 이벤트
<span class='linenumber'>1546</span>      * @param {String} type 이벤트 명
<span class='linenumber'>1547</span>      * @returns {Object} Tracked 터치객체
<span class='linenumber'>1548</span>      */</span><span class="WHIT">
<span class='linenumber'>1549</span> </span><span class="WHIT">    </span><span class="NAME">trackHistory</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">type</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1550</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">track</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._history</span><span class="PUNC">[</span><span class="NAME">touch.identifier</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1551</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">track</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1552</span> </span><span class="WHIT">        </span><span class="COMM">// Update current event & touch</span><span class="WHIT">
<span class='linenumber'>1553</span> </span><span class="WHIT">        </span><span class="NAME">track.event</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1554</span> </span><span class="WHIT">        </span><span class="NAME">track.touch</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">touch</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1555</span> </span><span class="WHIT">        </span><span class="NAME">track.end</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">type</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHEND</span><span class="WHIT">
<span class='linenumber'>1556</span> </span><span class="WHIT">                    </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">type</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHCANCEL</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1557</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">track.end</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1558</span> </span><span class="WHIT">          </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._history</span><span class="PUNC">[</span><span class="NAME">touch.identifier</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1559</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1560</span> </span><span class="WHIT">        </span><span class="COMM">// Set touch move flag by comparing its first position to the current</span><span class="WHIT">
<span class='linenumber'>1561</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">track.move</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">track.startPageX</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">touch.pageX</span><span class="PUNC">)</span><span class="WHIT"> 
<span class='linenumber'>1562</span>                             </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">track.startPageY</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">touch.pageY</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> 
<span class='linenumber'>1563</span>                                 </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">this._opts.touchMoveThreshold</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1564</span> </span><span class="WHIT">          </span><span class="NAME">track.move</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1565</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1566</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">type</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.TOUCHSTART</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1567</span> </span><span class="WHIT">        </span><span class="COMM">// Start tracking a touch</span><span class="WHIT">
<span class='linenumber'>1568</span> </span><span class="WHIT">        </span><span class="NAME">track</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._history</span><span class="PUNC">[</span><span class="NAME">touch.identifier</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1569</span> </span><span class="WHIT">          </span><span class="NAME">startEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1570</span> </span><span class="WHIT">          </span><span class="NAME">startPageX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">touch.pageX</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1571</span> </span><span class="WHIT">          </span><span class="NAME">startPageY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">touch.pageY</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1572</span> </span><span class="WHIT">          </span><span class="NAME">event</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1573</span> </span><span class="WHIT">          </span><span class="NAME">touch</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">touch</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1574</span> </span><span class="WHIT">          </span><span class="NAME">target</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.hitTarget</span><span class="PUNC">(</span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// Find Tau component</span><span class="WHIT">
<span class='linenumber'>1575</span> </span><span class="WHIT">          </span><span class="NAME">move</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1576</span> </span><span class="WHIT">          </span><span class="NAME">end</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT">
<span class='linenumber'>1577</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1578</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1579</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">track</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1580</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1581</span> </span><span class="WHIT">    
<span class='linenumber'>1582</span>     </span><span class="COMM">/**
<span class='linenumber'>1583</span>      * Creates a Touch object using a generic, none-touch, DOM event.
<span class='linenumber'>1584</span>      * @private
<span class='linenumber'>1585</span>      * @param {Object} e DOM event object
<span class='linenumber'>1586</span>      * @returns {Object} Touch object
<span class='linenumber'>1587</span>      */</span><span class="WHIT">
<span class='linenumber'>1588</span> </span><span class="WHIT">    </span><span class="NAME">_mouseTouch</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1589</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> 
<span class='linenumber'>1590</span>         </span><span class="NAME">identifier</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'mouse'</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1591</span>         </span><span class="NAME">clientX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e.clientX</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">clientY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e.clientY</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1592</span>         </span><span class="NAME">screenX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e.screenX</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">screenY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e.screenY</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1593</span>         </span><span class="NAME">pageX</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e.pageX</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">pageY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e.pageY</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1594</span>         </span><span class="NAME">target</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">e.target</span><span class="WHIT">
<span class='linenumber'>1595</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1596</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1597</span> 
<span class='linenumber'>1598</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1599</span>      * Logs a DOM event's touch positions.
<span class='linenumber'>1600</span>      * @private
<span class='linenumber'>1601</span>      * @param {Object} e DOM event object
<span class='linenumber'>1602</span>      */</span><span class="WHIT">
<span class='linenumber'>1603</span> </span><span class="WHIT">    </span><span class="NAME">_logTouches</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1604</span> </span><span class="WHIT">      </span><span class="COMM">/** @inner */</span><span class="WHIT">
<span class='linenumber'>1605</span> </span><span class="WHIT">      </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">touchCoords</span><span class="PUNC">(</span><span class="NAME">touches</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1606</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1607</span>             </span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1608</span> </span><span class="WHIT">        </span><span class="NAME">result.push</span><span class="PUNC">(</span><span class="NAME">touches.length</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">' ['</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1609</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">touches.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1610</span> </span><span class="WHIT">          </span><span class="NAME">result.push</span><span class="PUNC">(</span><span class="NAME">touches</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">identifier</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1611</span> </span><span class="WHIT">          </span><span class="NAME">result.push</span><span class="PUNC">(</span><span class="STRN">':('</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">pageX</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">', '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touches</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">pageY</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">')'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1612</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">touches.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1613</span> </span><span class="WHIT">            </span><span class="NAME">result.push</span><span class="PUNC">(</span><span class="STRN">', '</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1614</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1615</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1616</span> </span><span class="WHIT">        </span><span class="NAME">result.push</span><span class="PUNC">(</span><span class="STRN">']'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1617</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">result.join</span><span class="PUNC">(</span><span class="STRN">''</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1618</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1619</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.hasTouch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1620</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="NAME">e.type</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">': touches '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touchCoords</span><span class="PUNC">(</span><span class="NAME">e.touches</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1621</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="NAME">e.type</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">': changedTouches '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touchCoords</span><span class="PUNC">(</span><span class="NAME">e.changedTouches</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1622</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="NAME">e.type</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">': targetTouches '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touchCoords</span><span class="PUNC">(</span><span class="NAME">e.targetTouches</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1623</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1624</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="NAME">e.type</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">' touches['</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">touchCoords</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">']'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1625</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1626</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1627</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1628</span> 
<span class='linenumber'>1629</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.Runtime.prototype */</span><span class="WHIT">
<span class='linenumber'>1630</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Runtime'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.EventDelegator</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1631</span> 
<span class='linenumber'>1632</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1633</span>      * 명시된 config정보를 이용하여 새로운 객체를 생성한다.
<span class='linenumber'>1634</span>      * @class
<span class='linenumber'>1635</span>      * 모듈({@link tau.rt.Module})의 동작을 관리한다.
<span class='linenumber'>1636</span>      * &lt;p/>
<span class='linenumber'>1637</span>      * 내부적으로 사용되는 시스템 이벤트는 다음과 같다.
<span class='linenumber'>1638</span>      * &lt;ul>
<span class='linenumber'>1639</span>      *   &lt;li>{@link tau.rt.Event.RT_INSTALL}: 모듈을 Runtime에 등록한다.&lt;/li>
<span class='linenumber'>1640</span>      *   &lt;li>{@link tau.rt.Event.RT_UNINSTALL}: 모듈을 Runtime으로부터 제거한다.&lt;/li>
<span class='linenumber'>1641</span>      *   &lt;li>{@link tau.rt.Event.RT_START}: 모듈을 실행시킨다.&lt;/li>
<span class='linenumber'>1642</span>      *   &lt;li>{@link tau.rt.Event.RT_STOP}: 모듈의 동작을 중지시킨다.&lt;/li>
<span class='linenumber'>1643</span>      *   &lt;li>{@link tau.rt.Event.RT_LAUNCH}: Runtime을 구동시킨다.&lt;/li>
<span class='linenumber'>1644</span>      *   &lt;li>{@link tau.rt.Event.RT_TERMINATE}: Runtime을 중지시킨다.&lt;/li>
<span class='linenumber'>1645</span>      * &lt;/ul>
<span class='linenumber'>1646</span>      * @constructs
<span class='linenumber'>1647</span>      * @extends tau.rt.EventDelegator
<span class='linenumber'>1648</span>      * @param {Object} config Runtime configuration 정보
<span class='linenumber'>1649</span>      * @extends tau.rt.EventDelegator
<span class='linenumber'>1650</span>      */</span><span class="WHIT">
<span class='linenumber'>1651</span> </span><span class="WHIT">    </span><span class="NAME">Runtime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//$ tau.rt.Runtime</span><span class="WHIT">
<span class='linenumber'>1652</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">_RT</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1653</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Runtime: Only one runtime instance may exist!'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1654</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1655</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Maps module name to a configuration */</span><span class="WHIT">
<span class='linenumber'>1656</span> </span><span class="WHIT">      </span><span class="NAME">this._registry</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>1657</span>       </span><span class="COMM">/** @private Module active stack */</span><span class="WHIT">
<span class='linenumber'>1658</span> </span><span class="WHIT">      </span><span class="NAME">this._stack</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1659</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Runtime config */</span><span class="WHIT">
<span class='linenumber'>1660</span> </span><span class="WHIT">      </span><span class="NAME">this._config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1661</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Runtime queue, handled via execute() */</span><span class="WHIT">
<span class='linenumber'>1662</span> </span><span class="WHIT">      </span><span class="COMM">//this.$queue = new tau.JobQueue();</span><span class="WHIT">
<span class='linenumber'>1663</span> </span><span class="WHIT">      </span><span class="COMM">/** @private supported themes */</span><span class="WHIT">
<span class='linenumber'>1664</span> </span><span class="WHIT">      </span><span class="NAME">this.$themeMgr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.ThemeManager</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1665</span> </span><span class="WHIT">      
<span class='linenumber'>1666</span>       </span><span class="NAME">this.$widgets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1667</span> </span><span class="WHIT">      
<span class='linenumber'>1668</span>       </span><span class="NAME">this.$userapps</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// application names loaded from cookie value</span><span class="WHIT">
<span class='linenumber'>1669</span> </span><span class="WHIT">      
<span class='linenumber'>1670</span>       </span><span class="COMM">/** @private Runtime DOM element references */</span><span class="WHIT">
<span class='linenumber'>1671</span> </span><span class="WHIT">      </span><span class="NAME">this.$dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1672</span> </span><span class="WHIT">        </span><span class="NAME">head</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">'head'</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1673</span> </span><span class="WHIT">        </span><span class="NAME">root</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="COMM">// Root runtime DOM element</span><span class="WHIT">
<span class='linenumber'>1674</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1675</span> </span><span class="WHIT">      </span><span class="NAME">this.$dom.root.setAttribute</span><span class="PUNC">(</span><span class="STRN">'id'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'tau-root'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1676</span> </span><span class="WHIT">      </span><span class="NAME">tau.util.dom.appendChild</span><span class="PUNC">(</span><span class="NAME">document.body</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.$dom.root</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1677</span> 
<span class='linenumber'>1678</span> </span><span class="WHIT">      </span><span class="COMM">/** @private  Event Managers handles all System Event processing */</span><span class="WHIT">
<span class='linenumber'>1679</span> </span><span class="WHIT">      </span><span class="NAME">this.$eventMgr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.EventManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1680</span> </span><span class="WHIT">      
<span class='linenumber'>1681</span>       </span><span class="COMM">/** @private listen to update event of application cache */</span><span class="WHIT">
<span class='linenumber'>1682</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">GLOBAL.applicationCache</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">GLOBAL.navigator.onLine</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1683</span> </span><span class="WHIT">        </span><span class="NAME">GLOBAL.applicationCache.addEventListener</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1684</span> </span><span class="WHIT">            </span><span class="STRN">'updateready'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleUpdateReady</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1685</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1686</span> 
<span class='linenumber'>1687</span> </span><span class="WHIT">      </span><span class="COMM">// Runtime module event handlers</span><span class="WHIT">
<span class='linenumber'>1688</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bootstrap</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">tau.rt.Event.RT_INSTALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_UNINSTALL</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1689</span> </span><span class="WHIT">                       </span><span class="NAME">tau.rt.Event.RT_START</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="NAME">tau.rt.Event.RT_STOP</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1690</span> </span><span class="WHIT">                       </span><span class="NAME">tau.rt.Event.RT_TERMINATE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_INSTALLED</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1691</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">bootstrap.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1692</span> </span><span class="WHIT">        </span><span class="NAME">this.publishEvent</span><span class="PUNC">(</span><span class="NAME">bootstrap</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">defaultFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.handleBootstrap</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1693</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1694</span> </span><span class="WHIT">      
<span class='linenumber'>1695</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">events</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">tau.rt.Event.TOUCHSTART</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1696</span>                     </span><span class="NAME">tau.rt.Event.TOUCHMOVE</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>1697</span>                     </span><span class="NAME">tau.rt.Event.TAP</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1698</span> </span><span class="WHIT">                    </span><span class="NAME">tau.rt.Event.TOUCHEND</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1699</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">events.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1700</span> </span><span class="WHIT">        </span><span class="NAME">this.publishEvent</span><span class="PUNC">(</span><span class="NAME">events</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1701</span> </span><span class="WHIT">          </span><span class="NAME">antecedentFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.handleCaptureEvent</span><span class="WHIT">
<span class='linenumber'>1702</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1703</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1704</span> </span><span class="WHIT">      </span><span class="COMM">// clipboard for storing DOM of background apps</span><span class="WHIT">
<span class='linenumber'>1705</span> </span><span class="WHIT">      </span><span class="NAME">this.$clipboard</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Clipboard</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1706</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1707</span> </span><span class="WHIT">    
<span class='linenumber'>1708</span>     </span><span class="COMM">/**
<span class='linenumber'>1709</span>      * 시스템 내부 클립보드 객체를 반환한다. 클립보드 객체는 Temporary로
<span class='linenumber'>1710</span>      * DOM객체를 저장하기 위해 사용된다.
<span class='linenumber'>1711</span>      * @returns {tau.rt.Clipboard} Clipboard 객체
<span class='linenumber'>1712</span>      */</span><span class="WHIT">
<span class='linenumber'>1713</span> </span><span class="WHIT">    </span><span class="NAME">getClipboard</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1714</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$clipboard</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1715</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1716</span> </span><span class="WHIT">    
<span class='linenumber'>1717</span>     </span><span class="COMM">/**
<span class='linenumber'>1718</span>      * 시스템 이벤트 중 Lifecycle과 관련된 이벤트들을 처리한다.
<span class='linenumber'>1719</span>      * @param {tau.rt.Event} e 이벤트 객체
<span class='linenumber'>1720</span>      * @param {Object} payload 이벤트 발생시 전달되는 데이터 객체
<span class='linenumber'>1721</span>      */</span><span class="WHIT">
<span class='linenumber'>1722</span> </span><span class="WHIT">    </span><span class="NAME">handleBootstrap</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1723</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1724</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_INSTALL</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1725</span> </span><span class="WHIT">          </span><span class="NAME">this.install</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1726</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1727</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_UNINSTALL</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1728</span> </span><span class="WHIT">          </span><span class="NAME">this.uninstall</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1729</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1730</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_START</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1731</span> </span><span class="WHIT">          </span><span class="NAME">this.start</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1732</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1733</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_STOP</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1734</span> </span><span class="WHIT">          </span><span class="NAME">this.stop</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1735</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1736</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_TERMINATE</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1737</span> </span><span class="WHIT">          </span><span class="NAME">this.terminate</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1738</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1739</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1740</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1741</span> </span><span class="WHIT">    
<span class='linenumber'>1742</span>     </span><span class="COMM">/**
<span class='linenumber'>1743</span>      * callback 메소드로써 부모클래스의 메소드를 오버라이드하여 
<span class='linenumber'>1744</span>      * Runtime이벤트를 처리한다. 
<span class='linenumber'>1745</span>      * @override
<span class='linenumber'>1746</span>      */</span><span class="WHIT">
<span class='linenumber'>1747</span> </span><span class="WHIT">    </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1748</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1749</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.SCENEDRAWN</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1750</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.ORIENTATION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>1751</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.isIPhone</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">  </span><span class="COMM">// hide URL bar</span><span class="WHIT">
<span class='linenumber'>1752</span> </span><span class="WHIT">            </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">window.scrollTo</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1753</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.isAndroid</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1754</span> </span><span class="WHIT">              </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.documentElement</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1755</span> </span><span class="WHIT">                  </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.outerHeight</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">window.devicePixelRatio</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1756</span> 
<span class='linenumber'>1757</span> </span><span class="WHIT">              </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">elem.scrollHeight</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT">  </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1758</span> </span><span class="WHIT">                </span><span class="NAME">elem.style.height</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1759</span> </span><span class="WHIT">              </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1760</span> </span><span class="WHIT">                </span><span class="NAME">elem.style.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1761</span> </span><span class="WHIT">              </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1762</span> </span><span class="WHIT">              </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">window.scrollTo</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1763</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1764</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1765</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1766</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e._stopPropagation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// propagates events to system widgets</span><span class="WHIT">
<span class='linenumber'>1767</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">widgets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$widgets</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">widgets.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1768</span> </span><span class="WHIT">            </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1769</span> </span><span class="WHIT">          </span><span class="NAME">widgets</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">propagateEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1770</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1771</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1772</span> </span><span class="WHIT">      </span><span class="NAME">tau.rt.Runtime.$super.propagateEvent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1773</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1774</span> </span><span class="WHIT">    
<span class='linenumber'>1775</span>     </span><span class="COMM">/**
<span class='linenumber'>1776</span>      * Capture단계의 이벤트를 처리한다. 이 메소드는 이벤트로 publishing할 때
<span class='linenumber'>1777</span>      * antecedentFn로 등록되어 있다.
<span class='linenumber'>1778</span>      * @param {tau.rt.Event} e Event 객체
<span class='linenumber'>1779</span>      * @param {Object} payload 이벤트 발생시 전달되는 데이터 객체
<span class='linenumber'>1780</span>      * @see tau.rt.EventDelegator#publishEvent
<span class='linenumber'>1781</span>      */</span><span class="WHIT">
<span class='linenumber'>1782</span> </span><span class="WHIT">    </span><span class="NAME">handleCaptureEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1783</span> </span><span class="WHIT">     </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">publisher</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">widgets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$widgets</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">widgets.length</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>1784</span>          </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1785</span> </span><span class="WHIT">       </span><span class="NAME">publisher</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">widgets</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getEventPublisher</span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1786</span> </span><span class="WHIT">       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">publisher</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1787</span> </span><span class="WHIT">         </span><span class="NAME">publisher.notifyListeners</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1788</span> </span><span class="WHIT">       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1789</span> </span><span class="WHIT">     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1790</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1791</span> </span><span class="WHIT">    
<span class='linenumber'>1792</span>     </span><span class="COMM">/**
<span class='linenumber'>1793</span>      * Cache가 변경되었을 때 변경된 내용을 Local Cache에 적용한다.
<span class='linenumber'>1794</span>      * @param {Event} e Cache 변경 이벤트(html5)
<span class='linenumber'>1795</span>      * @param {Object} payload 이벤트 발생시 전달되는 데이터 객체
<span class='linenumber'>1796</span>      */</span><span class="WHIT">
<span class='linenumber'>1797</span> </span><span class="WHIT">    </span><span class="NAME">handleUpdateReady</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1798</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appCache</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">GLOBAL.applicationCache</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1799</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appCache.status</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">appCache.UPDATEREADY</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1800</span> </span><span class="WHIT">        </span><span class="NAME">appCache.swapCache</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1801</span> </span><span class="WHIT">        </span><span class="NAME">tau.log</span><span class="PUNC">(</span><span class="STRN">'Application cache is updated!'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1802</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1803</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1804</span> </span><span class="WHIT">    
<span class='linenumber'>1805</span>     </span><span class="COMM">/**
<span class='linenumber'>1806</span>      * SystemDock 객체를 반환한다. 만약 현재 생성된 SystemDock객체가 존재하지 않으면
<span class='linenumber'>1807</span>      * 새로운 객체를 생성하여 반환한다.
<span class='linenumber'>1808</span>      * @return {tau.ui.SystemDock} 시스템 객체
<span class='linenumber'>1809</span>      */</span><span class="WHIT">
<span class='linenumber'>1810</span> </span><span class="WHIT">    </span><span class="NAME">getSystemDock</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1811</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">widget</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.findSystemWidget</span><span class="PUNC">(</span><span class="NAME">tau.ui.SystemDock</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1812</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">widget</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">widget</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1813</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getModuleConfig</span><span class="PUNC">(</span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1814</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.addSystemWidget</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.SystemDock</span><span class="PUNC">(</span><span class="NAME">config.systemdock</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1815</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1816</span> </span><span class="WHIT">    
<span class='linenumber'>1817</span>     </span><span class="COMM">/**
<span class='linenumber'>1818</span>      * SystemDialog 객체를 반환한다. 만약 현재 생성된 SystemDialog객체가 존재하지 않으면
<span class='linenumber'>1819</span>      * 새로운 객체를 생성하여 반환한다.
<span class='linenumber'>1820</span>      * @return {tau.ui.SystemDialog} 시스템 다이얼로그 객체
<span class='linenumber'>1821</span>      */</span><span class="WHIT">
<span class='linenumber'>1822</span> </span><span class="WHIT">    </span><span class="NAME">getSystemDialog</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1823</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">widget</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.findSystemWidget</span><span class="PUNC">(</span><span class="NAME">tau.ui.SystemDialog</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1824</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">widget</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">widget</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1825</span> 
<span class='linenumber'>1826</span> </span><span class="WHIT">      </span><span class="NAME">widget</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.SystemDialog</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1827</span> </span><span class="WHIT">      </span><span class="NAME">widget.draw</span><span class="PUNC">(</span><span class="NAME">this.$dom.root</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1828</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.addSystemWidget</span><span class="PUNC">(</span><span class="NAME">widget</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1829</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1830</span> </span><span class="WHIT">    
<span class='linenumber'>1831</span>     </span><span class="COMM">/**
<span class='linenumber'>1832</span>      * 쿠키 저장소에 Caching된 앱들에 대한 이름을 배열 형태로 반환한다.
<span class='linenumber'>1833</span>      * @returns {Array} 쿠키에 저장되어 있는 앱 이름에 대한 배열
<span class='linenumber'>1834</span>      */</span><span class="WHIT">
<span class='linenumber'>1835</span> </span><span class="WHIT">    </span><span class="NAME">getCached</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1836</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cookie</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1837</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$userapps</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1838</span> </span><span class="WHIT">        </span><span class="NAME">cookie</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.util.getCookie</span><span class="PUNC">(</span><span class="STRN">'$userapps'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1839</span> </span><span class="WHIT">        </span><span class="NAME">this.$userapps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cookie</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">tau.parse</span><span class="PUNC">(</span><span class="NAME">cookie</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1840</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1841</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$userapps</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1842</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1843</span> 
<span class='linenumber'>1844</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1845</span>      * 명시된 이름의 앱을 Cache로 부터 삭제한다.
<span class='linenumber'>1846</span>      * @param {String} app 삭제할 앱 이름
<span class='linenumber'>1847</span>      * @private
<span class='linenumber'>1848</span>      */</span><span class="WHIT">
<span class='linenumber'>1849</span> </span><span class="WHIT">    </span><span class="NAME">_uncache</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1850</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getCached</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1851</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">apps.indexOf</span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1852</span> </span><span class="WHIT">        </span><span class="NAME">apps.splice</span><span class="PUNC">(</span><span class="NAME">apps.indexOf</span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1853</span> </span><span class="WHIT">        </span><span class="NAME">tau.util.setCookie</span><span class="PUNC">(</span><span class="STRN">'$userapps'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.stringify</span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">365</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1854</span> </span><span class="WHIT">        </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1855</span> </span><span class="WHIT">          </span><span class="NAME">window.applicationCache.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// async processing</span><span class="WHIT">
<span class='linenumber'>1856</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1857</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1858</span> </span><span class="WHIT">          </span><span class="STRN">'You need to go online to update application cache(uninstall): '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1859</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1860</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1861</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1862</span> </span><span class="WHIT">    
<span class='linenumber'>1863</span>     </span><span class="COMM">/**
<span class='linenumber'>1864</span>      * 명시된 앱 이름을 쿠키 저장소에 저장한다.
<span class='linenumber'>1865</span>      * @param {String} app Caching할 앱의 이름
<span class='linenumber'>1866</span>      * @private
<span class='linenumber'>1867</span>      */</span><span class="WHIT">
<span class='linenumber'>1868</span> </span><span class="WHIT">    </span><span class="NAME">_cache</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1869</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getCached</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1870</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">apps</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">apps.indexOf</span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1871</span> </span><span class="WHIT">        </span><span class="NAME">apps.push</span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1872</span> </span><span class="WHIT">        </span><span class="NAME">tau.util.setCookie</span><span class="PUNC">(</span><span class="STRN">'$userapps'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.stringify</span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">365</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1873</span> </span><span class="WHIT">        </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1874</span> </span><span class="WHIT">          </span><span class="NAME">window.applicationCache.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// async processing</span><span class="WHIT">
<span class='linenumber'>1875</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1876</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1877</span> </span><span class="WHIT">            </span><span class="STRN">'You need to go online to update application cache(install): '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1878</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1879</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1880</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1881</span> </span><span class="WHIT">    
<span class='linenumber'>1882</span>     </span><span class="COMM">/**
<span class='linenumber'>1883</span>      * 명시된 모듈 configuration정보를 Runtime에 등록한다.
<span class='linenumber'>1884</span>      * &lt;p/>
<span class='linenumber'>1885</span>      * Module이름이 명시되면 해당 모듈의 configuration정보를 지정된 패스로
<span class='linenumber'>1886</span>      * 부터(appname/config.json) 로딩한다. 만약 이름이 명시되지 않으면
<span class='linenumber'>1887</span>      * Dashboard를 위한 configuration정보를 로딩한다.
<span class='linenumber'>1888</span>      * &lt;p/>
<span class='linenumber'>1889</span>      * 명시된 앱이 Runtime에 등록되기 위해서는 반드시 configuration정보가
<span class='linenumber'>1890</span>      * 필요하며 configuration정보의 포맷은 다음과 같이 JSON형태로 기술한다.
<span class='linenumber'>1891</span>      * &lt;p/>
<span class='linenumber'>1892</span>      * 명시된 모듈의 설치가 완료되면 {@link tau.rt.Event.RT_INSTALLED} 이벤트가
<span class='linenumber'>1893</span>      * 발생된다. 이때 payload객체는 설치된 앱들의 configuration정보가 된다.
<span class='linenumber'>1894</span>      *
<span class='linenumber'>1895</span>      * @example
<span class='linenumber'>1896</span>      * // config.json
<span class='linenumber'>1897</span>      * config({
<span class='linenumber'>1898</span>      *   name: 'appname',
<span class='linenumber'>1899</span>      *   version: '1.0.0', 
<span class='linenumber'>1900</span>      *   classname: 'foo.Bar'
<span class='linenumber'>1901</span>      *   ...
<span class='linenumber'>1902</span>      * });
<span class='linenumber'>1903</span>      *
<span class='linenumber'>1904</span>      * @param {Object | Array} apps install할 모듈의 정보
<span class='linenumber'>1905</span>      */</span><span class="WHIT">
<span class='linenumber'>1906</span> </span><span class="WHIT">    </span><span class="NAME">install</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1907</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1908</span> </span><span class="WHIT">      </span><span class="NAME">apps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.isArray</span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">apps</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1909</span> </span><span class="WHIT">      </span><span class="NAME">this.resolve</span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">confs</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1910</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">conf</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1911</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">confs.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1912</span> </span><span class="WHIT">          </span><span class="NAME">conf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">confs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1913</span> </span><span class="WHIT">          </span><span class="NAME">rt._registry</span><span class="PUNC">[</span><span class="NAME">conf.name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">conf</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// register conf</span><span class="WHIT">
<span class='linenumber'>1914</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">conf.$mutable</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1915</span> </span><span class="WHIT">            </span><span class="NAME">rt._cache</span><span class="PUNC">(</span><span class="NAME">conf.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1916</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1917</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1918</span> </span><span class="WHIT">        </span><span class="PUNC">(</span><span class="NAME">rt.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_INSTALLED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">confs</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1919</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">rt._registry</span><span class="PUNC">[</span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">autostart</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1920</span> </span><span class="WHIT">          </span><span class="NAME">rt.start</span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1921</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1922</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1923</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1924</span> </span><span class="WHIT">    
<span class='linenumber'>1925</span>     </span><span class="COMM">/**
<span class='linenumber'>1926</span>      * 명시된 앱 이름을 이용하여 해당 앱의 config정보를 찾아낸다. 작업이
<span class='linenumber'>1927</span>      * 완료되면 명시된 callback메소드가 호출된다.
<span class='linenumber'>1928</span>      * @param {Array} apps resolve할 앱이름들(배열)
<span class='linenumber'>1929</span>      * @param {Function} callbackFn resolving작업이 종료되면 호출될
<span class='linenumber'>1930</span>      * callback함수. 이 함수의 파라미터는 resolve된 config정보의 배열이 된다.
<span class='linenumber'>1931</span>      */</span><span class="WHIT">
<span class='linenumber'>1932</span> </span><span class="WHIT">    </span><span class="NAME">resolve</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1933</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">src</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">chain</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1934</span> </span><span class="WHIT">      </span><span class="NAME">GLOBAL.config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">conf</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// global wide function</span><span class="WHIT">
<span class='linenumber'>1935</span> </span><span class="WHIT">        </span><span class="NAME">GLOBAL.config.current</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">conf</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// refer to InstallDependency#handleResult</span><span class="WHIT">
<span class='linenumber'>1936</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1937</span> </span><span class="WHIT">      </span><span class="NAME">chain</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.DependencyChain</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1938</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">apps.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1939</span> </span><span class="WHIT">        </span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">_resolvePath</span><span class="PUNC">(</span><span class="STRN">'/config.json'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1940</span> </span><span class="WHIT">        </span><span class="NAME">chain.addDependency</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1941</span> </span><span class="WHIT">            </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.InstallDependency</span><span class="PUNC">(</span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">src</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">sys</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1942</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1943</span> </span><span class="WHIT">      </span><span class="NAME">chain.setAutoUnloading</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1944</span> </span><span class="WHIT">      </span><span class="NAME">chain.setFallback</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1945</span> </span><span class="WHIT">        </span><span class="NAME">resolve</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1946</span> </span><span class="WHIT">          </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">GLOBAL.config</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1947</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">conf</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">confs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">dependencies</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">context.getDependencies</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1948</span> </span><span class="WHIT">          </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dependencies.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1949</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">conf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dependencies</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">$conf</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1950</span> </span><span class="WHIT">            </span><span class="NAME">confs.push</span><span class="PUNC">(</span><span class="NAME">conf</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// register conf</span><span class="WHIT">
<span class='linenumber'>1951</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1952</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1953</span> </span><span class="WHIT">            </span><span class="NAME">callbackFn</span><span class="PUNC">(</span><span class="NAME">confs</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1954</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1955</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1956</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1957</span> </span><span class="WHIT">      </span><span class="NAME">chain.resolve</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1958</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1959</span> </span><span class="WHIT">    
<span class='linenumber'>1960</span> 
<span class='linenumber'>1961</span>     </span><span class="COMM">/**
<span class='linenumber'>1962</span>      * 명시된 모듈의 이름을 Runtime으로 부터 삭제한다.
<span class='linenumber'>1963</span>      * &lt;p/>
<span class='linenumber'>1964</span>      * 주의: 명시된 모듈의 현재 active모듈이면 Runtime으로 부터 삭제가
<span class='linenumber'>1965</span>      * 불가능하다. 또한 삭제된 모듈을 다시 설치되기전 까지는 재시작이
<span class='linenumber'>1966</span>      * 불가능하다.
<span class='linenumber'>1967</span>      * @param {String} name Module 이름
<span class='linenumber'>1968</span>      * @see tau.rt.Module
<span class='linenumber'>1969</span>      */</span><span class="WHIT">
<span class='linenumber'>1970</span> </span><span class="WHIT">    </span><span class="NAME">uninstall</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1971</span> </span><span class="WHIT">      </span><span class="COMM">// Ensure that the module was installed and not active</span><span class="WHIT">
<span class='linenumber'>1972</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._registry</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1973</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1974</span> </span><span class="WHIT">        </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_STOP</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1975</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Stopping instantiated module before uninstalling: '</span><span class="WHIT"> 
<span class='linenumber'>1976</span>             </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1977</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1978</span> </span><span class="WHIT">      </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Uninstalling module: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1979</span> </span><span class="WHIT">      </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._registry</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1980</span> </span><span class="WHIT">      </span><span class="PUNC">(</span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_UNINSTALLED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1981</span> </span><span class="WHIT">      </span><span class="NAME">this._uncache</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1982</span> </span><span class="WHIT">      </span><span class="COMM">// Recursively uninstall remaining parameters</span><span class="WHIT">
<span class='linenumber'>1983</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1984</span> </span><span class="WHIT">        </span><span class="NAME">this.uninstall.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Array.prototype.slice.call</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1985</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1986</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1987</span> 
<span class='linenumber'>1988</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>1989</span>      * 명시된 이름의 모듈의 Lifecycle을 시작한다.
<span class='linenumber'>1990</span>      * &lt;p/>
<span class='linenumber'>1991</span>      * 명시된 이름에 해당하는 Module이 정상적으로 설치되어 있다면 새로운
<span class='linenumber'>1992</span>      * 객체를 생성하고 실행시킨다. 그렇지 않으면 지금까지 실행된 Module들중
<span class='linenumber'>1993</span>      * 가장 최근에 실행한 Module을 구동시킨다. 마지막으로 현재 active모듈이
<span class='linenumber'>1994</span>      * 존재하지 않으면 Dashboard를 구동시킨다.
<span class='linenumber'>1995</span>      * @param {String} name Module 명, undefined 이면 가장 최근에
<span class='linenumber'>1996</span>      * 실행한 Module을 재기동 한다.
<span class='linenumber'>1997</span>      * @throws {error} 기동되거나 시작된 Module이 존재하지 않을 경우
<span class='linenumber'>1998</span>      * @see tau.rt.Module
<span class='linenumber'>1999</span>      */</span><span class="WHIT">
<span class='linenumber'>2000</span> </span><span class="WHIT">    </span><span class="NAME">start</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2001</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">stack</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cur</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2002</span> </span><span class="WHIT">          </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._registry</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2003</span> </span><span class="WHIT">          </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2004</span> </span><span class="WHIT">      </span><span class="COMM">//!this._config.multiInstance -> not support multiInstance by default now </span><span class="WHIT">
<span class='linenumber'>2005</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2006</span> </span><span class="WHIT">        </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Dashboard</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>2007</span> </span><span class="WHIT">            </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Application</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2008</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2009</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">module</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.rt.Module</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2010</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Runtime: no module active or installed!'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2011</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2012</span> </span><span class="WHIT">      </span><span class="COMM">// Always de-activate module first to properly maintain active stack.</span><span class="WHIT">
<span class='linenumber'>2013</span> </span><span class="WHIT">      </span><span class="COMM">// e.g. Some modules that restart must be moved from a lower active </span><span class="WHIT">
<span class='linenumber'>2014</span> </span><span class="WHIT">      </span><span class="COMM">// stack to the top (currently running).</span><span class="WHIT">
<span class='linenumber'>2015</span> </span><span class="WHIT">      </span><span class="COMM">// tau.arr(this._stack).remove(module);</span><span class="WHIT">
<span class='linenumber'>2016</span> </span><span class="WHIT">      </span><span class="NAME">stack</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this._stack</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2017</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cur</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">stack.peek</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// already existing module</span><span class="WHIT">
<span class='linenumber'>2018</span> </span><span class="WHIT">        </span><span class="NAME">this.$clipboard.cut</span><span class="PUNC">(</span><span class="NAME">cur.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cur.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2019</span> </span><span class="WHIT">        </span><span class="NAME">cur.setVisible</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2020</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2021</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._stack.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2022</span> </span><span class="WHIT">        </span><span class="NAME">stack.remove</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2023</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2024</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">stack.pushUnique</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2025</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'Same module instance already exists: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2026</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2027</span> </span><span class="WHIT">      </span><span class="NAME">this.refresh</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// update system dock</span><span class="WHIT">
<span class='linenumber'>2028</span> </span><span class="WHIT">      </span><span class="COMM">// Set active module & run module</span><span class="WHIT">
<span class='linenumber'>2029</span> </span><span class="WHIT">      </span><span class="NAME">this.$eventMgr.setActiveModule</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2030</span> </span><span class="WHIT">      </span><span class="NAME">this.$themeMgr.loadTheme</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="COMM">// load theme before starting module</span><span class="WHIT">
<span class='linenumber'>2031</span> </span><span class="WHIT">          </span><span class="PUNC">{</span><span class="STRN">'config'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">module.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'module'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2032</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module.isBusy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// instance exists already</span><span class="WHIT">
<span class='linenumber'>2033</span> </span><span class="WHIT">        </span><span class="NAME">this.$clipboard.paste</span><span class="PUNC">(</span><span class="NAME">module.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.$dom.root</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2034</span> </span><span class="WHIT">        </span><span class="NAME">module.setVisible</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2035</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Switching: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">_appNameId</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2036</span> </span><span class="WHIT">        </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_APP_CHANGE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>2037</span>             </span><span class="PUNC">{</span><span class="STRN">'fg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'bg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">cur</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2038</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2039</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Starting: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">_appNameId</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2040</span> </span><span class="WHIT">        </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2041</span> </span><span class="WHIT">          </span><span class="NAME">module.start</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2042</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2043</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Starting module failed: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">_appNameId</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> 
<span class='linenumber'>2044</span>               </span><span class="PUNC">+</span><span class="STRN">'\n\t'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">ex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2045</span> </span><span class="WHIT">          </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_STOP</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">module.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2046</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2047</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2048</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2049</span> </span><span class="WHIT">    
<span class='linenumber'>2050</span>     </span><span class="COMM">/**
<span class='linenumber'>2051</span>      * 명시된 이름에 해당하는 Module의 Lifecycle을 중지하고 destroy시킨다.
<span class='linenumber'>2052</span>      * &lt;p/>
<span class='linenumber'>2053</span>      * Module이름이 명시되고 해당 Module이 존재하면 그 모듈을 중지시키고
<span class='linenumber'>2054</span>      * 그렇지 않으면 실행된 Module들 중 가장 최근에 실행된 Module을 찾아
<span class='linenumber'>2055</span>      * 중지 시킨다.&lt;p/>
<span class='linenumber'>2056</span>      * Module이 중지되면 Control을 그 다음으로 최근에 실행된 Module로 넘긴다음
<span class='linenumber'>2057</span>      * lifecycle을 실행시킨다.
<span class='linenumber'>2058</span>      * @param {String} name Module 이름/id, undefined
<span class='linenumber'>2059</span>      * 이면 현재 실행중인 Module을 중지시킨다.
<span class='linenumber'>2060</span>      */</span><span class="WHIT">
<span class='linenumber'>2061</span> </span><span class="WHIT">    </span><span class="NAME">stop</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2062</span> </span><span class="WHIT">      </span><span class="COMM">// Find the running module, otherwise Stop currently running module;</span><span class="WHIT">
<span class='linenumber'>2063</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isActive</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2064</span> </span><span class="WHIT">          </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2065</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2066</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._stack.length</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2067</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Stopping last remaining module is prohibited'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2068</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2069</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Stopping Dashboard is prohibited'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2070</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2071</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Stopping: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">_appNameId</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2072</span> </span><span class="WHIT">          </span><span class="COMM">// Stop the module and fire event to start top-most active module</span><span class="WHIT">
<span class='linenumber'>2073</span> </span><span class="WHIT">          </span><span class="NAME">isActive</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._stack</span><span class="PUNC">[</span><span class="NAME">this._stack.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2074</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isActive</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2075</span> </span><span class="WHIT">            </span><span class="NAME">this.$eventMgr.setActiveModule</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Clear active module</span><span class="WHIT">
<span class='linenumber'>2076</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2077</span> </span><span class="WHIT">          </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2078</span> </span><span class="WHIT">            </span><span class="NAME">this.$clipboard.remove</span><span class="PUNC">(</span><span class="NAME">module.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2079</span> </span><span class="WHIT">            </span><span class="NAME">module.stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2080</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2081</span> </span><span class="WHIT">            </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Exception occurred during Stop: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">ex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2082</span> </span><span class="WHIT">            </span><span class="COMM">// If graceful error option is not set, we re-throw exception </span><span class="WHIT">
<span class='linenumber'>2083</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._config.gracefulErrors</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2084</span> </span><span class="WHIT">              </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="NAME">ex</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2085</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2086</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">finally</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2087</span> </span><span class="WHIT">            </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this._stack</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Remove from active stack</span><span class="WHIT">
<span class='linenumber'>2088</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isActive</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2089</span> </span><span class="WHIT">              </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_START</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Restart top-most module</span><span class="WHIT">
<span class='linenumber'>2090</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2091</span> </span><span class="WHIT">              </span><span class="NAME">this.refresh</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2092</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2093</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2094</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2095</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2096</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Stopping failed for invalid module: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2097</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2098</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2099</span> 
<span class='linenumber'>2100</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2101</span>      * 브라우저의 URL로 부터 Mobello의 Runtime을 launch시킨다.
<span class='linenumber'>2102</span>      * &lt;p>
<span class='linenumber'>2103</span>      * URL 파라미터에 app을 포함하고 있으면 그 값으로 지정된 앱을 구동시킨다.
<span class='linenumber'>2104</span>      * 만약 명시된 app 파라미터가 없으면 Dashboard를 구동시킨다.&lt;p/>
<span class='linenumber'>2105</span>      * URL 포맷은 다음과 같다.
<span class='linenumber'>2106</span>      * @example
<span class='linenumber'>2107</span>      * http://&lt;domain.com>/launcher.html?app=&lt;appname>
<span class='linenumber'>2108</span>      */</span><span class="WHIT">
<span class='linenumber'>2109</span> </span><span class="WHIT">    </span><span class="NAME">launch</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2110</span> </span><span class="WHIT">      </span><span class="NAME">this._drawMask</span><span class="PUNC">(</span><span class="STRN">'Loading...'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2111</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">singleApp</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2112</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">app</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'$dashboard'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2113</span> </span><span class="WHIT">      </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">handler</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2114</span> </span><span class="WHIT">        </span><span class="NAME">this.unsubscribeEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_INSTALLED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">handler</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2115</span> </span><span class="WHIT">        </span><span class="NAME">this._clearMask</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2116</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2117</span> </span><span class="WHIT">          </span><span class="NAME">this.setTitle</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">title</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2118</span> </span><span class="WHIT">          </span><span class="NAME">this.setIcon</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">icon</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2119</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">splash</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.setSplash</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">splash</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2120</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.LEVEL</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">loglevel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2121</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2122</span> </span><span class="WHIT">          </span><span class="NAME">window.alert</span><span class="PUNC">(</span><span class="STRN">'앱('</span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">')을 실행할 수 없습니다.\n앱 이름이 정확한지 확인하십시오.'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2123</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2124</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2125</span> </span><span class="WHIT">      </span><span class="NAME">this.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_INSTALLED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">handler</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2126</span> </span><span class="WHIT">      </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_INSTALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">app</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">autostart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">sys</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2127</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2128</span> 
<span class='linenumber'>2129</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2130</span>      * 명시된 이름의 Module을 중지하고 uninstall시킨다.
<span class='linenumber'>2131</span>      * @param {String} name Module 명
<span class='linenumber'>2132</span>      */</span><span class="WHIT">
<span class='linenumber'>2133</span> </span><span class="WHIT">    </span><span class="NAME">terminate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2134</span> </span><span class="WHIT">      </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Terminating: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2135</span> </span><span class="WHIT">      </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_STOP</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2136</span> </span><span class="WHIT">      </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_UNINSTALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2137</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2138</span> 
<span class='linenumber'>2139</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2140</span>      * Runtime 리소스들을 업데이트 시킨다. Multi-tasking모드일 경우 SystemDock
<span class='linenumber'>2141</span>      * 정보를 갱신한다.
<span class='linenumber'>2142</span>      */</span><span class="WHIT">
<span class='linenumber'>2143</span> </span><span class="WHIT">    </span><span class="NAME">refresh</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2144</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2145</span> </span><span class="WHIT">      </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">deferRefresh</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2146</span> </span><span class="WHIT">        </span><span class="NAME">rt.getSystemDock</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">draw</span><span class="PUNC">(</span><span class="NAME">rt.$dom.root</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2147</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2148</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.isMultiApp</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// Update system dock contents</span><span class="WHIT">
<span class='linenumber'>2149</span> </span><span class="WHIT">        </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="NAME">deferRefresh</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">50</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2150</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2151</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2152</span> 
<span class='linenumber'>2153</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2154</span>      * 현재 Runtime의 버전정보를 반환한다.
<span class='linenumber'>2155</span>      * @returns {String} Runtime의 버전정보
<span class='linenumber'>2156</span>      */</span><span class="WHIT">
<span class='linenumber'>2157</span> </span><span class="WHIT">    </span><span class="NAME">getVersion</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2158</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._config.version</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2159</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2160</span> 
<span class='linenumber'>2161</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2162</span>      * Runtime의 configuration정보를 반환한다.
<span class='linenumber'>2163</span>      * @returns {Object} Runtime configuration 정보
<span class='linenumber'>2164</span>      */</span><span class="WHIT">
<span class='linenumber'>2165</span> </span><span class="WHIT">    </span><span class="NAME">getConfig</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2166</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._config</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2167</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2168</span> 
<span class='linenumber'>2169</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2170</span>      * Multi-tasking모드인지 확인하고 그 결과를 true/false로 반환한다.
<span class='linenumber'>2171</span>      * @returns {Boolean} true이면 multi-tasking모드 임
<span class='linenumber'>2172</span>      */</span><span class="WHIT">
<span class='linenumber'>2173</span> </span><span class="WHIT">    </span><span class="NAME">isMultiApp</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2174</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this._config.singleApp</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2175</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2176</span> 
<span class='linenumber'>2177</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2178</span>      * 명시된 모듈 이름 또는 id를 이용하여 Module 객체를 찾아 반환한다.
<span class='linenumber'>2179</span>      * &lt;p/>
<span class='linenumber'>2180</span>      * nameId를 명시하지 않으면 현재 실행중인 Module을 반환한다.
<span class='linenumber'>2181</span>      * &lt;p/>
<span class='linenumber'>2182</span>      * 파라미터로 "*"을 사용하면 지금까지 실행된 모둔 Module에 
<span class='linenumber'>2183</span>      * 대한정보를 Array형태로 반환한다.
<span class='linenumber'>2184</span>      * @param {String} nameId Application name 또는 Id ("*" = all)
<span class='linenumber'>2185</span>      * @returns {Array|tau.rt.Module} 검색된 Module 또는 Module 배열
<span class='linenumber'>2186</span>      */</span><span class="WHIT">
<span class='linenumber'>2187</span> </span><span class="WHIT">    </span><span class="NAME">getModule</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">nameId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2188</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">nameId</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._stack.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2189</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._stack</span><span class="PUNC">[</span><span class="NAME">this._stack.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="COMM">// Current</span><span class="WHIT">
<span class='linenumber'>2190</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">nameId</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'*'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2191</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Array.prototype.slice.call</span><span class="PUNC">(</span><span class="NAME">this._stack</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2192</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">nameId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2193</span> </span><span class="WHIT">        </span><span class="COMM">// Find module by name or id</span><span class="WHIT">
<span class='linenumber'>2194</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this._stack.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2195</span> </span><span class="WHIT">          </span><span class="NAME">m</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._stack</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2196</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">m.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">nameId</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">m.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">nameId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2197</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2198</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2199</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2200</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> 
<span class='linenumber'>2201</span>       </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2202</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2203</span> 
<span class='linenumber'>2204</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2205</span>      * 현재 실행되고 있는 Module의 개수를 반환한다.
<span class='linenumber'>2206</span>      * @returns {Number} 현재 구동중인 Module의 개수
<span class='linenumber'>2207</span>      */</span><span class="WHIT">
<span class='linenumber'>2208</span> </span><span class="WHIT">    </span><span class="NAME">getModuleSize</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2209</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._stack.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2210</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2211</span> 
<span class='linenumber'>2212</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2213</span>      * 명시된 이름에 해당하는 Module을 찾아 그 configuration정보를 반환한다.
<span class='linenumber'>2214</span>      * &lt;p/>
<span class='linenumber'>2215</span>      * 만약 Module이름이 명시되지 않으면 현재 구동중인 Module의 configuration
<span class='linenumber'>2216</span>      * 정보를 반환한다.
<span class='linenumber'>2217</span>      * @param {String} name 찾고자 하는 Module의 이름
<span class='linenumber'>2218</span>      * @returns {Object} 모듈의 configuration정보
<span class='linenumber'>2219</span>      */</span><span class="WHIT">
<span class='linenumber'>2220</span> </span><span class="WHIT">    </span><span class="NAME">getModuleConfig</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2221</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2222</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._registry</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2223</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2224</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2225</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2226</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2227</span> 
<span class='linenumber'>2228</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2229</span>      * 브라우저의 title을 설정한다.
<span class='linenumber'>2230</span>      * @param {String} title 설정할 title값
<span class='linenumber'>2231</span>      */</span><span class="WHIT">
<span class='linenumber'>2232</span> </span><span class="WHIT">    </span><span class="NAME">setTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">title</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2233</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$dom.title</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2234</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.title</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'title'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2235</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.head.insertBefore</span><span class="PUNC">(</span><span class="NAME">this.$dom.title</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.$dom.head.firstChild</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2236</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2237</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.title.removeChild</span><span class="PUNC">(</span><span class="NAME">this.$dom.title.firstChild</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2238</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2239</span> </span><span class="WHIT">      </span><span class="NAME">this.$dom.title.appendChild</span><span class="PUNC">(</span><span class="NAME">document.createTextNode</span><span class="PUNC">(</span><span class="NAME">title</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2240</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2241</span> 
<span class='linenumber'>2242</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2243</span>      * 아이폰일 경우 바탕화면으로 가기를 위한 아이콘을 설정한다.
<span class='linenumber'>2244</span>      * @param {String} path icon에 대한 경로정보
<span class='linenumber'>2245</span>      */</span><span class="WHIT">
<span class='linenumber'>2246</span> </span><span class="WHIT">    </span><span class="NAME">setIcon</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2247</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$dom.icon</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2248</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.icon</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'link'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2249</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.icon.setAttribute</span><span class="PUNC">(</span><span class="STRN">'rel'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'apple-touch-icon'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2250</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.head.appendChild</span><span class="PUNC">(</span><span class="NAME">this.$dom.icon</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2251</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2252</span> </span><span class="WHIT">      </span><span class="NAME">this.$dom.icon.setAttribute</span><span class="PUNC">(</span><span class="STRN">'href'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">        
<span class='linenumber'>2253</span>     </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2254</span> 
<span class='linenumber'>2255</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2256</span>      * 아이폰일 경우 초기 구동시 출력할 splash이미지를 설정한다.
<span class='linenumber'>2257</span>      * @param {String} path Splash이미지에대한 경로
<span class='linenumber'>2258</span>      */</span><span class="WHIT">
<span class='linenumber'>2259</span> </span><span class="WHIT">    </span><span class="NAME">setSplash</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2260</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$dom.splash</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2261</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.splash</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'link'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2262</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.splash.setAttribute</span><span class="PUNC">(</span><span class="STRN">'rel'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'apple-touch-startup-image'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2263</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.head.appendChild</span><span class="PUNC">(</span><span class="NAME">this.$dom.splash</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2264</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2265</span> </span><span class="WHIT">      </span><span class="NAME">this.$dom.splash.setAttribute</span><span class="PUNC">(</span><span class="STRN">'href'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">        
<span class='linenumber'>2266</span>     </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2267</span> 
<span class='linenumber'>2268</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2269</span>      * 명시된 이름으로 StorageContext를 생성하여 반환한다.
<span class='linenumber'>2270</span>      * &lt;p/>
<span class='linenumber'>2271</span>      * 앱의 StorageContext는 이름을 기준으로 생성된다. 만약 이름이 주어지지
<span class='linenumber'>2272</span>      * 않으면 현재 구동중인 앱을 이름을 사용한다.
<span class='linenumber'>2273</span>      * 면약 현재 실행중인 Module이 존재하지 않으면 null을 반환한다.
<span class='linenumber'>2274</span>      * @param {String} name StorageContext 생성을 위한 앱 이름
<span class='linenumber'>2275</span>      * @returns {tau.rt.StorageContext} 해당 앱 이름으로 생성된 Storage context 객체
<span class='linenumber'>2276</span>      * @see tau.rt.StorageContext
<span class='linenumber'>2277</span>      */</span><span class="WHIT">
<span class='linenumber'>2278</span> </span><span class="WHIT">    </span><span class="NAME">createStorageCtx</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2279</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2280</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.StorageContext</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>2281</span>       </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2282</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.StorageContext</span><span class="PUNC">(</span><span class="NAME">this.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2283</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2284</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2285</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2286</span> 
<span class='linenumber'>2287</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2288</span>      * Draws a mask message.
<span class='linenumber'>2289</span>      * @param {String} msg Mask message 
<span class='linenumber'>2290</span>      * @private
<span class='linenumber'>2291</span>      */</span><span class="WHIT">
<span class='linenumber'>2292</span> </span><span class="WHIT">    </span><span class="NAME">_drawMask</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">msg</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2293</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$dom.mask</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2294</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.mask</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2295</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.mask.setAttribute</span><span class="PUNC">(</span><span class="STRN">'style'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'margin-top:100px; text-align:center; font-family: sans-serif'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2296</span> </span><span class="WHIT">        </span><span class="NAME">this.$dom.root.appendChild</span><span class="PUNC">(</span><span class="NAME">this.$dom.mask</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2297</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2298</span> </span><span class="WHIT">      </span><span class="NAME">this.$dom.mask.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">msg</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2299</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2300</span> 
<span class='linenumber'>2301</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2302</span>      * Clears mask.
<span class='linenumber'>2303</span>      * @private
<span class='linenumber'>2304</span>      */</span><span class="WHIT">
<span class='linenumber'>2305</span> </span><span class="WHIT">    </span><span class="NAME">_clearMask</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2306</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$dom.mask</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.$dom.root.removeChild</span><span class="PUNC">(</span><span class="NAME">this.$dom.mask</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2307</span> </span><span class="WHIT">        </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.$dom.mask</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2308</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2309</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2310</span> 
<span class='linenumber'>2311</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2312</span>      * 전체 default theme을 변경한다.
<span class='linenumber'>2313</span>      * &lt;p/>
<span class='linenumber'>2314</span>      * @param {String} themeName Theme 텍스트
<span class='linenumber'>2315</span>      */</span><span class="WHIT">
<span class='linenumber'>2316</span> </span><span class="WHIT">    </span><span class="NAME">setTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2317</span> </span><span class="WHIT">      </span><span class="NAME">this.$themeMgr.setDefaultTheme</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2318</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2319</span> 
<span class='linenumber'>2320</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2321</span>      * config에 적용되어 있는 theme으로 초기화한다.
<span class='linenumber'>2322</span>      */</span><span class="WHIT">
<span class='linenumber'>2323</span> </span><span class="WHIT">    </span><span class="NAME">resetTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2324</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.isMultiApp</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// multi app</span><span class="WHIT">
<span class='linenumber'>2325</span> </span><span class="WHIT">        </span><span class="NAME">this.$themeMgr.resetTheme</span><span class="PUNC">(</span><span class="NAME">this.getModuleConfig</span><span class="PUNC">(</span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2326</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2327</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">context</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getCurrentContext</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2328</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2329</span> </span><span class="WHIT">          </span><span class="NAME">context.resetTheme</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2330</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2331</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2332</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2333</span> </span><span class="WHIT">    
<span class='linenumber'>2334</span>     </span><span class="COMM">/**
<span class='linenumber'>2335</span>      * 명시된 위젯을 Runtime에 등록한다. 등록할 위젯은 반드시
<span class='linenumber'>2336</span>      * {@link tau.rt.EventDelegator}를 상속받아야 한다.
<span class='linenumber'>2337</span>      * @param {tau.rt.EventDelegator} widget 시스템적으로 사용할 Widget객체
<span class='linenumber'>2338</span>      * @throws {TypeError} 명시된 객체가 tau.rt.EventDelegator를 상속받은
<span class='linenumber'>2339</span>      * 클래스가 아닐 경우
<span class='linenumber'>2340</span>      */</span><span class="WHIT">
<span class='linenumber'>2341</span> </span><span class="WHIT">    </span><span class="NAME">addSystemWidget</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">widget</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2342</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">widget</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.rt.EventDelegator</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2343</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="NAME">widget.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>2344</span> </span><span class="WHIT">            </span><span class="STRN">' is not an instance of EventDelegator'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>2345</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2346</span> </span><span class="WHIT">      </span><span class="COMM">// do not setBubble() with Runtime!!</span><span class="WHIT">
<span class='linenumber'>2347</span> </span><span class="WHIT">      </span><span class="NAME">this.$widgets.push</span><span class="PUNC">(</span><span class="NAME">widget</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2348</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">widget</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2349</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2350</span> </span><span class="WHIT">    
<span class='linenumber'>2351</span>     </span><span class="COMM">/**
<span class='linenumber'>2352</span>      * 명시된 클래스에 해당하는 System Widget의 인스턴스를 찾아 반환한다.ㅕ
<span class='linenumber'>2353</span>      * 만약 일치하는 System Widget이 존재하지 않으면 null을 반환한다.
<span class='linenumber'>2354</span>      * @param {Class} clazz 시스템 위젯 클래스
<span class='linenumber'>2355</span>      */</span><span class="WHIT">
<span class='linenumber'>2356</span> </span><span class="WHIT">    </span><span class="NAME">findSystemWidget</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">clazz</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2357</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">widgets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$widgets</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2358</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">widgets.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2359</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">widgets</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">clazz</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2360</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">widgets</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2361</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2362</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2363</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2364</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2365</span> </span><span class="WHIT">    
<span class='linenumber'>2366</span>     </span><span class="COMM">/**
<span class='linenumber'>2367</span>      * Runtime에 등록된 모든 System Widget을 배열형태로 반환한다.
<span class='linenumber'>2368</span>      * @returns {Array} Runtime에 등록된 모든 System Widget
<span class='linenumber'>2369</span>      */</span><span class="WHIT">
<span class='linenumber'>2370</span> </span><span class="WHIT">    </span><span class="NAME">getSystemWidgets</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2371</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$widgets</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2372</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2373</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2374</span> 
<span class='linenumber'>2375</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.Module.prototype */</span><span class="WHIT">
<span class='linenumber'>2376</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Module'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.EventDelegator</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2377</span> </span><span class="WHIT">    </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.rt.Module */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2378</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'>2379</span>        * 모듈에 Badge가 설정되었을 때 발생하는 이벤트이며, 설정된 Badge의 값은
<span class='linenumber'>2380</span>        * payload로 전달 받는다.
<span class='linenumber'>2381</span>        */</span><span class="WHIT">
<span class='linenumber'>2382</span> </span><span class="WHIT">      </span><span class="NAME">EVENT_BADGESET</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'badgeset'</span><span class="WHIT">
<span class='linenumber'>2383</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2384</span> </span><span class="WHIT">    
<span class='linenumber'>2385</span>     </span><span class="COMM">/**
<span class='linenumber'>2386</span>      * 명시된 파라미터를 이용하여 새로운 Module객체를 생성한다.
<span class='linenumber'>2387</span>      * @class
<span class='linenumber'>2388</span>      * Application 또는 Dashboard의 부모클래스
<span class='linenumber'>2389</span>      * &lt;p/>
<span class='linenumber'>2390</span>      * 이 클래스의 인스턴스는 start메소드를 통해 Lifecycle이 시작된다.
<span class='linenumber'>2391</span>      * @constructs
<span class='linenumber'>2392</span>      * @param {tau.rt.Runtime} rt Runtime 인스턴스
<span class='linenumber'>2393</span>      * @param {Object} config Module configuration 객체
<span class='linenumber'>2394</span>      * @throws {Error} rt 또는 config가 명시되지 않았거나 부적절할 경우(null)
<span class='linenumber'>2395</span>      * @extends tau.rt.EventDelegator
<span class='linenumber'>2396</span>      */</span><span class="WHIT">
<span class='linenumber'>2397</span> </span><span class="WHIT">    </span><span class="NAME">Module</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">rt</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//$ tau.rt.Module</span><span class="WHIT">
<span class='linenumber'>2398</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2399</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Module: invalid runtime/config'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2400</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2401</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Module configuration object */</span><span class="WHIT">
<span class='linenumber'>2402</span> </span><span class="WHIT">      </span><span class="NAME">this._config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2403</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Runtime instance */</span><span class="WHIT">
<span class='linenumber'>2404</span> </span><span class="WHIT">      </span><span class="NAME">this._rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2405</span> 
<span class='linenumber'>2406</span> </span><span class="WHIT">      </span><span class="NAME">this.setBubble</span><span class="PUNC">(</span><span class="NAME">this._rt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2407</span> </span><span class="WHIT">      </span><span class="NAME">this._isVisible</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2408</span> </span><span class="WHIT">      </span><span class="NAME">this._isReady</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// set true when theme is loaded</span><span class="WHIT">
<span class='linenumber'>2409</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2410</span> </span><span class="WHIT">    
<span class='linenumber'>2411</span>     </span><span class="COMM">/**
<span class='linenumber'>2412</span>      * 설정된 파라미터의 값에 따라 현재 모듈을 화면에 보이도록 하거나 보이지 않도록 한다.
<span class='linenumber'>2413</span>      * &lt;code>visible&lt;/code> 값이 false일 경우 현재 모듈을 화면에서 사라지며 CSS 스타일
<span class='linenumber'>2414</span>      * Proeprty인 display 값이 'none'으로 처리되어 실제 DOM Operation 도 발생하지
<span class='linenumber'>2415</span>      * 않는다.&lt;p/>
<span class='linenumber'>2416</span>      * Multi-App 모드일 경우 Runtime에서 현재 실행중인 App을 background나 foreground
<span class='linenumber'>2417</span>      * 로 처리할 때 이 메소드를 이용한다.   
<span class='linenumber'>2418</span>      * @param {Boolean} visible if true, module is rendered on screen
<span class='linenumber'>2419</span>      */</span><span class="WHIT">
<span class='linenumber'>2420</span> </span><span class="WHIT">    </span><span class="NAME">setVisible</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">visible</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2421</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2422</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">visible</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2423</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">anim</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._config.animation</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2424</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isUndefined</span><span class="PUNC">(</span><span class="NAME">anim</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">anim</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// animation</span><span class="WHIT">
<span class='linenumber'>2425</span> </span><span class="WHIT">          </span><span class="NAME">tau.fx.fadeIn</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2426</span> </span><span class="WHIT">            </span><span class="NAME">duration</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">300</span><span class="WHIT">
<span class='linenumber'>2427</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2428</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2429</span> </span><span class="WHIT">          </span><span class="NAME">dom.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2430</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2431</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2432</span> </span><span class="WHIT">        </span><span class="NAME">dom.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'none'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2433</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2434</span> </span><span class="WHIT">      </span><span class="NAME">this._isVisible</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">visible</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2435</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2436</span> </span><span class="WHIT">    
<span class='linenumber'>2437</span>     </span><span class="COMM">/**
<span class='linenumber'>2438</span>      * 이벤트 서브시스템 메소드를 Override하며 현재 SceneController에서 Scene을
<span class='linenumber'>2439</span>      * 로딩하여 Drawing이 완료됐을 때 {@link tau.rt.Event.SCENEDRAWN} 이벤트를
<span class='linenumber'>2440</span>      * 받아 화면에 출력하는 기능을 수행한다. 
<span class='linenumber'>2441</span>      * @override
<span class='linenumber'>2442</span>      */</span><span class="WHIT">
<span class='linenumber'>2443</span> </span><span class="WHIT">    </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2444</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2445</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.SCENEDRAWN</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">// async call</span><span class="WHIT">
<span class='linenumber'>2446</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._isVisible</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2447</span> </span><span class="WHIT">            </span><span class="NAME">this.setVisible</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2448</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2449</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2450</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_THEME_ENABLED</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>2451</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._isReady</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this._rootController.$isStarted</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2452</span> </span><span class="WHIT">            </span><span class="NAME">this._rootController.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2453</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2454</span> </span><span class="WHIT">          </span><span class="NAME">this._isReady</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2455</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2456</span> </span><span class="WHIT">        </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>2457</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2458</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2459</span> </span><span class="WHIT">      </span><span class="NAME">tau.rt.Module.$super.propagateEvent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2460</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2461</span> </span><span class="WHIT">    
<span class='linenumber'>2462</span>     </span><span class="COMM">/**
<span class='linenumber'>2463</span>      * 현재 Module의 id를 반환한다.
<span class='linenumber'>2464</span>      * @returns {String} Module id
<span class='linenumber'>2465</span>      */</span><span class="WHIT">
<span class='linenumber'>2466</span> </span><span class="WHIT">    </span><span class="NAME">getId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2467</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._id</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2468</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2469</span> 
<span class='linenumber'>2470</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2471</span>      * 현재 Module의 이름을 반환한다.
<span class='linenumber'>2472</span>      * @returns {String} Module 이름
<span class='linenumber'>2473</span>      */</span><span class="WHIT">
<span class='linenumber'>2474</span> </span><span class="WHIT">    </span><span class="NAME">getName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2475</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._config.name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2476</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2477</span> 
<span class='linenumber'>2478</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2479</span>      * 현재 Module의 configuration객체를 반환한다.
<span class='linenumber'>2480</span>      * @returns {Object} Module configuration
<span class='linenumber'>2481</span>      */</span><span class="WHIT">
<span class='linenumber'>2482</span> </span><span class="WHIT">    </span><span class="NAME">getConfig</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2483</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._config</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2484</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2485</span> 
<span class='linenumber'>2486</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2487</span>      * 사용자가 구현한 앱의 RootController를 반환한다.
<span class='linenumber'>2488</span>      * @returns {Object} Module이 구동될 때 실행되는 controller 객체
<span class='linenumber'>2489</span>      */</span><span class="WHIT">
<span class='linenumber'>2490</span> </span><span class="WHIT">    </span><span class="NAME">getRootController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2491</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._rootController</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2492</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2493</span> 
<span class='linenumber'>2494</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2495</span>      * Event System상에서 Module의 현재 이벤트를 처리하게 될 EventDelegator를
<span class='linenumber'>2496</span>      * 찾아 반환한다. 만약 ModalController가 실행중이면 이 Controller의
<span class='linenumber'>2497</span>      * 객체를 반환하고 그렇지 않으면 root controlle를 반환한다.
<span class='linenumber'>2498</span>      * @returns {tau.rt.EventDelegator} 현재 이벤트를 처리하게 될
<span class='linenumber'>2499</span>      * EventDelegator객체
<span class='linenumber'>2500</span>      */</span><span class="WHIT">
<span class='linenumber'>2501</span> </span><span class="WHIT">    </span><span class="NAME">getActiveDelegator</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2502</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ctrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.modalCtrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2503</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ctrl</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">ctrl.hasModals</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ctrl</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this._rootController</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2504</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2505</span> 
<span class='linenumber'>2506</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2507</span>      * 데이터를 persistent하게 저장하기 위한 현재 모듈의 StorageManager를
<span class='linenumber'>2508</span>      * 반환한다.
<span class='linenumber'>2509</span>      * @returns {tau.rt.StorageContext} 현재 모듈의
<span class='linenumber'>2510</span>      * {@link tau.rt.StorageContext} 객체
<span class='linenumber'>2511</span>      */</span><span class="WHIT">
<span class='linenumber'>2512</span> </span><span class="WHIT">    </span><span class="NAME">getStorageCtx</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2513</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._storageCtx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2514</span> </span><span class="WHIT">        </span><span class="COMM">/** @private Storage context for the given module */</span><span class="WHIT">
<span class='linenumber'>2515</span> </span><span class="WHIT">        </span><span class="NAME">this._storageCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.StorageContext</span><span class="PUNC">(</span><span class="NAME">this.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>2516</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2517</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._storageCtx</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2518</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2519</span> 
<span class='linenumber'>2520</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2521</span>      * 현재 Module에 대한 Badge 문자열 또는 숫자를
<span class='linenumber'>2522</span>      * persistent하게 저장한다.
<span class='linenumber'>2523</span>      * @param {String|Number} value 설정할 Badge 값
<span class='linenumber'>2524</span>      * @returns {Boolean} 성공적으로 설정되었으면 true를 반환
<span class='linenumber'>2525</span>      */</span><span class="WHIT">
<span class='linenumber'>2526</span> </span><span class="WHIT">    </span><span class="NAME">setBadge</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2527</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getStorageCtx</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">set</span><span class="PUNC">(</span><span class="STRN">'$badge'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2528</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">result</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2529</span> </span><span class="WHIT">        </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Module.EVENT_BADGESET</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2530</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2531</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">result</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2532</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2533</span> 
<span class='linenumber'>2534</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2535</span>      * 설정된 Badge값을 반환한다.
<span class='linenumber'>2536</span>      * @returns {String|Number} 설정된 Badge 값
<span class='linenumber'>2537</span>      */</span><span class="WHIT">
<span class='linenumber'>2538</span> </span><span class="WHIT">    </span><span class="NAME">getBadge</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2539</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.getStorageCtx</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="STRN">'$badge'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2540</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2541</span> 
<span class='linenumber'>2542</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2543</span>      * 설정된 Badge값을 제거한다.
<span class='linenumber'>2544</span>      * @returns {Boolean} 성공적으로 제거되었으면 true를 반환
<span class='linenumber'>2545</span>      */</span><span class="WHIT">
<span class='linenumber'>2546</span> </span><span class="WHIT">    </span><span class="NAME">removeBadge</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2547</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getStorageCtx</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="STRN">'$badge'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2548</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">result</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2549</span> </span><span class="WHIT">        </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Module.EVENT_BADGESET</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2550</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2551</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">result</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2552</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2553</span> </span><span class="WHIT">    
<span class='linenumber'>2554</span>     </span><span class="COMM">/**
<span class='linenumber'>2555</span>      * 현재 모듈의 Lifecycle이 시작되었는지를 확인한다. 만약 &lt;code>true&lt;/code>를 반환하면
<span class='linenumber'>2556</span>      * 현재 모듈과 Controller의 Lifecycle 시작되었음을 의미한다.
<span class='linenumber'>2557</span>      * @returns {Boolean} 모듈의 Lifecycle이 시작되었으면 &lt;code>true&lt;/code>를 반환
<span class='linenumber'>2558</span>      */</span><span class="WHIT">
<span class='linenumber'>2559</span> </span><span class="WHIT">    </span><span class="NAME">isBusy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2560</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._rootController</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._rootController.$isStarted</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2561</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2562</span> 
<span class='linenumber'>2563</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2564</span>      * Module의 Lifecycle을 시작한다. 모듈의 Lifecycle이 시작되면 먼저 RootController
<span class='linenumber'>2565</span>      * 의 존재를 확인하고 설정된 RootController가 존재하면 RootController의 Lifecycle
<span class='linenumber'>2566</span>      * 도 시작한다.
<span class='linenumber'>2567</span>      * @throws {ReferenceError} RootController가 설정되지 않았을 경우
<span class='linenumber'>2568</span>      */</span><span class="WHIT">
<span class='linenumber'>2569</span> </span><span class="WHIT">    </span><span class="NAME">start</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2570</span> </span><span class="WHIT">      </span><span class="COMM">// load theme asynchronously, process in parallel</span><span class="WHIT">
<span class='linenumber'>2571</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2572</span> </span><span class="WHIT">      </span><span class="COMM">// Push module element to top of DOM stack</span><span class="WHIT">
<span class='linenumber'>2573</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">dom.parentNode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2574</span> </span><span class="WHIT">        </span><span class="NAME">tau.util.dom.pushElement</span><span class="PUNC">(</span><span class="NAME">this._rt.$dom.root</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2575</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2576</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._rootController</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2577</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ReferenceError</span><span class="PUNC">(</span><span class="STRN">'RootController is not set on module: '</span><span class="WHIT"> 
<span class='linenumber'>2578</span>             </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2579</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2580</span> </span><span class="WHIT">      </span><span class="COMM">// Link Event Delegators if the app wasn't preivously started</span><span class="WHIT">
<span class='linenumber'>2581</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._rootController.$parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2582</span> </span><span class="WHIT">        </span><span class="NAME">this._rootController.setParent</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2583</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2584</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.isBusy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2585</span> </span><span class="WHIT">        </span><span class="NAME">dom.style.opacity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// must retain the space!</span><span class="WHIT">
<span class='linenumber'>2586</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._isReady</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//theme is loaded asynchronously! See event handler</span><span class="WHIT">
<span class='linenumber'>2587</span> </span><span class="WHIT">          </span><span class="NAME">this._rootController.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2588</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2589</span> </span><span class="WHIT">        </span><span class="NAME">this._isReady</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2590</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2591</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2592</span> 
<span class='linenumber'>2593</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2594</span>      * 현재 모듈의 Lifecycle을 중지시킨다. 내부적으로 Module의
<span class='linenumber'>2595</span>      * destory메소드가 호출되며 이 메소드 내에서 더이상
<span class='linenumber'>2596</span>      * 사용하지 않는 리소스들을 clear시킨다.
<span class='linenumber'>2597</span>      * &lt;p/>
<span class='linenumber'>2598</span>      * Event hierarch상의 모든 관계도 이 메소드가 호출됨과
<span class='linenumber'>2599</span>      * 동시에 해제 된다.
<span class='linenumber'>2600</span>      */</span><span class="WHIT">
<span class='linenumber'>2601</span> </span><span class="WHIT">    </span><span class="NAME">stop</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2602</span> </span><span class="WHIT">      </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2603</span> </span><span class="WHIT">        </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$themeMgr.unloadTheme</span><span class="PUNC">(</span><span class="NAME">this.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2604</span> </span><span class="WHIT">        </span><span class="COMM">// Verify & run user implementation of destroy()</span><span class="WHIT">
<span class='linenumber'>2605</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._rootController</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2606</span> </span><span class="WHIT">          </span><span class="NAME">this._rootController.doDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2607</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2608</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Destruction: \"'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._config.classname</span><span class="WHIT">
<span class='linenumber'>2609</span> </span><span class="WHIT">              </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'\" is an invalid controller'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2610</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2611</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">finally</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2612</span> </span><span class="WHIT">        </span><span class="COMM">// Module resource cleanup</span><span class="WHIT">
<span class='linenumber'>2613</span> </span><span class="WHIT">        </span><span class="NAME">this.removeBubble</span><span class="PUNC">(</span><span class="NAME">this._rt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2614</span> </span><span class="WHIT">        </span><span class="NAME">this._rootController.$parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2615</span> </span><span class="WHIT">        </span><span class="NAME">this._rootController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2616</span> </span><span class="WHIT">        </span><span class="NAME">this._storageCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2617</span> </span><span class="WHIT">        </span><span class="NAME">this._config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2618</span> </span><span class="WHIT">        </span><span class="NAME">this._rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2619</span> </span><span class="WHIT">        </span><span class="NAME">this._id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2620</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.modalCtrl</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//terminates the lifecycle of ModalSceneController</span><span class="WHIT">
<span class='linenumber'>2621</span> </span><span class="WHIT">          </span><span class="NAME">this.modalCtrl.doDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2622</span> </span><span class="WHIT">          </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.modalCtrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2623</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2624</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._dom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2625</span> </span><span class="WHIT">          </span><span class="NAME">tau.util.dom.removeElements</span><span class="PUNC">(</span><span class="NAME">this._dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2626</span> </span><span class="WHIT">          </span><span class="NAME">this._dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2627</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2628</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2629</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2630</span> 
<span class='linenumber'>2631</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2632</span>      * 현재 Module이 위치하고 있는 DOM 앨리먼트를 찾아
<span class='linenumber'>2633</span>      * 반환한다.
<span class='linenumber'>2634</span>      * @returns {Object} DOM 앨리먼트
<span class='linenumber'>2635</span>      */</span><span class="WHIT">
<span class='linenumber'>2636</span> </span><span class="WHIT">    </span><span class="NAME">getDOM</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2637</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._dom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2638</span> </span><span class="WHIT">        </span><span class="COMM">/** @private Frame DOM element */</span><span class="WHIT">
<span class='linenumber'>2639</span> </span><span class="WHIT">        </span><span class="NAME">this._dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2640</span> </span><span class="WHIT">        </span><span class="NAME">this._dom.setAttribute</span><span class="PUNC">(</span><span class="STRN">'id'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Defined in App/Dashboard</span><span class="WHIT">
<span class='linenumber'>2641</span> </span><span class="WHIT">        </span><span class="NAME">tau.util.dom.addClass</span><span class="PUNC">(</span><span class="NAME">this._dom</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'tau-application'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2642</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2643</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._dom</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2644</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2645</span> </span><span class="WHIT">    
<span class='linenumber'>2646</span>     </span><span class="COMM">/**
<span class='linenumber'>2647</span>      * 현재 모듈과 연관된 ModalSceneController 인스턴스를
<span class='linenumber'>2648</span>      * 반환한다.
<span class='linenumber'>2649</span>      * @returns {tau.ui.ModalSceneController} ModalSceneController 객체
<span class='linenumber'>2650</span>      */</span><span class="WHIT">
<span class='linenumber'>2651</span> </span><span class="WHIT">    </span><span class="NAME">getModalController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2652</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.modalCtrl</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// lazy construction</span><span class="WHIT">
<span class='linenumber'>2653</span> </span><span class="WHIT">        </span><span class="NAME">this.modalCtrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.ModalSceneController</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2654</span> </span><span class="WHIT">        </span><span class="NAME">this.modalCtrl.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2655</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2656</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.modalCtrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2657</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2658</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2659</span> 
<span class='linenumber'>2660</span> 
<span class='linenumber'>2661</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.Application.prototype */</span><span class="WHIT">
<span class='linenumber'>2662</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Application'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.Module</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2663</span> </span><span class="WHIT">    </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2664</span> </span><span class="WHIT">      </span><span class="NAME">CONFIG</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2665</span> </span><span class="WHIT">        </span><span class="NAME">require</span><span class="WHIT">       </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'/main.js'</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="COMM">// Class source path (default: /main.js)</span><span class="WHIT">
<span class='linenumber'>2666</span> </span><span class="WHIT">        </span><span class="NAME">icon</span><span class="WHIT">          </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'/icon.png'</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="COMM">// Icon resource path (default: /icon.png)</span><span class="WHIT">
<span class='linenumber'>2667</span> </span><span class="WHIT">        </span><span class="NAME">version</span><span class="WHIT">       </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'1.0.0'</span><span class="PUNC">,</span><span class="WHIT">      </span><span class="COMM">// Version (default: 1.0.0)</span><span class="WHIT">
<span class='linenumber'>2668</span> </span><span class="WHIT">        </span><span class="NAME">vendor</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Company'</span><span class="PUNC">,</span><span class="WHIT">    </span><span class="COMM">// Vendor name (default: Company)</span><span class="WHIT">
<span class='linenumber'>2669</span> 
<span class='linenumber'>2670</span> </span><span class="WHIT">        </span><span class="COMM">/* TODO: Currently unused */</span><span class="WHIT">
<span class='linenumber'>2671</span> </span><span class="WHIT">        </span><span class="NAME">orientation</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'portrait'</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="COMM">// Sceen orientation (portrait/landscape)</span><span class="WHIT">
<span class='linenumber'>2672</span> </span><span class="WHIT">        </span><span class="NAME">language</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'ko'</span><span class="PUNC">,</span><span class="WHIT">         </span><span class="COMM">// Default language</span><span class="WHIT">
<span class='linenumber'>2673</span> </span><span class="WHIT">        </span><span class="NAME">region</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'KR'</span><span class="WHIT">          </span><span class="COMM">// Default regional settings</span><span class="WHIT">
<span class='linenumber'>2674</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2675</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2676</span> </span><span class="WHIT">    
<span class='linenumber'>2677</span>     </span><span class="COMM">/**
<span class='linenumber'>2678</span>      * 명시된 파라미터를 이용하여 새로운 Application객체를
<span class='linenumber'>2679</span>      * 생성한다.
<span class='linenumber'>2680</span>      * @class
<span class='linenumber'>2681</span>      * 개발자들이 개발한 앱을 추상화한 클래스이며 관련된 기능들을
<span class='linenumber'>2682</span>      * 정의한다.
<span class='linenumber'>2683</span>      * &lt;p/>
<span class='linenumber'>2684</span>      * Application은 관련된 모듈을 Async방식으로
<span class='linenumber'>2685</span>      * 로딩한다. 따라서 Application객체의 start메소드가
<span class='linenumber'>2686</span>      * 호출되어다 하더라도 즉시 실행되는 것이 아니라
<span class='linenumber'>2687</span>      * Application에서 필요로 하는 리소스가 모두 로딩된
<span class='linenumber'>2688</span>      * 후에 Lifecycle을 시작한다.
<span class='linenumber'>2689</span>      * @constructs
<span class='linenumber'>2690</span>      * @extends tau.rt.Module
<span class='linenumber'>2691</span>      * @param {tau.rt.Runtime} rt Mobello Runtime 객체
<span class='linenumber'>2692</span>      * @param {Object} config Application configuration 객체
<span class='linenumber'>2693</span>      * @param {String} [config.require = '/main.js'] App실행시
<span class='linenumber'>2694</span>      * 로딩할 메인 js 파일
<span class='linenumber'>2695</span>      * @param {String} [config.icon = '/icon.png'] App의 default
<span class='linenumber'>2696</span>      * 아이콘, 아이폰의 경우 바탕화면에 생성할 아이콘에 해당
<span class='linenumber'>2697</span>      * @param {String} [config.version = '1.0.0'] App의 default 버전
<span class='linenumber'>2698</span>      * @param {String} [config.vendor = 'Company'] App 제작사 명
<span class='linenumber'>2699</span>      * @param {String} config.classname App실행시 최초로 로딩할
<span class='linenumber'>2700</span>      * Controller클래스 명(full class name)
<span class='linenumber'>2701</span>      * @param {String} config.title 화면에 출력할 앱 이름
<span class='linenumber'>2702</span>      * @param {String} [config.timeout] Scene을 로딩하기 위해 소요되는
<span class='linenumber'>2703</span>      * 최대 시간(millisecond). 생략할 경우 브라우저 timeout사용
<span class='linenumber'>2704</span>      */</span><span class="WHIT">
<span class='linenumber'>2705</span> </span><span class="WHIT">    </span><span class="NAME">Application</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">rt</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2706</span> </span><span class="WHIT">      </span><span class="NAME">this._config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Application.CONFIG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// override default</span><span class="WHIT">
<span class='linenumber'>2707</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.isNamespace</span><span class="PUNC">(</span><span class="NAME">config.classname</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2708</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Application: invalid application class name, '</span><span class="WHIT"> 
<span class='linenumber'>2709</span>             </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">config.classname</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2710</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.isNamespace</span><span class="PUNC">(</span><span class="NAME">config.name</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2711</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Application: invalid module name, \"'</span><span class="WHIT"> 
<span class='linenumber'>2712</span>             </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">config.name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'\"'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2713</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2714</span> 
<span class='linenumber'>2715</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Unique module id */</span><span class="WHIT">
<span class='linenumber'>2716</span> </span><span class="WHIT">      </span><span class="NAME">this._id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.genId</span><span class="PUNC">(</span><span class="STRN">'m'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2717</span> 
<span class='linenumber'>2718</span> </span><span class="WHIT">      </span><span class="COMM">/** @private User application */</span><span class="WHIT">
<span class='linenumber'>2719</span> </span><span class="WHIT">      </span><span class="NAME">this._rootController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2720</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2721</span> </span><span class="WHIT">    
<span class='linenumber'>2722</span>     </span><span class="COMM">/**
<span class='linenumber'>2723</span>      * 부모클래스의 start메소드를 오버라이드하며 Application
<span class='linenumber'>2724</span>      * 실행시 필요한 외부 라이브러리들을 먼저 로딩한 후
<span class='linenumber'>2725</span>      * Lifecycle을 시작한다.
<span class='linenumber'>2726</span>      * @see tau.rt.Module#start
<span class='linenumber'>2727</span>      */</span><span class="WHIT">
<span class='linenumber'>2728</span> </span><span class="WHIT">    </span><span class="NAME">start</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2729</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2730</span> </span><span class="WHIT">        </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2731</span> </span><span class="WHIT">        </span><span class="NAME">dependencies</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.DependencyChain</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2732</span> </span><span class="WHIT">      </span><span class="NAME">dependencies.setCaching</span><span class="PUNC">(</span><span class="NAME">config.dev</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2733</span> </span><span class="WHIT">      </span><span class="COMM">// sets default fallback Depenedency</span><span class="WHIT">
<span class='linenumber'>2734</span> </span><span class="WHIT">      </span><span class="NAME">dependencies.setFallback</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2735</span> </span><span class="WHIT">        </span><span class="NAME">resolve</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2736</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">clazz</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2737</span> </span><span class="WHIT">          </span><span class="COMM">// All import completed: disable require, create class, & callback</span><span class="WHIT">
<span class='linenumber'>2738</span> </span><span class="WHIT">          </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">$require</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2739</span> </span><span class="WHIT">          </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2740</span> </span><span class="WHIT">            </span><span class="NAME">clazz</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$class.forName</span><span class="PUNC">(</span><span class="NAME">config.classname</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2741</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2742</span> </span><span class="WHIT">            </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Application: Could not find Application'</span><span class="WHIT">
<span class='linenumber'>2743</span> </span><span class="WHIT">                </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">' class definition: \"'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">config.classname</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'\"'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2744</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2745</span> </span><span class="WHIT">    
<span class='linenumber'>2746</span>           </span><span class="COMM">// Create an instance of application implementation class</span><span class="WHIT">
<span class='linenumber'>2747</span> </span><span class="WHIT">          </span><span class="NAME">app._rootController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">clazz</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2748</span> </span><span class="WHIT">    
<span class='linenumber'>2749</span>           </span><span class="COMM">// Ensure the main application extends a controller</span><span class="WHIT">
<span class='linenumber'>2750</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">app._rootController</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2751</span> </span><span class="WHIT">            </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Application: Main application \"'</span><span class="WHIT"> 
<span class='linenumber'>2752</span>                 </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">config.classname</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'\" must extend a tau.ui.Controller'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2753</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2754</span> </span><span class="WHIT">          </span><span class="NAME">tau.rt.Application.$super.start.apply</span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2755</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2756</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2757</span> </span><span class="WHIT">      
<span class='linenumber'>2758</span>       </span><span class="COMM">/**
<span class='linenumber'>2759</span>        * Application실행시 필요한 자바스크립트 파일을
<span class='linenumber'>2760</span>        * 로딩한다.
<span class='linenumber'>2761</span>        * &lt;p/>
<span class='linenumber'>2762</span>        * Runtime으로 하여금 명시된 URL의 자바스크립트 라이브러리(lib)를 로딩
<span class='linenumber'>2763</span>        * 하도록 한다. $require로 로딩하는 자바스크립트는
<span class='linenumber'>2764</span>        * 명시된 순서대로 로딩될 수 있도록 Depth-first 알고리즘에 의해
<span class='linenumber'>2765</span>        * 로딩순서를 보장한다. 따라서 로딩되는 외부 라이브러리에서
<span class='linenumber'>2766</span>        * $require를 통해 또 다른 파일을 로딩하더라도 그
<span class='linenumber'>2767</span>        * 로딩순서를 보장해 준다.&lt;p/>
<span class='linenumber'>2768</span>        * $require의 파라미터로 복수개의 라이브러리를 comma(,) 로 분리하여
<span class='linenumber'>2769</span>        * 기술할 수도 있다.
<span class='linenumber'>2770</span>        * &lt;p/>
<span class='linenumber'>2771</span>        * 주의: $require API는 스크립트파일이 로딩되는 시점에만
<span class='linenumber'>2772</span>        * 유효하며, 모든 스크립트가 로딩이 완료된 후에는 사용이
<span class='linenumber'>2773</span>        * 불가능하다.
<span class='linenumber'>2774</span>        * @example
<span class='linenumber'>2775</span>        * // Script "lib1.js" & "lib2.js" loaded in sequence. Any $require 
<span class='linenumber'>2776</span>        * // defintions in "lib1.js" will be loaded prior to "lib2.js"
<span class='linenumber'>2777</span>        * $require('/lib1.js');
<span class='linenumber'>2778</span>        * $require('/lib2.js');
<span class='linenumber'>2779</span>        * ...
<span class='linenumber'>2780</span>        * $class('MyClass').define({
<span class='linenumber'>2781</span>        *   MyClass() {
<span class='linenumber'>2782</span>        *     $require('/lib3.js'); // *Undefined* Not available post file load
<span class='linenumber'>2783</span>        *   }
<span class='linenumber'>2784</span>        * });
<span class='linenumber'>2785</span>        * @example
<span class='linenumber'>2786</span>        * $require('lib1.js', 'lib2.js'); // you can specify this way
<span class='linenumber'>2787</span>        *
<span class='linenumber'>2788</span>        * @param {String} lib JavaScript dependent source URL
<span class='linenumber'>2789</span>        * @see $class
<span class='linenumber'>2790</span>        */</span><span class="WHIT">
<span class='linenumber'>2791</span> </span><span class="WHIT">      </span><span class="NAME">$require</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">lib</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2792</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2793</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">_resolvePath</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2794</span> </span><span class="WHIT">          </span><span class="NAME">dependencies.addDependency</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Dependency</span><span class="PUNC">(</span><span class="NAME">config.name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">src</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2795</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2796</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2797</span> </span><span class="WHIT">    
<span class='linenumber'>2798</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.isArray</span><span class="PUNC">(</span><span class="NAME">config.require</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2799</span> </span><span class="WHIT">        </span><span class="NAME">config.require</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">config.require</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2800</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2801</span> </span><span class="WHIT">      </span><span class="NAME">$require.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config.require</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2802</span> </span><span class="WHIT">      </span><span class="NAME">dependencies.resolve</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2803</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2804</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2805</span> 
<span class='linenumber'>2806</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.DependencyChain.prototype */</span><span class="WHIT">
<span class='linenumber'>2807</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.DependencyChain'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2808</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2809</span>      * 새로운 객체를 생성하며 다음과 같이 DependencyChain을 사용할 수 있다.
<span class='linenumber'>2810</span>      * @example
<span class='linenumber'>2811</span>      * var app = // app name
<span class='linenumber'>2812</span>      * var chain = tau.rt.DependencyChain();
<span class='linenumber'>2813</span>      * chain.setFalllback({
<span class='linenumber'>2814</span>      *   resolve: function (context) {
<span class='linenumber'>2815</span>      *     // do default handling
<span class='linenumber'>2816</span>      *   }
<span class='linenumber'>2817</span>      * });
<span class='linenumber'>2818</span>      * chain.addDependency(new Dependency(app, 'actualfilepath'));
<span class='linenumber'>2819</span>      * chain.addDependency(new Dependency(app, 'actualfilepath'));
<span class='linenumber'>2820</span>      * ...
<span class='linenumber'>2821</span>      * chain.resolve();
<span class='linenumber'>2822</span>      * 
<span class='linenumber'>2823</span>      * @class
<span class='linenumber'>2824</span>      * 연관성이 있는 클래스들을 로딩하기 위한  Chain을
<span class='linenumber'>2825</span>      * 구성하고 resolve 메소드를 호출하면 Chain으로 구성된
<span class='linenumber'>2826</span>      * 라이브러리들을 순서대로 로딩될 수 있도록 보장한다.
<span class='linenumber'>2827</span>      * @constructs
<span class='linenumber'>2828</span>      */</span><span class="WHIT">
<span class='linenumber'>2829</span> </span><span class="WHIT">    </span><span class="NAME">DependencyChain</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2830</span> </span><span class="WHIT">      </span><span class="NAME">this._offset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._index</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// track current resolve position</span><span class="WHIT">
<span class='linenumber'>2831</span> </span><span class="WHIT">      </span><span class="NAME">this._fb</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// fallback dependency</span><span class="WHIT">
<span class='linenumber'>2832</span> </span><span class="WHIT">      </span><span class="NAME">this._dependencies</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2833</span> </span><span class="WHIT">      </span><span class="NAME">this.$opts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2834</span> </span><span class="WHIT">          </span><span class="NAME">noCache</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2835</span> </span><span class="WHIT">          </span><span class="NAME">autoUnlaod</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2836</span> </span><span class="WHIT">          </span><span class="NAME">timeout</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">30000</span><span class="WHIT"> </span><span class="COMM">// 30 seconds</span><span class="WHIT">
<span class='linenumber'>2837</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2838</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2839</span> </span><span class="WHIT">    
<span class='linenumber'>2840</span>     </span><span class="COMM">/**
<span class='linenumber'>2841</span>      * Default Dependency객체를 설정한다. 이 객체는 모든
<span class='linenumber'>2842</span>      * Denendency가 resolve고 더이상 실행할 Dependency가
<span class='linenumber'>2843</span>      * 존재하지 않을 경우 최종적으로 수행된다.
<span class='linenumber'>2844</span>      * @param {tau.rt.Dependency} fb default fallback Dependency 객체
<span class='linenumber'>2845</span>      */</span><span class="WHIT">
<span class='linenumber'>2846</span> </span><span class="WHIT">    </span><span class="NAME">setFallback</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fb</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2847</span> </span><span class="WHIT">      </span><span class="NAME">this._fb</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">fb</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2848</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2849</span> </span><span class="WHIT">    
<span class='linenumber'>2850</span>     </span><span class="COMM">/**
<span class='linenumber'>2851</span>      * 로딩된 자바스크립트 라이브러리를 캐싱할 것인지를
<span class='linenumber'>2852</span>      * 설정한다. 기본 값은 true이다.
<span class='linenumber'>2853</span>      * @param {Boolean} [state = true] false이면 Caching을 수행하지 않는다.
<span class='linenumber'>2854</span>      */</span><span class="WHIT">
<span class='linenumber'>2855</span> </span><span class="WHIT">    </span><span class="NAME">setCaching</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">state</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2856</span> </span><span class="WHIT">      </span><span class="NAME">this.$opts.noCache</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">state</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2857</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2858</span> </span><span class="WHIT">    
<span class='linenumber'>2859</span>     </span><span class="COMM">/**
<span class='linenumber'>2860</span>      * 스크립트가 로딩된 후에 자동으로 로딩된 스크립트를
<span class='linenumber'>2861</span>      * unloading한다. 기본값은 false이다.
<span class='linenumber'>2862</span>      * @param {Boolean} [state = false] true이면 로딩된 스크립트를
<span class='linenumber'>2863</span>      * 자동으로 unloading
<span class='linenumber'>2864</span>      */</span><span class="WHIT">
<span class='linenumber'>2865</span> </span><span class="WHIT">    </span><span class="NAME">setAutoUnloading</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">state</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2866</span> </span><span class="WHIT">      </span><span class="NAME">this.$opts.autoUnload</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">state</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2867</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2868</span> </span><span class="WHIT">    
<span class='linenumber'>2869</span>     </span><span class="COMM">/**
<span class='linenumber'>2870</span>      * 스크립트가 로딩 완료될때 까지의 시간을 나타내며 millisecond로 표현한다.
<span class='linenumber'>2871</span>      * @param {Number} [timeout] 스크립트가 로딩 완료될때 까지의 시간
<span class='linenumber'>2872</span>      */</span><span class="WHIT">
<span class='linenumber'>2873</span> </span><span class="WHIT">    </span><span class="NAME">setTimeout</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">timeout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2874</span> </span><span class="WHIT">      </span><span class="NAME">this.$opts.timeout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">timeout</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2875</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2876</span> </span><span class="WHIT">    
<span class='linenumber'>2877</span>     </span><span class="COMM">/**
<span class='linenumber'>2878</span>      * Dependency객체를 추가한다. DependencyChain에 추가되는
<span class='linenumber'>2879</span>      * Dependency객체는 추가되는 순서대로 resolve된다.
<span class='linenumber'>2880</span>      * @param {tau.rt.Dependency} dependency 추가할 Dependency 객체
<span class='linenumber'>2881</span>      * @see tau.rt.Dependency
<span class='linenumber'>2882</span>      */</span><span class="WHIT">
<span class='linenumber'>2883</span> </span><span class="WHIT">    </span><span class="NAME">addDependency</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dependency</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2884</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">suffix</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._dependencies.splice</span><span class="PUNC">(</span><span class="NAME">this._offset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._index</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2885</span> </span><span class="WHIT">      </span><span class="NAME">this._dependencies.push</span><span class="PUNC">(</span><span class="NAME">dependency</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2886</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">suffix.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2887</span> </span><span class="WHIT">        </span><span class="NAME">this._dependencies.push</span><span class="PUNC">(</span><span class="NAME">suffix</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2888</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2889</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2890</span> </span><span class="WHIT">    
<span class='linenumber'>2891</span>     </span><span class="COMM">/**
<span class='linenumber'>2892</span>      * Dependency로 추가된 외부 라이브러리들의 로딩작업을
<span class='linenumber'>2893</span>      * 수행한다. DependencyChain은 등록된 Dependency의
<span class='linenumber'>2894</span>      * resolve순서를 보장한다.
<span class='linenumber'>2895</span>      */</span><span class="WHIT">
<span class='linenumber'>2896</span> </span><span class="WHIT">    </span><span class="NAME">resolve</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2897</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">that</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2898</span> </span><span class="WHIT">      </span><span class="COMM">// context object should have &lt;code>resolveNext&lt;/code> method!!! </span><span class="WHIT">
<span class='linenumber'>2899</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">context</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// context object which is created on the fly</span><span class="WHIT">
<span class='linenumber'>2900</span> </span><span class="WHIT">        </span><span class="NAME">getDependencies</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// returns all the dependency objects</span><span class="WHIT">
<span class='linenumber'>2901</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">that._dependencies</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2902</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2903</span> </span><span class="WHIT">        </span><span class="NAME">resolveNext</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// resolves next dependency object</span><span class="WHIT">
<span class='linenumber'>2904</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">current</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">that._offset</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2905</span> </span><span class="WHIT">          </span><span class="NAME">that._index</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// reset index</span><span class="WHIT">
<span class='linenumber'>2906</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">current</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">that._dependencies.length</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2907</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dependency</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">that._dependencies</span><span class="PUNC">[</span><span class="NAME">current</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2908</span> </span><span class="WHIT">            </span><span class="NAME">dependency.resolve</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2909</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">that._fb</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">current</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">that._dependencies.length</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2910</span> </span><span class="WHIT">            </span><span class="NAME">that._fb.resolve</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2911</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2912</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2913</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.$opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2914</span> </span><span class="WHIT">      </span><span class="NAME">context.resolveNext</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2915</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2916</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2917</span> 
<span class='linenumber'>2918</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.Dependency.prototype */</span><span class="WHIT">
<span class='linenumber'>2919</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Dependency'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2920</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2921</span>      * 명시된 파라미터를 이용하여 새로운 객체를 생성한다.
<span class='linenumber'>2922</span>      * 이 클래스의 인스턴스는 {@link tau.rt.DependencyChain} 객체에
<span class='linenumber'>2923</span>      * 추가된다.
<span class='linenumber'>2924</span>      * @class
<span class='linenumber'>2925</span>      * 이 클래스는 현재 샐행할 {@link tau.rt.Application}과 의존관계가 있는
<span class='linenumber'>2926</span>      * 외부 라이브러리 파일을 나타낸다.
<span class='linenumber'>2927</span>      * @constructs
<span class='linenumber'>2928</span>      * @param {String} name 어플리케이션 이름
<span class='linenumber'>2929</span>      * @param {String} src 명시된 어플리케이션과 의존성이 있는
<span class='linenumber'>2930</span>      * 외부 라이브러리 파일
<span class='linenumber'>2931</span>      * @see tau.rt.DependencyChain
<span class='linenumber'>2932</span>      */</span><span class="WHIT">
<span class='linenumber'>2933</span> </span><span class="WHIT">    </span><span class="NAME">Dependency</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">src</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2934</span> </span><span class="WHIT">      </span><span class="NAME">this._name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2935</span> </span><span class="WHIT">      </span><span class="NAME">this._src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">src</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2936</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2937</span> </span><span class="WHIT">    
<span class='linenumber'>2938</span>     </span><span class="COMM">/**
<span class='linenumber'>2939</span>      * 현재 Dependency로 표현된 외부라이브러리가 먼저
<span class='linenumber'>2940</span>      * resolving 되어 있는지 여부를 확인하고 그 결과를
<span class='linenumber'>2941</span>      * 반환한다. 만약 기존에 resolve되어 있다면 false를
<span class='linenumber'>2942</span>      * 반환한다.
<span class='linenumber'>2943</span>      * @returns {Boolean} 만약 기존에 해당 라이브러리가 로딩되었다면
<span class='linenumber'>2944</span>      * false를 반환한다.
<span class='linenumber'>2945</span>      */</span><span class="WHIT">
<span class='linenumber'>2946</span> </span><span class="WHIT">    </span><span class="NAME">needToResolve</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2947</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._src</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">_headerScriptUrls</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">indexOf</span><span class="PUNC">(</span><span class="NAME">this._src</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2948</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2949</span> </span><span class="WHIT">    
<span class='linenumber'>2950</span>     </span><span class="COMM">/**
<span class='linenumber'>2951</span>      * Resolving 프로세스의 결과를 처리한다. 이때 사용되는
<span class='linenumber'>2952</span>      * context는 DependencyContext로써 내부적으로 생성된다.
<span class='linenumber'>2953</span>      * DependencyContext가 제공하는 메소드는
<span class='linenumber'>2954</span>      * getDependencies(),와 resolveNext()메소드가 있다.
<span class='linenumber'>2955</span>      * @param {Object} context 내부적으로 생성된 DependencyContext 객체
<span class='linenumber'>2956</span>      * @param {Boolean|null} success 결과 상태, 만약 null이면
<span class='linenumber'>2957</span>      * resolving과정이 bypass된 것을 의미한다.
<span class='linenumber'>2958</span>      */</span><span class="WHIT">
<span class='linenumber'>2959</span> </span><span class="WHIT">    </span><span class="NAME">handleResult</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">success</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2960</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">msg</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">success</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">' ignores importing: '</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> 
<span class='linenumber'>2961</span>             </span><span class="PUNC">(</span><span class="NAME">success</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">' imported: '</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">' FAILED to import: '</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2962</span> </span><span class="WHIT">      </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="NAME">this._name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">msg</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'\"'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._src</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'\"'</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2963</span> </span><span class="WHIT">      </span><span class="NAME">context.resolveNext</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2964</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2965</span> </span><span class="WHIT">    
<span class='linenumber'>2966</span>     </span><span class="COMM">/**
<span class='linenumber'>2967</span>      * 실제 Resolving작업을 수행한다.
<span class='linenumber'>2968</span>      * @param {Object} context Dependency Context
<span class='linenumber'>2969</span>      */</span><span class="WHIT">
<span class='linenumber'>2970</span> </span><span class="WHIT">    </span><span class="NAME">resolve</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2971</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">$require</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="STRN">'undefined'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2972</span> </span><span class="WHIT">        </span><span class="NAME">$require.path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._src</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// remember current file path</span><span class="WHIT">
<span class='linenumber'>2973</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2974</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.needToResolve</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2975</span> </span><span class="WHIT">        </span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ScriptHelper</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// proceeds asynchronously</span><span class="WHIT">
<span class='linenumber'>2976</span> </span><span class="WHIT">          </span><span class="NAME">noCache</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">context.noCache</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2977</span> </span><span class="WHIT">          </span><span class="NAME">timeout</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">context.timeout</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2978</span> </span><span class="WHIT">          </span><span class="NAME">autoUnload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">context.autoUnload</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2979</span> </span><span class="WHIT">          </span><span class="NAME">callbackFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.curry</span><span class="PUNC">(</span><span class="NAME">this.handleResult</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2980</span> </span><span class="WHIT">          </span><span class="NAME">timeoutFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.curry</span><span class="PUNC">(</span><span class="NAME">this.handleResult</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>2981</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">load</span><span class="PUNC">(</span><span class="NAME">this._src</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2982</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2983</span> </span><span class="WHIT">        </span><span class="NAME">this.handleResult</span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// notice second paramter is null</span><span class="WHIT">
<span class='linenumber'>2984</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2985</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2986</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2987</span> </span><span class="WHIT">  
<span class='linenumber'>2988</span>    </span><span class="COMM">/** @lends tau.rt.InstallDependency.prototype */</span><span class="WHIT">
<span class='linenumber'>2989</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.InstallDependency'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.Dependency</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2990</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>2991</span>      * 명시된 파라미터를 이용하여 새로운 객체를 생성한다. 새로
<span class='linenumber'>2992</span>      * 생성된 인스턴스는 {@link tau.rt.DependencyChain} 객체에
<span class='linenumber'>2993</span>      * 추가된다.
<span class='linenumber'>2994</span>      * @class
<span class='linenumber'>2995</span>      * 이 클래스는 각 어플리케이션별 필요한 config파일을
<span class='linenumber'>2996</span>      * 로딩하기 위한 기능들을 구현한다.
<span class='linenumber'>2997</span>      * @constructs
<span class='linenumber'>2998</span>      * @param {String} name 어플리케이션 이름
<span class='linenumber'>2999</span>      * @param {String} src {@link tau.rt.Module}이 설치되기 위해
<span class='linenumber'>3000</span>      * 필요한 config file
<span class='linenumber'>3001</span>      * @param {boolean} isSys 현재 {@link tau.rt.Module}이 시스템
<span class='linenumber'>3002</span>      * 모듈이면 true를 사용한다.
<span class='linenumber'>3003</span>      * @extends tau.rt.Dependency
<span class='linenumber'>3004</span>      * @see tau.rt.DependencyChain
<span class='linenumber'>3005</span>      */</span><span class="WHIT">
<span class='linenumber'>3006</span> </span><span class="WHIT">    </span><span class="NAME">InstallDependency</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">src</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">isSys</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3007</span> </span><span class="WHIT">      </span><span class="NAME">this._isSys</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">isSys</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3008</span> </span><span class="WHIT">      </span><span class="NAME">this.$conf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3009</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3010</span> </span><span class="WHIT">  
<span class='linenumber'>3011</span>     </span><span class="COMM">/**
<span class='linenumber'>3012</span>      * 부모클래스의 메소드를 Override하여 config 파일의 정보를
<span class='linenumber'>3013</span>      * 처리한다.
<span class='linenumber'>3014</span>      * @param {Object} context 내부적으로 생성된 DependencyContext 객체
<span class='linenumber'>3015</span>      * @param {Boolean|null} success 결과 상태, 만약 null이면
<span class='linenumber'>3016</span>      */</span><span class="WHIT">
<span class='linenumber'>3017</span> </span><span class="WHIT">    </span><span class="NAME">handleResult</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">context</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">success</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3018</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">success</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3019</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">conf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">GLOBAL.config.current</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3020</span> </span><span class="WHIT">        </span><span class="NAME">conf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">conf</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">tau.parse</span><span class="PUNC">(</span><span class="NAME">conf</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">conf</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3021</span> </span><span class="WHIT">        </span><span class="NAME">conf.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3022</span> </span><span class="WHIT">        </span><span class="NAME">conf.$mutable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this._isSys</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// need to fix!!</span><span class="WHIT">
<span class='linenumber'>3023</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">conf.icon</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3024</span> </span><span class="WHIT">          </span><span class="NAME">conf.icon</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">conf.apps</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">_ICONPATH</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'/icon.png'</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// if dashboard</span><span class="WHIT">
<span class='linenumber'>3025</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3026</span> </span><span class="WHIT">        </span><span class="NAME">conf.icon</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">_resolvePath</span><span class="PUNC">(</span><span class="NAME">conf.icon</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">conf.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3027</span> </span><span class="WHIT">        </span><span class="NAME">conf.splash</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">conf.splash</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">_resolvePath</span><span class="PUNC">(</span><span class="NAME">conf.splash</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">conf.name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3028</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">conf.title</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// if not specified, use app name instead</span><span class="WHIT">
<span class='linenumber'>3029</span> </span><span class="WHIT">          </span><span class="NAME">conf.title</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">conf.name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3030</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3031</span> </span><span class="WHIT">        </span><span class="NAME">this.$conf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">conf</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3032</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3033</span> </span><span class="WHIT">        </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Unable to INSTALL module: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3034</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3035</span> </span><span class="WHIT">      </span><span class="NAME">tau.rt.InstallDependency.$super.handleResult.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3036</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3037</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3038</span> </span><span class="WHIT">  
<span class='linenumber'>3039</span>   </span><span class="COMM">/** @lends tau.rt.Dashboard.prototype */</span><span class="WHIT">
<span class='linenumber'>3040</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Dashboard'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.Module</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3041</span> </span><span class="WHIT">    
<span class='linenumber'>3042</span>     </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3043</span> </span><span class="WHIT">      </span><span class="NAME">CONFIG</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3044</span> </span><span class="WHIT">        </span><span class="NAME">version</span><span class="WHIT">       </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'1.0.0'</span><span class="PUNC">,</span><span class="WHIT">      </span><span class="COMM">// Dashboard version (required)</span><span class="WHIT">
<span class='linenumber'>3045</span> </span><span class="WHIT">        </span><span class="NAME">vendor</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'KT'</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="COMM">// Vendor name</span><span class="WHIT">
<span class='linenumber'>3046</span> </span><span class="WHIT">        
<span class='linenumber'>3047</span>         </span><span class="COMM">/** TODO: Currently unused */</span><span class="WHIT">
<span class='linenumber'>3048</span> </span><span class="WHIT">        </span><span class="NAME">language</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'ko'</span><span class="PUNC">,</span><span class="WHIT">         </span><span class="COMM">// Default language</span><span class="WHIT">
<span class='linenumber'>3049</span> </span><span class="WHIT">        </span><span class="NAME">region</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'KR'</span><span class="WHIT">          </span><span class="COMM">// Default regional settings</span><span class="WHIT">
<span class='linenumber'>3050</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3051</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3052</span> 
<span class='linenumber'>3053</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3054</span>      * 명시된 파라미터를 이용하여 새로운 Dashboard객체를
<span class='linenumber'>3055</span>      * 생성한다.
<span class='linenumber'>3056</span>      * @class
<span class='linenumber'>3057</span>      * Multi-Tasking을 위한 Dashboard기능을 구현하는 클래스
<span class='linenumber'>3058</span>      * @constructs
<span class='linenumber'>3059</span>      * @extends tau.rt.Module
<span class='linenumber'>3060</span>      * @param {Object} rt Runtime 인스턴스
<span class='linenumber'>3061</span>      * @param {Object} config Dashboard config 객체
<span class='linenumber'>3062</span>      */</span><span class="WHIT">
<span class='linenumber'>3063</span> </span><span class="WHIT">    </span><span class="NAME">Dashboard</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">rt</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//$ tau.rt.Dashboard</span><span class="WHIT">
<span class='linenumber'>3064</span> </span><span class="WHIT">      </span><span class="NAME">this._config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.rt.Dashboard.CONFIG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// override default</span><span class="WHIT">
<span class='linenumber'>3065</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Unique module id */</span><span class="WHIT">
<span class='linenumber'>3066</span> </span><span class="WHIT">      </span><span class="NAME">this._id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"tau-dashboard"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3067</span> </span><span class="WHIT">      
<span class='linenumber'>3068</span>       </span><span class="COMM">/** @private reference for DashboardPanel */</span><span class="WHIT">
<span class='linenumber'>3069</span> </span><span class="WHIT">      </span><span class="NAME">this.panel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3070</span> 
<span class='linenumber'>3071</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Applications that are visible to the user */</span><span class="WHIT">
<span class='linenumber'>3072</span> </span><span class="WHIT">      </span><span class="NAME">this._shortcuts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3073</span> </span><span class="WHIT">      
<span class='linenumber'>3074</span>       </span><span class="COMM">/** @private RootController that creates Dashboard screen */</span><span class="WHIT">
<span class='linenumber'>3075</span> </span><span class="WHIT">      </span><span class="NAME">this._rootController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._newController</span><span class="PUNC">(</span><span class="NAME">config.dashboard</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3076</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3077</span> </span><span class="WHIT">    
<span class='linenumber'>3078</span>     </span><span class="COMM">/**
<span class='linenumber'>3079</span>      * 부모클래스의 메소드를 Override하여 Install관련 이벤트를
<span class='linenumber'>3080</span>      * 처리하며 그 이외의 이벤트들을 부모클래스로
<span class='linenumber'>3081</span>      * Delegation시킨다.
<span class='linenumber'>3082</span>      * @param {tau.rt.Event} e 이벤트 객체
<span class='linenumber'>3083</span>      * @param {Object} payload 이벤트를 통해 전달되는 데이터
<span class='linenumber'>3084</span>      * 객체
<span class='linenumber'>3085</span>      * @see tau.rt.Module.propagateEvent
<span class='linenumber'>3086</span>      */</span><span class="WHIT">
<span class='linenumber'>3087</span> </span><span class="WHIT">    </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3088</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3089</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_INSTALLED</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3090</span> </span><span class="WHIT">          </span><span class="NAME">this._rootController.addShortcuts</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3091</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3092</span> </span><span class="WHIT">        </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.RT_UNINSTALLED</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3093</span> </span><span class="WHIT">          </span><span class="NAME">this._rootController.removeShortcut</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3094</span> </span><span class="WHIT">          </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3095</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3096</span> </span><span class="WHIT">      </span><span class="NAME">tau.rt.Dashboard.$super.propagateEvent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3097</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3098</span> </span><span class="WHIT">    
<span class='linenumber'>3099</span>     </span><span class="COMM">/**
<span class='linenumber'>3100</span>      * Dashboard화면을 구성하기 위한 SceneController 객체를 로딩한다. 사용자가 설정한
<span class='linenumber'>3101</span>      * Custom SceneController 클래스가 설정되어 있다면 이 클래스를 로딩하여 
<span class='linenumber'>3102</span>      * SceneController로 사용한다. 만약 설정된 Custom SceneController클래스가 없다면
<span class='linenumber'>3103</span>      * Default SceneController인 &lt;code>tau.ui.DashboardController&lt;/code>의 
<span class='linenumber'>3104</span>      * 객체를 반환한다. Custom SceneController 클래스는 환경설정파일인 
<span class='linenumber'>3105</span>      * &lt;code>config.json&lt;/code>에서 설정한다. 이때 키는 다음과 같이 사용한다.
<span class='linenumber'>3106</span>      * &lt;p/>
<span class='linenumber'>3107</span>      * 사용자가 Custom SceneController를 만들기 위해서는 반드시 
<span class='linenumber'>3108</span>      * &lt;code>tau.ui.DashboardController&lt;/code>를 상속받아 작성해야 한다. 
<span class='linenumber'>3109</span>      * &lt;pre>
<span class='linenumber'>3110</span>      * config({
<span class='linenumber'>3111</span>      *   ...
<span class='linenumber'>3112</span>      *   dashboard    : {columns: 4, controller: ''}
<span class='linenumber'>3113</span>      *   ...
<span class='linenumber'>3114</span>      * });
<span class='linenumber'>3115</span>      * &lt;/pre>
<span class='linenumber'>3116</span>      * @param {Object} cofig global configuration object
<span class='linenumber'>3117</span>      * @returns {tau.ui.DashboardController} Dashboard화면 구성을 위해 사용할 
<span class='linenumber'>3118</span>      * SceneController 객체
<span class='linenumber'>3119</span>      * @throws {TypeError} 사용자가 작성한 SceneController 클래스가
<span class='linenumber'>3120</span>      * &lt;code>tau.ui.DashboardController&lt;/code>을 상속받지 않았을 경우
<span class='linenumber'>3121</span>      * @private
<span class='linenumber'>3122</span>      */</span><span class="WHIT">
<span class='linenumber'>3123</span> </span><span class="WHIT">    </span><span class="NAME">_newController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3124</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">usrclazz</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">config.controller</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3125</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">usrclazz</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3126</span> </span><span class="WHIT">        </span><span class="NAME">usrclazz</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$class.forName</span><span class="PUNC">(</span><span class="NAME">usrclazz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3127</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">instance</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">usrclazz</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>3128</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">instance</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.DashboardController</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3129</span> </span><span class="WHIT">          </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="NAME">instance.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>3130</span> </span><span class="WHIT">              </span><span class="STRN">' is not an instance of DashboardController'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3131</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3132</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">instance</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3133</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3134</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.DashboardController</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// fallback controller</span><span class="WHIT">
<span class='linenumber'>3135</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3136</span> </span><span class="WHIT">    
<span class='linenumber'>3137</span>     </span><span class="COMM">/**
<span class='linenumber'>3138</span>      * Dashboard에서 Shortcut을 출력하기 위해 사용할 컬럼의
<span class='linenumber'>3139</span>      * 개수를 반환한다. Default값은 4이다.
<span class='linenumber'>3140</span>      * @returns {Number} Shortcut을 표시할 컬럼 개수
<span class='linenumber'>3141</span>      */</span><span class="WHIT">
<span class='linenumber'>3142</span> </span><span class="WHIT">    </span><span class="NAME">getCols</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3143</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._config.dashboard.cols</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3144</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3145</span> </span><span class="WHIT">    
<span class='linenumber'>3146</span>     </span><span class="COMM">/**
<span class='linenumber'>3147</span>      * Shortcut을 표시하기 위한 최대 컬럼의 개수를 반환한다.
<span class='linenumber'>3148</span>      * Default값은 5이다.
<span class='linenumber'>3149</span>      * @returns {Number} 최대 컬럼 개수
<span class='linenumber'>3150</span>      */</span><span class="WHIT">
<span class='linenumber'>3151</span> </span><span class="WHIT">    </span><span class="NAME">getMaxCols</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3152</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._config.dashboard.maxcols</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3153</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3154</span> 
<span class='linenumber'>3155</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3156</span>      * 현재 Dashboard에 표시된 {@link tau.ui.Shortcut}객체들을
<span class='linenumber'>3157</span>      * 배열로 반환한다. 만약 Shortcut이 존재하지 않는다면
<span class='linenumber'>3158</span>      * 공백의 배열을 반환한다.
<span class='linenumber'>3159</span>      * @returns {Array} {@link tau.ui.Shortcut} 객체를 가지는
<span class='linenumber'>3160</span>      * 배열
<span class='linenumber'>3161</span>      * @see tau.ui.Shortcut
<span class='linenumber'>3162</span>      */</span><span class="WHIT">
<span class='linenumber'>3163</span> </span><span class="WHIT">    </span><span class="NAME">getShortcuts</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3164</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._shortcuts</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3165</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3166</span> 
<span class='linenumber'>3167</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3168</span>      * Dashboard에 출력할 Shortcut 객체를 추가한다. 이때 추가할 &lt;code>shortcut&lt;/code>
<span class='linenumber'>3169</span>      * 는 &lt;code>tau.ui.Shortcut&lt;/code> 객체이어야 하며 독립 객체 또는 배열에 저장된
<span class='linenumber'>3170</span>      * 형태이어야 한다.
<span class='linenumber'>3171</span>      * @param {tau.ui.Shortcut | Array} shortcut Dashboard에 추가할 tau.ui.Shortcut 객체
<span class='linenumber'>3172</span>      * @see tau.ui.Shortcut
<span class='linenumber'>3173</span>      */</span><span class="WHIT">
<span class='linenumber'>3174</span> </span><span class="WHIT">    </span><span class="NAME">addShortcut</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3175</span> </span><span class="WHIT">        </span><span class="NAME">this._shortcuts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._shortcuts.concat</span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3176</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3177</span> 
<span class='linenumber'>3178</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3179</span>      * Dashboard에 표현된 Shortcut객체들 중 한개 이상의 Shortcut을 삭제한다.
<span class='linenumber'>3180</span>      * @param {tau.ui.Shortcut} args 삭제할 Shortcut 객체
<span class='linenumber'>3181</span>      * @see tau.ui.Shortcut
<span class='linenumber'>3182</span>      */</span><span class="WHIT">
<span class='linenumber'>3183</span> </span><span class="WHIT">    </span><span class="NAME">removeShortcut</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3184</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3185</span> </span><span class="WHIT">          </span><span class="NAME">curModuleConf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">module.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3186</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3187</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">curModuleConf</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// Cannot remove running app</span><span class="WHIT">
<span class='linenumber'>3188</span> </span><span class="WHIT">          </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this._shortcuts</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3189</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3190</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Cannot remove active module: '</span><span class="WHIT"> 
<span class='linenumber'>3191</span>               </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3192</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3193</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3194</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3195</span> </span><span class="WHIT">    
<span class='linenumber'>3196</span>     </span><span class="COMM">/**
<span class='linenumber'>3197</span>      * 명시된 Shortcut이름이 현재 Dashboard에 등록되어 있는지
<span class='linenumber'>3198</span>      * 확인하고 그 결과를 반환한다. Dashboard에 명시된
<span class='linenumber'>3199</span>      * Shortcut이 설치되어 있으면 true를 반환한다.
<span class='linenumber'>3200</span>      * @param {String} name shortcut 이름
<span class='linenumber'>3201</span>      * @returns {Boolean} 명시된 Shortcut이 설치되어 있으면
<span class='linenumber'>3202</span>      * true를 반환한다.
<span class='linenumber'>3203</span>      */</span><span class="WHIT">
<span class='linenumber'>3204</span> </span><span class="WHIT">    </span><span class="NAME">hasShortcut</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3205</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcuts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getShortcuts</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3206</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">shortcuts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3207</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">shortcuts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// compare class name ??</span><span class="WHIT">
<span class='linenumber'>3208</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3209</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3210</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3211</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3212</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3213</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3214</span> 
<span class='linenumber'>3215</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.StorageContext.prototype */</span><span class="WHIT">
<span class='linenumber'>3216</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.StorageContext'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3217</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3218</span>      * 명시된 파라미터를 이용하여 새로운 객체를 생성한다.
<span class='linenumber'>3219</span>      * 인덱스로 사용될 name 값을 이용하여 localStorage에
<span class='linenumber'>3220</span>      * 데이터를 저장하고 추출한다.
<span class='linenumber'>3221</span>      * &lt;p/>
<span class='linenumber'>3222</span>      * localStorage는 객체 저장을 지원하지 않지만 내부적으로
<span class='linenumber'>3223</span>      * 저장된 객체를 stringify메소드를 통해 문자열로 변환한
<span class='linenumber'>3224</span>      * 다음 localStorage객체에 저장한다.
<span class='linenumber'>3225</span>      * @class
<span class='linenumber'>3226</span>      * Persistent한 데이터 저장소를 관리하기 위한 기능들을
<span class='linenumber'>3227</span>      * 정의한다.
<span class='linenumber'>3228</span>      * @constructs
<span class='linenumber'>3229</span>      * @param {String} name Storage context 이름
<span class='linenumber'>3230</span>      * @param {Boolean} reloadOnRead true이면 값을 가져올 때 마다
<span class='linenumber'>3231</span>      * localStorage를 refresh한다.
<span class='linenumber'>3232</span>      * @param {String} platformId 유일한 아이디 값
<span class='linenumber'>3233</span>      * @throws {Error} 브라우저가 localStorage를 지원하지
<span class='linenumber'>3234</span>      * 않을 경우
<span class='linenumber'>3235</span>      */</span><span class="WHIT">
<span class='linenumber'>3236</span> </span><span class="WHIT">    </span><span class="NAME">StorageContext</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">reloadOnRead</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">platformId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3237</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">localStorage</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3238</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.StorageContext: Web localStorage unsupported'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3239</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3240</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Platform ID must be unique to the device application */</span><span class="WHIT">
<span class='linenumber'>3241</span> </span><span class="WHIT">      </span><span class="NAME">this._platformId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">platformId</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">_RTCONFIG.id</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3242</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Reloads data from localStorage for each _getStorage call */</span><span class="WHIT">
<span class='linenumber'>3243</span> </span><span class="WHIT">      </span><span class="NAME">this._reloadOnRead</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">reloadOnRead</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3244</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.setContextName</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3245</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.StorageContext: invalid context name: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3246</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3247</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3248</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3249</span> 
<span class='linenumber'>3250</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3251</span>      * If the storage instance was not initialized, it will fetch the context
<span class='linenumber'>3252</span>      * indexed localStorage value.
<span class='linenumber'>3253</span>      * @private
<span class='linenumber'>3254</span>      * @returns {Object} Contexted localStorage object
<span class='linenumber'>3255</span>      */</span><span class="WHIT">
<span class='linenumber'>3256</span> </span><span class="WHIT">    </span><span class="NAME">_getStorageObj</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3257</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._storage</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._reloadOnRead</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3258</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">storage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">localStorage</span><span class="PUNC">[</span><span class="NAME">this._ctxKey</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3259</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">storage</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3260</span> </span><span class="WHIT">          </span><span class="NAME">this._storage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.parse</span><span class="PUNC">(</span><span class="NAME">storage</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3261</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3262</span> </span><span class="WHIT">          </span><span class="NAME">this._storage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3263</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3264</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3265</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._storage</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3266</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3267</span> 
<span class='linenumber'>3268</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3269</span>      * 생성자에서 설정한 Context의 이름을 반환한다.
<span class='linenumber'>3270</span>      * @returns {String} Context이름
<span class='linenumber'>3271</span>      */</span><span class="WHIT">
<span class='linenumber'>3272</span> </span><span class="WHIT">    </span><span class="NAME">getContextName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3273</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3274</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3275</span> 
<span class='linenumber'>3276</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3277</span>      * StorageContext의 이름을 설정한다. &lt;p/>
<span class='linenumber'>3278</span>      * 동일한 이름의 Context는 데이터를 공유한다.
<span class='linenumber'>3279</span>      * @param {String} name Storage context 이름
<span class='linenumber'>3280</span>      * @returns {Boolean} context이름이 정상적으로 설정되었다먼 true를 반환
<span class='linenumber'>3281</span>      */</span><span class="WHIT">
<span class='linenumber'>3282</span> </span><span class="WHIT">    </span><span class="NAME">setContextName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3283</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._name</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3284</span> </span><span class="WHIT">        </span><span class="COMM">/** @private Name used for localStorage: 'tau.&lt;PlatformID>.&lt;ctxName>' */</span><span class="WHIT">
<span class='linenumber'>3285</span> </span><span class="WHIT">        </span><span class="NAME">this._name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3286</span> </span><span class="WHIT">        </span><span class="COMM">/** @private LocalStorage key: 'tau.&lt;PlatformID>.&lt;name>' */</span><span class="WHIT">
<span class='linenumber'>3287</span> </span><span class="WHIT">        </span><span class="NAME">this._ctxKey</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'tau.'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._platformId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'.'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._name</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3288</span> </span><span class="WHIT">        </span><span class="NAME">this._storage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Remove previously set storage</span><span class="WHIT">
<span class='linenumber'>3289</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3290</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3291</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3292</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3293</span> 
<span class='linenumber'>3294</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3295</span>      * 명시된 key에 해당하는 값을 반환한다.
<span class='linenumber'>3296</span>      * @param {String} key 값을 set하기 위해 사용된 key
<span class='linenumber'>3297</span>      * @returns {Object} 해당하는 키에 설정된 값
<span class='linenumber'>3298</span>      * @see tau.rt.StorageContext#set
<span class='linenumber'>3299</span>      */</span><span class="WHIT">
<span class='linenumber'>3300</span> </span><span class="WHIT">    </span><span class="NAME">get</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3301</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._getStorageObj</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3302</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3303</span> 
<span class='linenumber'>3304</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3305</span>      * 명시된 키를 이용하여 value를 저장한다.
<span class='linenumber'>3306</span>      * @param {String} key 값을 저장하기 위한 key 문자열
<span class='linenumber'>3307</span>      * @param {Object} value 저장하기 위한 객체
<span class='linenumber'>3308</span>      * @returns {Boolean} 값이 정상적으로 저장되었다면 true를
<span class='linenumber'>3309</span>      * 반환한다.
<span class='linenumber'>3310</span>      */</span><span class="WHIT">
<span class='linenumber'>3311</span> </span><span class="WHIT">    </span><span class="NAME">set</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3312</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">tau.isValue</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3313</span> </span><span class="WHIT">        </span><span class="COMM">// Set respective storage data key/value, then flush to localStorage</span><span class="WHIT">
<span class='linenumber'>3314</span> </span><span class="WHIT">        </span><span class="NAME">this._getStorageObj</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3315</span> </span><span class="WHIT">        </span><span class="NAME">this.flush</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3316</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3317</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3318</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3319</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3320</span> 
<span class='linenumber'>3321</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3322</span>      * 현재 StorageContext에 저장된 값들 중 명시된 키(key)에
<span class='linenumber'>3323</span>      * 해당하는 값을 제거한다.
<span class='linenumber'>3324</span>      * @param {String} key 삭제할 값의 키
<span class='linenumber'>3325</span>      * @returns {Boolean} 정상적으로 삭제되었다면 true를 반환한다.
<span class='linenumber'>3326</span>      */</span><span class="WHIT">
<span class='linenumber'>3327</span> </span><span class="WHIT">    </span><span class="NAME">remove</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3328</span> </span><span class="WHIT">      </span><span class="COMM">// Set respective storage data from key, then flush to localStorage</span><span class="WHIT">
<span class='linenumber'>3329</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._getStorageObj</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3330</span> </span><span class="WHIT">        </span><span class="NAME">this.flush</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3331</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3332</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3333</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3334</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3335</span> 
<span class='linenumber'>3336</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3337</span>      * 명시된 인덱스에 해당하는 키를 StorageContext에서 찾아 반환한다.
<span class='linenumber'>3338</span>      * @param {Number} index 인덱스 값
<span class='linenumber'>3339</span>      * @returns {String} key 문자열
<span class='linenumber'>3340</span>      */</span><span class="WHIT">
<span class='linenumber'>3341</span> </span><span class="WHIT">    </span><span class="NAME">key</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3342</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>3343</span>           </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3344</span> </span><span class="WHIT">          </span><span class="NAME">storage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getStorageObj</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3345</span> </span><span class="WHIT">      </span><span class="COMM">// Search index key value</span><span class="WHIT">
<span class='linenumber'>3346</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">k</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">storage</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3347</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">storage.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3348</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3349</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3350</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3351</span> </span><span class="WHIT">          </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3352</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3353</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3354</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3355</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3356</span> 
<span class='linenumber'>3357</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3358</span>      * 현재 StorageContext에 저장된 모든 값(key/value)을
<span class='linenumber'>3359</span>      * 삭제한다.
<span class='linenumber'>3360</span>      */</span><span class="WHIT">
<span class='linenumber'>3361</span> </span><span class="WHIT">    </span><span class="NAME">clear</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3362</span> </span><span class="WHIT">      </span><span class="COMM">// Clear entire storage, then remove the respective key from localStorage</span><span class="WHIT">
<span class='linenumber'>3363</span> </span><span class="WHIT">      </span><span class="NAME">this._storage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3364</span> </span><span class="WHIT">      </span><span class="NAME">localStorage.removeItem</span><span class="PUNC">(</span><span class="NAME">this._ctxKey</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3365</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3366</span> 
<span class='linenumber'>3367</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3368</span>      * Temporary로 가지고 있는 객체를 localStorage객체로
<span class='linenumber'>3369</span>      * 저장한다. 이때 저장될 객체는 stringify메소드를 통해
<span class='linenumber'>3370</span>      * 문자열로 변환된다.
<span class='linenumber'>3371</span>      */</span><span class="WHIT">
<span class='linenumber'>3372</span> </span><span class="WHIT">    </span><span class="NAME">flush</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3373</span> </span><span class="WHIT">      </span><span class="NAME">localStorage</span><span class="PUNC">[</span><span class="NAME">this._ctxKey</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.stringify</span><span class="PUNC">(</span><span class="NAME">this._getStorageObj</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3374</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3375</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3376</span> 
<span class='linenumber'>3377</span> 
<span class='linenumber'>3378</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.ApplicationContext.prototype */</span><span class="WHIT">
<span class='linenumber'>3379</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.ApplicationContext'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3380</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3381</span>      * 명시된 파라미터를 이용하여 새로운 객체를 생성한다.
<span class='linenumber'>3382</span>      * @class
<span class='linenumber'>3383</span>      * Application의 정보인 ID, localStorage등의 정보에 접근할
<span class='linenumber'>3384</span>      * 수 있는 기능을 정의한다.
<span class='linenumber'>3385</span>      * @constructs
<span class='linenumber'>3386</span>      * @param {Object} module 어플리케이션의 {@link tau.rt.Module} 객체
<span class='linenumber'>3387</span>      */</span><span class="WHIT">
<span class='linenumber'>3388</span> </span><span class="WHIT">    </span><span class="NAME">ApplicationContext</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3389</span> </span><span class="WHIT">      </span><span class="NAME">this._module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3390</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3391</span> 
<span class='linenumber'>3392</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3393</span>      * 현재 모듈({@link tau.rt.Module})의 ID를 반환한다.
<span class='linenumber'>3394</span>      * @returns {String} 현재 모듈의 ID
<span class='linenumber'>3395</span>      */</span><span class="WHIT">
<span class='linenumber'>3396</span> </span><span class="WHIT">    </span><span class="NAME">getId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3397</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._module.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3398</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3399</span> 
<span class='linenumber'>3400</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3401</span>      * 명시된 리소스 경로에 대한 절대경로를 반환한다.
<span class='linenumber'>3402</span>      * &lt;p/>
<span class='linenumber'>3403</span>      * 리소스는 반드시 "/", "$shared", 또는 전체경로 형태로
<span class='linenumber'>3404</span>      * 표현되어야 한다.
<span class='linenumber'>3405</span>      * @param {String} path 리소스의 상대경로
<span class='linenumber'>3406</span>      * @returns {String} 명시된 상대경로를 바탕으로한 절대경로
<span class='linenumber'>3407</span>      */</span><span class="WHIT">
<span class='linenumber'>3408</span> </span><span class="WHIT">    </span><span class="NAME">getRealPath</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3409</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">_resolvePath</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._module.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3410</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3411</span> 
<span class='linenumber'>3412</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3413</span>      * 현재 {@link tau.rt.Application}의 config정보를 반환한다.
<span class='linenumber'>3414</span>      * @returns {Object} 현재 Application의 config정보
<span class='linenumber'>3415</span>      */</span><span class="WHIT">
<span class='linenumber'>3416</span> </span><span class="WHIT">    </span><span class="NAME">getConfig</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3417</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._module.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3418</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3419</span> 
<span class='linenumber'>3420</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3421</span>      * 명시된 파라미터를 바탕으로 {@link tau.rt.StorageContext}를 반환한다.
<span class='linenumber'>3422</span>      * @param {String} key 키로 사용할 문자열
<span class='linenumber'>3423</span>      * @param {String} scope Storage scope 이름
<span class='linenumber'>3424</span>      * @return {tau.rt.StorageContext} 명시된 키에 해당하는 StorageContext객체
<span class='linenumber'>3425</span>      * @see tau.rt.StorageContext
<span class='linenumber'>3426</span>      */</span><span class="WHIT">
<span class='linenumber'>3427</span> </span><span class="WHIT">    </span><span class="NAME">getStorage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3428</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._getStorageCtx</span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3429</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3430</span> 
<span class='linenumber'>3431</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3432</span>      * 명시된 객체를 키와 범위를 이용하여 저장한다.
<span class='linenumber'>3433</span>      * @param {String} key 키로 사용할 문자열
<span class='linenumber'>3434</span>      * @param {String} value 저장할 객체
<span class='linenumber'>3435</span>      * @param {String} scope Storage scope 이름
<span class='linenumber'>3436</span>      * @returns {Boolean} 성공적으로 저장되었으면 true를
<span class='linenumber'>3437</span>      * 반환한다.
<span class='linenumber'>3438</span>      */</span><span class="WHIT">  
<span class='linenumber'>3439</span>     </span><span class="NAME">setStorage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3440</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._getStorageCtx</span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">set</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3441</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3442</span> </span><span class="WHIT">  
<span class='linenumber'>3443</span>     </span><span class="COMM">/**
<span class='linenumber'>3444</span>      * 명시된 키와 scope를 이용하여 저장된 값을 삭제한다.
<span class='linenumber'>3445</span>      * @param {String} key 키로 사용할 문자열
<span class='linenumber'>3446</span>      * @param {String} scope Storage scope 이름
<span class='linenumber'>3447</span>      */</span><span class="WHIT">  
<span class='linenumber'>3448</span>     </span><span class="NAME">removeStorage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3449</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._getStorageCtx</span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3450</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3451</span> 
<span class='linenumber'>3452</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3453</span>      * 명시된 인덱스와 scope에 해당하는 키를 반환한다.
<span class='linenumber'>3454</span>      * @param {Number} index 찾고자 하는 키의 인덱스
<span class='linenumber'>3455</span>      * @param {String} scope storage scope 이름
<span class='linenumber'>3456</span>      */</span><span class="WHIT"> 
<span class='linenumber'>3457</span>     </span><span class="NAME">storageKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3458</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._getStorageCtx</span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">key</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3459</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3460</span> 
<span class='linenumber'>3461</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3462</span>      * 명시된 scope에 저장된 모든 값들을 삭제한다.
<span class='linenumber'>3463</span>      * @param {String} scope storage scope 이름
<span class='linenumber'>3464</span>      */</span><span class="WHIT">
<span class='linenumber'>3465</span> </span><span class="WHIT">    </span><span class="NAME">clearStorage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3466</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._getStorageCtx</span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">clear</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3467</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3468</span> 
<span class='linenumber'>3469</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3470</span>      * 현재 모듈에 설정된 Badge 값을 저장한다.
<span class='linenumber'>3471</span>      * @param {String|Number} value 저장할 Badge 값
<span class='linenumber'>3472</span>      * @returns {Boolean} 성공적으로 저장이 되었다면 true를
<span class='linenumber'>3473</span>      * 반환
<span class='linenumber'>3474</span>      */</span><span class="WHIT">
<span class='linenumber'>3475</span> </span><span class="WHIT">    </span><span class="NAME">setBadge</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3476</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._module.setBadge</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3477</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3478</span> 
<span class='linenumber'>3479</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3480</span>      * 현재 모듈에 설정된 Badge값을 반환한다.
<span class='linenumber'>3481</span>      * @returns {String|Number} 설정된 Badge 값
<span class='linenumber'>3482</span>      */</span><span class="WHIT">
<span class='linenumber'>3483</span> </span><span class="WHIT">    </span><span class="NAME">getBadge</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3484</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._module.getBadge</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3485</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3486</span> 
<span class='linenumber'>3487</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3488</span>      * 현재 모듈에 설정된 Badge값을 삭제한다.
<span class='linenumber'>3489</span>      * @returns {Boolean} 정상적으로 삭제되었다면 true를
<span class='linenumber'>3490</span>      * 반환한다.
<span class='linenumber'>3491</span>      */</span><span class="WHIT">
<span class='linenumber'>3492</span> </span><span class="WHIT">    </span><span class="NAME">removeBadge</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3493</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._module.removeBadge</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3494</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3495</span> 
<span class='linenumber'>3496</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3497</span>      * 명시된 scope에 해당하는 StorageContext를 반환한다. 만약
<span class='linenumber'>3498</span>      * scope가 명시되지 않으면 현재 모듈의 scope가 사용된다.
<span class='linenumber'>3499</span>      * @param {String} scope storage scope 이름
<span class='linenumber'>3500</span>      * @private
<span class='linenumber'>3501</span>      */</span><span class="WHIT">
<span class='linenumber'>3502</span> </span><span class="WHIT">    </span><span class="NAME">_getStorageCtx</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3503</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3504</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._module.getStorageCtx</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3505</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isNamespace</span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3506</span> </span><span class="WHIT">        </span><span class="NAME">scope</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'$'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Append $ to the scope name for uniqueness</span><span class="WHIT">
<span class='linenumber'>3507</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._ctx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3508</span> </span><span class="WHIT">          </span><span class="NAME">this._ctx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3509</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3510</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._ctx</span><span class="PUNC">[</span><span class="NAME">scope</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3511</span> </span><span class="WHIT">          </span><span class="NAME">this._ctx</span><span class="PUNC">[</span><span class="NAME">scope</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.StorageContext</span><span class="PUNC">(</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3512</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3513</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._ctx</span><span class="PUNC">[</span><span class="NAME">scope</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3514</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3515</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">'tau.rt.ApplicationContext: Invalid scope namespace, \"'</span><span class="WHIT"> 
<span class='linenumber'>3516</span>           </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'\"'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3517</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3518</span> </span><span class="WHIT">    
<span class='linenumber'>3519</span>     </span><span class="COMM">/**
<span class='linenumber'>3520</span>      * 현재 application의 theme을 명시된 themeName으로 변경한다.
<span class='linenumber'>3521</span>      * &lt;p/>
<span class='linenumber'>3522</span>      * @param {String} themeName 변경할 Theme 이름
<span class='linenumber'>3523</span>      */</span><span class="WHIT">
<span class='linenumber'>3524</span> </span><span class="WHIT">    </span><span class="NAME">setTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3525</span> </span><span class="WHIT">      </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$themeMgr.setTheme</span><span class="PUNC">(</span><span class="NAME">this.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3526</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3527</span> </span><span class="WHIT">    
<span class='linenumber'>3528</span>     </span><span class="COMM">/**
<span class='linenumber'>3529</span>      * config에 설정된 default theme로 초기화한다.
<span class='linenumber'>3530</span>      */</span><span class="WHIT">
<span class='linenumber'>3531</span> </span><span class="WHIT">    </span><span class="NAME">resetTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3532</span> </span><span class="WHIT">      </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$themeMgr.resetTheme</span><span class="PUNC">(</span><span class="NAME">this.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3533</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3534</span> 
<span class='linenumber'>3535</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3536</span> 
<span class='linenumber'>3537</span> 
<span class='linenumber'>3538</span> </span><span class="WHIT">  </span><span class="COMM">/** @lends tau.rt.Theme.prototype */</span><span class="WHIT">
<span class='linenumber'>3539</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Theme'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3540</span> 
<span class='linenumber'>3541</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3542</span>      * 명시된 themeName을 이용하여 새로운 객체를 생성한다.
<span class='linenumber'>3543</span>      * @class
<span class='linenumber'>3544</span>      * 테마에 해당하는 css파일을 동적으로 로드하고 언로드해 주는 class
<span class='linenumber'>3545</span>      * @constructs
<span class='linenumber'>3546</span>      * @param {String} themeName theme 텍스트
<span class='linenumber'>3547</span>      */</span><span class="WHIT">
<span class='linenumber'>3548</span> </span><span class="WHIT">    </span><span class="NAME">Theme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3549</span> </span><span class="WHIT">      </span><span class="NAME">this._themeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3550</span> </span><span class="WHIT">      </span><span class="NAME">this._loaded</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3551</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3552</span> 
<span class='linenumber'>3553</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3554</span>      * 생성자에 명시된 theme 이름을 이용하여 theme을 로드한다.
<span class='linenumber'>3555</span>      * &lt;p/>
<span class='linenumber'>3556</span>      * @param {Boolean} enable theme 활성화 여부
<span class='linenumber'>3557</span>      * @param {Function} callbackfn Theme이 로드되면 호출될
<span class='linenumber'>3558</span>      * callback 함수
<span class='linenumber'>3559</span>      */</span><span class="WHIT">
<span class='linenumber'>3560</span> </span><span class="WHIT">    </span><span class="NAME">load</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">enable</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackfn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3561</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">theme</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3562</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">theme.isLoded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3563</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">theme._css</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3564</span> </span><span class="WHIT">          </span><span class="NAME">theme._css</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ScriptHelper</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3565</span> </span><span class="WHIT">            </span><span class="NAME">type</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'css'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3566</span> </span><span class="WHIT">            </span><span class="NAME">url</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'lib/resources/themes/'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">theme._themeName</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'/tau.css'</span><span class="WHIT">
<span class='linenumber'>3567</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3568</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3569</span> </span><span class="WHIT">        </span><span class="NAME">theme._css.load</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3570</span> </span><span class="WHIT">          </span><span class="NAME">theme._loaded</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3571</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">callbackfn</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">callbackfn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3572</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3573</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3574</span> </span><span class="WHIT">        </span><span class="NAME">theme._loaded</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3575</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">callbackfn</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">callbackfn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3576</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3577</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">enable</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3578</span> </span><span class="WHIT">        </span><span class="NAME">theme._css.reload</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3579</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3580</span> </span><span class="WHIT">        </span><span class="NAME">theme._css.unload</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3581</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3582</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3583</span> 
<span class='linenumber'>3584</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3585</span>      * 현재 사용하고 있는 theme을 언로드한다.
<span class='linenumber'>3586</span>      * @param {Boolean} disabled &lt;code>true&lt;/code>이면 
<span class='linenumber'>3587</span>      * link diabled attribute를 diabled로 설정하고 
<span class='linenumber'>3588</span>      * _loaded property는 그대로 true로 유지한다.  
<span class='linenumber'>3589</span>      */</span><span class="WHIT">
<span class='linenumber'>3590</span> </span><span class="WHIT">    </span><span class="NAME">unload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">disabled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3591</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.isLoded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3592</span> </span><span class="WHIT">        </span><span class="NAME">this._css.unload</span><span class="PUNC">(</span><span class="NAME">disabled</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3593</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3594</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">disabled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3595</span> </span><span class="WHIT">        </span><span class="NAME">this._loaded</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3596</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3597</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3598</span> 
<span class='linenumber'>3599</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3600</span>      * theme이 로드되어 있는지 여부를 체크한다.
<span class='linenumber'>3601</span>      * @return {Boolean} theme 로드 여부
<span class='linenumber'>3602</span>      */</span><span class="WHIT">
<span class='linenumber'>3603</span> </span><span class="WHIT">    </span><span class="NAME">isLoded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3604</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._loaded</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3605</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3606</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3607</span> </span><span class="WHIT">  
<span class='linenumber'>3608</span>   </span><span class="COMM">/** @lends tau.rt.ThemeManager.prototype */</span><span class="WHIT">
<span class='linenumber'>3609</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.ThemeManager'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3610</span> 
<span class='linenumber'>3611</span> </span><span class="WHIT">    </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.rt.ThemeManager */</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3612</span> </span><span class="WHIT">      </span><span class="NAME">DEFAUT_THEME</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'default'</span><span class="WHIT">
<span class='linenumber'>3613</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3614</span> 
<span class='linenumber'>3615</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3616</span>      * 명시된 {@link tau.rt.Runtime}을 이용하여 새로운 객체를
<span class='linenumber'>3617</span>      * 생성한다.
<span class='linenumber'>3618</span>      * @class
<span class='linenumber'>3619</span>      * default, app의theme을 등록하고, default, app의 theme을 변경해 주는 class.
<span class='linenumber'>3620</span>      * @constructs
<span class='linenumber'>3621</span>      * @param {tau.rt.Runtime} rt Runtime 객체
<span class='linenumber'>3622</span>      */</span><span class="WHIT">
<span class='linenumber'>3623</span> </span><span class="WHIT">    </span><span class="NAME">ThemeManager</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">rt</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3624</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Runtime instance */</span><span class="WHIT">
<span class='linenumber'>3625</span> </span><span class="WHIT">      </span><span class="NAME">this._rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3626</span> </span><span class="WHIT">      </span><span class="COMM">/** @private supported themes */</span><span class="WHIT">
<span class='linenumber'>3627</span> </span><span class="WHIT">      </span><span class="NAME">this._themes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3628</span> </span><span class="WHIT">      </span><span class="NAME">this._currentTheme</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3629</span> </span><span class="WHIT">      </span><span class="NAME">this._defaultThemeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3630</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3631</span> 
<span class='linenumber'>3632</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3633</span>      * default theme의 이름을 반환한다.
<span class='linenumber'>3634</span>      * @return {String} default theme 이름
<span class='linenumber'>3635</span>      * @private
<span class='linenumber'>3636</span>      */</span><span class="WHIT">
<span class='linenumber'>3637</span> </span><span class="WHIT">    </span><span class="NAME">_getDefaultThemeName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3638</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._defaultThemeName</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3639</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._rt.isMultiApp</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// multi app</span><span class="WHIT">
<span class='linenumber'>3640</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">,</span><span class="WHIT"> 
<span class='linenumber'>3641</span>               </span><span class="NAME">storageCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.createStorageCtx</span><span class="PUNC">(</span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3642</span> </span><span class="WHIT">              </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.getModuleConfig</span><span class="PUNC">(</span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3643</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">storageCtx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3644</span> </span><span class="WHIT">              </span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">storageCtx.get</span><span class="PUNC">(</span><span class="STRN">'$theme'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3645</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3646</span> </span><span class="WHIT">          </span><span class="NAME">this._defaultThemeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">config.theme</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3647</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3648</span> </span><span class="WHIT">        </span><span class="NAME">this._defaultThemeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._defaultThemeName</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">tau.rt.ThemeManager.DEFAUT_THEME</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3649</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3650</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._defaultThemeName</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3651</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3652</span> 
<span class='linenumber'>3653</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3654</span>      * application의 theme의 이름을 반환한다.
<span class='linenumber'>3655</span>      * @param {Object} config application의 configuration object
<span class='linenumber'>3656</span>      * @return {String} theme 이름
<span class='linenumber'>3657</span>      * @private
<span class='linenumber'>3658</span>      */</span><span class="WHIT">
<span class='linenumber'>3659</span> </span><span class="WHIT">    </span><span class="NAME">_getThemeName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3660</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">storageCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.createStorageCtx</span><span class="PUNC">(</span><span class="NAME">config.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3661</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">storageCtx.get</span><span class="PUNC">(</span><span class="STRN">'$theme'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">config.theme</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this._getDefaultThemeName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3662</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3663</span> 
<span class='linenumber'>3664</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3665</span>      * {@link tau.rt.Theme} instance를 반환한다.
<span class='linenumber'>3666</span>      * &lt;p/>
<span class='linenumber'>3667</span>      * 키에 해당하는 {@link tau.rt.Theme} instance가 존재하지 않은 경우에는
<span class='linenumber'>3668</span>      * {@link tau.rt.Theme} instance을 생성해서 반환한다.
<span class='linenumber'>3669</span>      * @param {String} themeName theme 객체를 가져오기 위한 theme 이름
<span class='linenumber'>3670</span>      * @return {tau.rt.Theme} theme {@link tau.rt.Theme} instance
<span class='linenumber'>3671</span>      * @private
<span class='linenumber'>3672</span>      */</span><span class="WHIT">
<span class='linenumber'>3673</span> </span><span class="WHIT">    </span><span class="NAME">_getTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3674</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3675</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3676</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3677</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._themes.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3678</span> </span><span class="WHIT">        </span><span class="NAME">this._themes</span><span class="PUNC">[</span><span class="NAME">themeName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Theme</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3679</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3680</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._themes</span><span class="PUNC">[</span><span class="NAME">themeName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3681</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3682</span> </span><span class="WHIT">    
<span class='linenumber'>3683</span>     </span><span class="COMM">/**
<span class='linenumber'>3684</span>      * application의 theme의 이름을 설정하고 
<span class='linenumber'>3685</span>      * 새로운 theme을 로드하며 이전에 적용되어 있는 theme을 언로드한다.
<span class='linenumber'>3686</span>      * @param {Object} config application의 configuration 객체
<span class='linenumber'>3687</span>      * @param {String} themeName 설정할 theme 이름
<span class='linenumber'>3688</span>      */</span><span class="WHIT">
<span class='linenumber'>3689</span> </span><span class="WHIT">    </span><span class="NAME">setTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3690</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">manager</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3691</span> </span><span class="WHIT">      
<span class='linenumber'>3692</span>       </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">themeloaded</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3693</span> </span><span class="WHIT">        </span><span class="NAME">this.loadTheme</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">config</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3694</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">storageCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.createStorageCtx</span><span class="PUNC">(</span><span class="NAME">config.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3695</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">storageCtx</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3696</span> </span><span class="WHIT">          </span><span class="NAME">storageCtx.set</span><span class="PUNC">(</span><span class="STRN">'$theme'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3697</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3698</span> </span><span class="WHIT">        </span><span class="NAME">this._rt.unsubscribeEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_THEME_LOADED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeloaded</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3699</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3700</span> </span><span class="WHIT">      
<span class='linenumber'>3701</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.register</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3702</span> </span><span class="WHIT">        </span><span class="NAME">themeloaded.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3703</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3704</span> </span><span class="WHIT">        </span><span class="NAME">this._rt.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_THEME_LOADED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeloaded</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">manager</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3705</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3706</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3707</span> 
<span class='linenumber'>3708</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3709</span>      * default {@link tau.rt.Theme}의 이름을 설정하고, 
<span class='linenumber'>3710</span>      * 현재 application이 default theme으로 설정되어 있는 경우
<span class='linenumber'>3711</span>      * default {@link tau.rt.Theme}을 load하고 이전에 적용되어 있는 
<span class='linenumber'>3712</span>      * {@link tau.rt.Theme}은 언로드한다.
<span class='linenumber'>3713</span>      * @param {String} themeName 설정할 theme 이름
<span class='linenumber'>3714</span>      */</span><span class="WHIT">
<span class='linenumber'>3715</span> </span><span class="WHIT">    </span><span class="NAME">setDefaultTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3716</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3717</span> </span><span class="WHIT">      
<span class='linenumber'>3718</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">this._defaultThemeName</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3719</span> </span><span class="WHIT">        </span><span class="NAME">this._defaultThemeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3720</span> </span><span class="WHIT">        
<span class='linenumber'>3721</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._rt.isMultiApp</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// multi app</span><span class="WHIT">
<span class='linenumber'>3722</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">storageCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.createStorageCtx</span><span class="PUNC">(</span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3723</span> </span><span class="WHIT">          </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3724</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3725</span> </span><span class="WHIT">            </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3726</span> </span><span class="WHIT">            
<span class='linenumber'>3727</span>             </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">storageCtx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3728</span> </span><span class="WHIT">              </span><span class="NAME">storageCtx.set</span><span class="PUNC">(</span><span class="STRN">'$theme'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3729</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3730</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">this._getThemeName</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3731</span> </span><span class="WHIT">              </span><span class="NAME">this.loadTheme</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3732</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3733</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3734</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// single app</span><span class="WHIT">
<span class='linenumber'>3735</span> </span><span class="WHIT">          </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3736</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3737</span> </span><span class="WHIT">            </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3738</span> </span><span class="WHIT">            </span><span class="NAME">this.setTheme</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3739</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3740</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3741</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3742</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3743</span> </span><span class="WHIT">    
<span class='linenumber'>3744</span>     </span><span class="COMM">/**
<span class='linenumber'>3745</span>      * application에 설정된 theme을 등록한다.&lt;p/>
<span class='linenumber'>3746</span>      * Theme이 로딩되면 Runtime객체에
<span class='linenumber'>3747</span>      * {@link tau.rt.Event.RT_THEME_LOADED}이벤트가 발생된다.
<span class='linenumber'>3748</span>      * @param {Object} config application의 configuration object
<span class='linenumber'>3749</span>      * @param {String} themeName 등록할 theme 이름
<span class='linenumber'>3750</span>      */</span><span class="WHIT">
<span class='linenumber'>3751</span> </span><span class="WHIT">    </span><span class="NAME">register</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3752</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">theme</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">manager</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3753</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isUndefined</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3754</span> </span><span class="WHIT">        </span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getThemeName</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3755</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3756</span> </span><span class="WHIT">      </span><span class="NAME">theme</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getTheme</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3757</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">theme</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3758</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">theme.isLoded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3759</span> </span><span class="WHIT">          </span><span class="NAME">theme.load</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3760</span> </span><span class="WHIT">            </span><span class="NAME">manager._rt.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_THEME_LOADED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3761</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3762</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3763</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3764</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3765</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3766</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3767</span> </span><span class="WHIT">    
<span class='linenumber'>3768</span>     </span><span class="NAME">unregister</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3769</span> </span><span class="WHIT">      </span><span class="COMM">//TODO</span><span class="WHIT">
<span class='linenumber'>3770</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3771</span> </span><span class="WHIT">    
<span class='linenumber'>3772</span>     </span><span class="COMM">/**
<span class='linenumber'>3773</span>      * 새로운 theme을 로드하고 이전에 적용되어 있는 theme은 언로드한다.
<span class='linenumber'>3774</span>      * &lt;p/>
<span class='linenumber'>3775</span>      * themeName이 없는 경우에는 현재 application에 설정되어 있는 theme을 로드한다.
<span class='linenumber'>3776</span>      * @param {Object} opts 
<span class='linenumber'>3777</span>      * @param {Object} [opts.config] Module config
<span class='linenumber'>3778</span>      * @param {String} [opts.themeName] Loading할 theme 이름
<span class='linenumber'>3779</span>      * @param {tau.rt.Module} [opts.module] Theme과 관련된
<span class='linenumber'>3780</span>      * Module 객체
<span class='linenumber'>3781</span>      */</span><span class="WHIT">
<span class='linenumber'>3782</span> </span><span class="WHIT">    </span><span class="NAME">loadTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3783</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">manager</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3784</span> </span><span class="WHIT">          </span><span class="NAME">module</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newTheme</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3785</span> </span><span class="WHIT">      
<span class='linenumber'>3786</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3787</span> </span><span class="WHIT">        </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts.config</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3788</span> </span><span class="WHIT">        </span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts.themeName</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3789</span> </span><span class="WHIT">        </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts.module</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3790</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3791</span> </span><span class="WHIT">      
<span class='linenumber'>3792</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3793</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3794</span> </span><span class="WHIT">          </span><span class="NAME">module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">manager._rt.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3795</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3796</span> </span><span class="WHIT">            </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3797</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3798</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3799</span> </span><span class="WHIT">        </span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getThemeName</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3800</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3801</span> </span><span class="WHIT">      
<span class='linenumber'>3802</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3803</span> </span><span class="WHIT">        </span><span class="NAME">newTheme</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getTheme</span><span class="PUNC">(</span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3804</span> </span><span class="WHIT">        
<span class='linenumber'>3805</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newTheme</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3806</span> </span><span class="WHIT">          </span><span class="NAME">newTheme.load</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3807</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">manager._currentTheme</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">manager._currentTheme</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">newTheme</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3808</span> </span><span class="WHIT">              </span><span class="NAME">manager._currentTheme.unload</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3809</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3810</span> </span><span class="WHIT">            </span><span class="NAME">manager._currentTheme</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newTheme</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3811</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3812</span> </span><span class="WHIT">              </span><span class="NAME">module.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_THEME_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3813</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3814</span> </span><span class="WHIT">              </span><span class="NAME">manager._rt.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_THEME_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3815</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3816</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3817</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3818</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3819</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3820</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3821</span> </span><span class="WHIT">        </span><span class="NAME">module.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_THEME_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3822</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3823</span> </span><span class="WHIT">        </span><span class="NAME">manager._rt.fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_THEME_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3824</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3825</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3826</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3827</span> </span><span class="WHIT">    
<span class='linenumber'>3828</span>     </span><span class="COMM">/**
<span class='linenumber'>3829</span>      * appplication에 적용되어 있는 theme을 언로드한다.
<span class='linenumber'>3830</span>      * &lt;p/>
<span class='linenumber'>3831</span>      * @param {Object} config application의 configuration object
<span class='linenumber'>3832</span>      */</span><span class="WHIT">
<span class='linenumber'>3833</span> </span><span class="WHIT">    </span><span class="NAME">unloadTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3834</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">theme</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">defaultTheme</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3835</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3836</span> </span><span class="WHIT">        </span><span class="NAME">theme</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getTheme</span><span class="PUNC">(</span><span class="NAME">config.theme</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3837</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">theme</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3838</span> </span><span class="WHIT">          </span><span class="NAME">defaultTheme</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getTheme</span><span class="PUNC">(</span><span class="NAME">this._getDefaultThemeName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3839</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">defaultTheme</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">defaultTheme.load</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3840</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3841</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3842</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3843</span> 
<span class='linenumber'>3844</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3845</span>      * appplication의 config에 적용되어 있는 theme으로 초기화한다.
<span class='linenumber'>3846</span>      * &lt;p/>
<span class='linenumber'>3847</span>      * @param {Object} config application의 configuration object
<span class='linenumber'>3848</span>      */</span><span class="WHIT">
<span class='linenumber'>3849</span> </span><span class="WHIT">    </span><span class="NAME">resetTheme</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3850</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">storageCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._rt.createStorageCtx</span><span class="PUNC">(</span><span class="NAME">config.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3851</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">storageCtx</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3852</span> </span><span class="WHIT">        </span><span class="NAME">storageCtx.remove</span><span class="PUNC">(</span><span class="STRN">'$theme'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3853</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3854</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">config.name</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'$dashboard'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3855</span> </span><span class="WHIT">        </span><span class="NAME">this._defaultThemeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3856</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3857</span> </span><span class="WHIT">      </span><span class="NAME">this.loadTheme</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">config</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3858</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3859</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3860</span> 
<span class='linenumber'>3861</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>3862</span>    *  @lends tau.rt.Clipboard.prototype
<span class='linenumber'>3863</span>    */</span><span class="WHIT">
<span class='linenumber'>3864</span> </span><span class="WHIT">  </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.rt.Clipboard'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3865</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='linenumber'>3866</span>      * 새로운 Clipboard객체를 생성한다. 이 객체는 주로
<span class='linenumber'>3867</span>      * Runtime에 의해 유지관리 된다.
<span class='linenumber'>3868</span>      * @class
<span class='linenumber'>3869</span>      * Temporary로 생성되는 DOM객체들을 저장하기 위한 기능들을
<span class='linenumber'>3870</span>      * 정의한 클래스이다.
<span class='linenumber'>3871</span>      * @constructs
<span class='linenumber'>3872</span>      */</span><span class="WHIT">
<span class='linenumber'>3873</span> </span><span class="WHIT">    </span><span class="NAME">Clipboard</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3874</span> </span><span class="WHIT">      </span><span class="NAME">this._buf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3875</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3876</span> </span><span class="WHIT">    
<span class='linenumber'>3877</span>     </span><span class="COMM">/**
<span class='linenumber'>3878</span>      * 명시된 DOM 노드를 HTML DOM트리로 부터 잘라내서
<span class='linenumber'>3879</span>      * Clipboard객체 내부에 관리한다. 이때 DOM 객체는 명시된
<span class='linenumber'>3880</span>      * 키(key)로 유지 관리되며, id로 사용된다.
<span class='linenumber'>3881</span>      * @param {String} key DOM노드를 관리하기 위한 키 문자열
<span class='linenumber'>3882</span>      * @param {Node} node HTML DOM트리에서 잘라낸 DOM 노드
<span class='linenumber'>3883</span>      */</span><span class="WHIT">
<span class='linenumber'>3884</span> </span><span class="WHIT">    </span><span class="NAME">cut</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">node</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3885</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">node.parentNode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3886</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3887</span> </span><span class="WHIT">          </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">node.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.genId</span><span class="PUNC">(</span><span class="STRN">'clip'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3888</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3889</span> </span><span class="WHIT">        </span><span class="NAME">this._buf</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">node.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">node</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3890</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3891</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3892</span> </span><span class="WHIT">    
<span class='linenumber'>3893</span>     </span><span class="COMM">/**
<span class='linenumber'>3894</span>      * 명시된 키로 저장된 DOM노드를 container의 자식노드로
<span class='linenumber'>3895</span>      * 추가한다.
<span class='linenumber'>3896</span>      * @param {String} key DOM노드를 관리하기 위한 키 문자열
<span class='linenumber'>3897</span>      * @param {Node} container DOM노드가 추가될 부모노드
<span class='linenumber'>3898</span>      */</span><span class="WHIT">
<span class='linenumber'>3899</span> </span><span class="WHIT">    </span><span class="NAME">paste</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">container</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3900</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._buf</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3901</span> </span><span class="WHIT">        </span><span class="NAME">container.appendChild</span><span class="PUNC">(</span><span class="NAME">this._buf</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3902</span> </span><span class="WHIT">        </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._buf</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3903</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3904</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3905</span> </span><span class="WHIT">    
<span class='linenumber'>3906</span>     </span><span class="COMM">/**
<span class='linenumber'>3907</span>      * 명시된 키로 관리되고 있는 DOM노드를 Clipboard로 부터
<span class='linenumber'>3908</span>      * 삭제한다.
<span class='linenumber'>3909</span>      * @param {String } key DOM노드를 관리하기 위한 키 문자열
<span class='linenumber'>3910</span>      */</span><span class="WHIT">
<span class='linenumber'>3911</span> </span><span class="WHIT">    </span><span class="NAME">remove</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3912</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._buf</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3913</span> </span><span class="WHIT">        </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._buf</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3914</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3915</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3916</span> </span><span class="WHIT">    
<span class='linenumber'>3917</span>     </span><span class="COMM">/**
<span class='linenumber'>3918</span>      * Clipboard에 의해 관리되는 모든 DOM 노드들을
<span class='linenumber'>3919</span>      * 삭제한다.
<span class='linenumber'>3920</span>      */</span><span class="WHIT">
<span class='linenumber'>3921</span> </span><span class="WHIT">    </span><span class="NAME">clear</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3922</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">buf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._buf</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3923</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">p</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">buf</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3924</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">buf.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3925</span> </span><span class="WHIT">          </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._buf</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3926</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3927</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3928</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3929</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3930</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3931</span> </span></pre></body></html>